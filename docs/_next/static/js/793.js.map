{"version":3,"file":"static/js/793.js","mappings":"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","sources":["webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/display.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/catchUserErrors.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/monitor.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/polyfills.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/getGlobalObject.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/byteUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/getZoneJsOriginalValue.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/timer.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/functionUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/serialisation/jsonStringify.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/objectUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/context/customerDataTracker.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/typeUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/mergeInto.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/serialisation/sanitize.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/observable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/context/contextManager.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/trackingConsent.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/browser/addEventListener.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/context/storeContextManager.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/stackTrace/computeStackTrace.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/stackTrace/handlingStack.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/error/error.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/experimentalFeatures.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/configuration/intakeSites.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/timeUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/sendToExtension.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/numberUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/connectivity/connectivity.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/arrayUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/boundedBuffer.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/telemetry/rawTelemetryEvent.types.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/telemetry/telemetry.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/user/user.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/boot/displayAlreadyInitializedError.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/error/error.types.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/logger/isAuthorized.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/createErrorFieldFromRawError.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/logger.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/eventBridge.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/instrumentMethod.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/urlPolyfill.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/browser/fetchObservable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/stringUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/browserDetection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/browser/cookie.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionStoreStrategy.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/sessionConstants.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/sessionState.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/oldCookiesMigration.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInCookie.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/storeStrategies/sessionInLocalStorage.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/sessionStoreOperations.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/sessionStore.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/configuration/endpointBuilder.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/configuration/tags.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/configuration/transportConfiguration.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/configuration/configuration.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/report/reportObservable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/configuration.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/boot/preStartLogs.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/boot/logsPublicApi.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/browser/pageExitObservable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/synthetics/syntheticsWorkerValues.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/valueHistory.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/session/sessionManager.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/logsSessionManager.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/contexts/rumInternalContext.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/assembly.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/eventRateLimiter/createEventRateLimiter.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/console/consoleObservable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/console/consoleCollection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/browser/xhrObservable.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/utils/responseUtils.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/networkError/networkErrorCollection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/readBytesFromStream.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/domain/error/trackRuntimeError.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/abstractLifeCycle.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/logger/loggerCollection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/lifeCycle.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/batch.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/sendWithRetryStrategy.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/httpRequest.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/flushController.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/transport/startBatchWithReplica.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/tools/encoder.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/logsTelemetry.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/entries/main.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/contexts/commonContext.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-core@5.28.1/node_modules/@datadog/browser-core/esm/boot/init.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/boot/startLogs.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/reportError.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/runtimeError/runtimeErrorCollection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/report/reportCollection.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/domain/contexts/internalContext.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/transport/startLogsBridge.js","webpack://_N_E/./node_modules/.pnpm/@datadog+browser-logs@5.28.1/node_modules/@datadog/browser-logs/esm/transport/startLogsBatch.js","webpack://_N_E/./node_modules/.pnpm/next@14.2.14_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/polyfills/process.js","webpack://_N_E/./node_modules/.pnpm/next@14.2.14_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/process/browser.js","webpack://_N_E/./node_modules/.pnpm/tinykeys@3.0.0/node_modules/tinykeys/dist/tinykeys.module.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/ClearPinButton.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/ChatToggle.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/DisconnectButton.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/CameraDisabledIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/CameraIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/ChatCloseIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/ChatIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/Chevron.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/FocusToggleIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/GearIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/LeaveIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/LockLockedIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/MicDisabledIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/MicIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/QualityExcellentIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/QualityGoodIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/QualityPoorIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/QualityUnknownIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/ScreenShareIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/ScreenShareStopIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/SpinnerIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/UnfocusToggleIcon.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/FocusToggle.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/utils.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/MediaDeviceSelect.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/StartMediaButton.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/icons/util.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/TrackToggle.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/ConnectionQualityIndicator.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/ParticipantName.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/TrackMutedIndicator.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/assets/images/ParticipantPlaceholder.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useMediaTrackBySourceOrName.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/lodash.debounce@4.0.8/node_modules/lodash.debounce/index.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/usehooks-ts@3.1.0_react@18.3.1/node_modules/usehooks-ts/dist/index.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/VideoTrack.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/AudioTrack.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/participant/ParticipantTile.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/layout/FocusLayout.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/TrackLoop.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/PaginationControl.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/PaginationIndicator.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/layout/GridLayout.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/layout/CarouselLayout.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/layout/LayoutContextProvider.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/RoomAudioRenderer.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/Toast.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/ConnectionStateToast.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/ChatEntry.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/@floating-ui+utils@0.2.8/node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/@floating-ui+core@1.6.0/node_modules/@floating-ui/core/dist/floating-ui.core.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/@floating-ui+utils@0.2.8/node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/@floating-ui+dom@1.6.11/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/loglevel@1.9.1/node_modules/loglevel/lib/loglevel.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/tslib@2.7.0/node_modules/tslib/tslib.es6.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/config.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Subject.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/Action.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/intervalProvider.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/AsyncAction.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/Scheduler.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/async.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduler/AsyncScheduler.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/empty.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/args.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isScheduler.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/from.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/of.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/timeout.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/isDate.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/concat.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/concatAll.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/merge.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/scan.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/scanInternals.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/startWith.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/core/dist/index.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/finalize.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/skipUntil.js","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/chat-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/pin-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/layout-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/track-reference-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/participant-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/room-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/context/feature-context.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/internal/useResizeObserver.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/internal/useObservableState.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/internal/useMediaQuery.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useConnectionQualityIndicator.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useConnectionStatus.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useDisconnectButton.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useFocusToggle.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useGridLayout.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useIsMuted.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useLocalParticipant.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useLocalParticipantPermissions.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useMediaDeviceSelect.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useVisualStableUpdate.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/usePagination.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useParticipantTile.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useIsSpeaking.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useFacingMode.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/usePinnedTracks.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useStartAudio.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useStartVideo.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useSwipe.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useChatToggle.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useTrackMutedIndicator.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useTrackToggle.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useTracks.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useChat.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/usePersistentUserChoices.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useIsEncrypted.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useIsRecording.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/cloud/krisp/useKrispNoiseFilter.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/prefabs/Chat.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/prefabs/MediaDeviceMenu.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useWarnAboutMissingStyles.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/prefabs/PreJoin.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/controls/SettingsMenuToggle.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useSettingsToggle.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/prefabs/ControlBar.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/prefabs/VideoConference.tsx","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/mergeProps.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/hooks/useLiveKitRoom.ts","webpack://_N_E/./node_modules/.pnpm/@livekit+components-react@2.6.4_@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.6__live_nbqsv4r2j6tyywy6px2jasogsa/node_modules/@livekit/components-react/src/components/LiveKitRoom.tsx"],"sourcesContent":["/* eslint-disable local-rules/disallow-side-effects */\n/**\n * Keep references on console methods to avoid triggering patched behaviors\n *\n * NB: in some setup, console could already be patched by another SDK.\n * In this case, some display messages can be sent by the other SDK\n * but we should be safe from infinite loop nonetheless.\n */\nexport var ConsoleApiName = {\n    log: 'log',\n    debug: 'debug',\n    info: 'info',\n    warn: 'warn',\n    error: 'error',\n};\n/**\n * When building JS bundles, some users might use a plugin[1] or configuration[2] to remove\n * \"console.*\" references. This causes some issue as we expect `console.*` to be defined.\n * As a workaround, let's use a variable alias, so those expressions won't be taken into account by\n * simple static analysis.\n *\n * [1]: https://babeljs.io/docs/babel-plugin-transform-remove-console/\n * [2]: https://github.com/terser/terser#compress-options (look for drop_console)\n */\nexport var globalConsole = console;\nexport var originalConsoleMethods = {};\nObject.keys(ConsoleApiName).forEach(function (name) {\n    originalConsoleMethods[name] = globalConsole[name];\n});\nvar PREFIX = 'Datadog Browser SDK:';\nexport var display = {\n    debug: originalConsoleMethods.debug.bind(globalConsole, PREFIX),\n    log: originalConsoleMethods.log.bind(globalConsole, PREFIX),\n    info: originalConsoleMethods.info.bind(globalConsole, PREFIX),\n    warn: originalConsoleMethods.warn.bind(globalConsole, PREFIX),\n    error: originalConsoleMethods.error.bind(globalConsole, PREFIX),\n};\nexport var DOCS_ORIGIN = 'https://docs.datadoghq.com';\nexport var DOCS_TROUBLESHOOTING = \"\".concat(DOCS_ORIGIN, \"/real_user_monitoring/browser/troubleshooting\");\nexport var MORE_DETAILS = 'More details:';\n//# sourceMappingURL=display.js.map","import { display } from './display';\nexport function catchUserErrors(fn, errorMsg) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        try {\n            return fn.apply(void 0, args);\n        }\n        catch (err) {\n            display.error(errorMsg, err);\n        }\n    };\n}\n//# sourceMappingURL=catchUserErrors.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { display } from './display';\nvar onMonitorErrorCollected;\nvar debugMode = false;\nexport function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n    onMonitorErrorCollected = newOnMonitorErrorCollected;\n}\nexport function setDebugMode(newDebugMode) {\n    debugMode = newDebugMode;\n}\nexport function resetMonitor() {\n    onMonitorErrorCollected = undefined;\n    debugMode = false;\n}\nexport function monitored(_, __, descriptor) {\n    var originalMethod = descriptor.value;\n    descriptor.value = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var decorated = onMonitorErrorCollected ? monitor(originalMethod) : originalMethod;\n        return decorated.apply(this, args);\n    };\n}\nexport function monitor(fn) {\n    return function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return callMonitored(fn, this, arguments);\n    }; // consider output type has input type\n}\nexport function callMonitored(fn, context, args) {\n    try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return fn.apply(context, args);\n    }\n    catch (e) {\n        displayIfDebugEnabled(e);\n        if (onMonitorErrorCollected) {\n            try {\n                onMonitorErrorCollected(e);\n            }\n            catch (e) {\n                displayIfDebugEnabled(e);\n            }\n        }\n    }\n}\nexport function displayIfDebugEnabled() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (debugMode) {\n        display.error.apply(display, __spreadArray(['[MONITOR]'], args, false));\n    }\n}\n//# sourceMappingURL=monitor.js.map","export function includes(candidate, search) {\n    return candidate.indexOf(search) !== -1;\n}\nexport function arrayFrom(arrayLike) {\n    if (Array.from) {\n        return Array.from(arrayLike);\n    }\n    var array = [];\n    if (arrayLike instanceof Set) {\n        arrayLike.forEach(function (item) { return array.push(item); });\n    }\n    else {\n        for (var i = 0; i < arrayLike.length; i++) {\n            array.push(arrayLike[i]);\n        }\n    }\n    return array;\n}\nexport function find(array, predicate) {\n    for (var i = 0; i < array.length; i += 1) {\n        var item = array[i];\n        if (predicate(item, i)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function findLast(array, predicate) {\n    for (var i = array.length - 1; i >= 0; i -= 1) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n    return undefined;\n}\nexport function forEach(list, callback) {\n    Array.prototype.forEach.call(list, callback);\n}\nexport function objectValues(object) {\n    return Object.keys(object).map(function (key) { return object[key]; });\n}\nexport function objectEntries(object) {\n    return Object.keys(object).map(function (key) { return [key, object[key]]; });\n}\nexport function startsWith(candidate, search) {\n    return candidate.slice(0, search.length) === search;\n}\nexport function endsWith(candidate, search) {\n    return candidate.slice(-search.length) === search;\n}\nexport function assign(target) {\n    var toAssign = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        toAssign[_i - 1] = arguments[_i];\n    }\n    toAssign.forEach(function (source) {\n        for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=polyfills.js.map","/**\n * inspired by https://mathiasbynens.be/notes/globalthis\n */\nexport function getGlobalObject() {\n    if (typeof globalThis === 'object') {\n        return globalThis;\n    }\n    Object.defineProperty(Object.prototype, '_dd_temp_', {\n        get: function () {\n            return this;\n        },\n        configurable: true,\n    });\n    // @ts-ignore _dd_temp is defined using defineProperty\n    var globalObject = _dd_temp_;\n    // @ts-ignore _dd_temp is defined using defineProperty\n    delete Object.prototype._dd_temp_;\n    if (typeof globalObject !== 'object') {\n        // on safari _dd_temp_ is available on window but not globally\n        // fallback on other browser globals check\n        if (typeof self === 'object') {\n            globalObject = self;\n        }\n        else if (typeof window === 'object') {\n            globalObject = window;\n        }\n        else {\n            globalObject = {};\n        }\n    }\n    return globalObject;\n}\n//# sourceMappingURL=getGlobalObject.js.map","export var ONE_KIBI_BYTE = 1024;\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE;\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/;\nexport function computeBytesCount(candidate) {\n    // Accurate bytes count computations can degrade performances when there is a lot of events to process\n    if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n        return candidate.length;\n    }\n    if (window.TextEncoder !== undefined) {\n        return new TextEncoder().encode(candidate).length;\n    }\n    return new Blob([candidate]).size;\n}\nexport function concatBuffers(buffers) {\n    var length = buffers.reduce(function (total, buffer) { return total + buffer.length; }, 0);\n    var result = new Uint8Array(length);\n    var offset = 0;\n    for (var _i = 0, buffers_1 = buffers; _i < buffers_1.length; _i++) {\n        var buffer = buffers_1[_i];\n        result.set(buffer, offset);\n        offset += buffer.length;\n    }\n    return result;\n}\n//# sourceMappingURL=byteUtils.js.map","import { getGlobalObject } from './getGlobalObject';\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n    var browserWindow = getGlobalObject();\n    var original;\n    if (browserWindow.Zone && typeof browserWindow.Zone.__symbol__ === 'function') {\n        original = target[browserWindow.Zone.__symbol__(name)];\n    }\n    if (!original) {\n        original = target[name];\n    }\n    return original;\n}\n//# sourceMappingURL=getZoneJsOriginalValue.js.map","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue';\nimport { monitor } from './monitor';\nimport { getGlobalObject } from './getGlobalObject';\nexport function setTimeout(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(monitor(callback), delay);\n}\nexport function clearTimeout(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId);\n}\nexport function setInterval(callback, delay) {\n    return getZoneJsOriginalValue(getGlobalObject(), 'setInterval')(monitor(callback), delay);\n}\nexport function clearInterval(timeoutId) {\n    getZoneJsOriginalValue(getGlobalObject(), 'clearInterval')(timeoutId);\n}\n//# sourceMappingURL=timer.js.map","import { setTimeout, clearTimeout } from '../timer';\n// use lodash API\nexport function throttle(fn, wait, options) {\n    var needLeadingExecution = options && options.leading !== undefined ? options.leading : true;\n    var needTrailingExecution = options && options.trailing !== undefined ? options.trailing : true;\n    var inWaitPeriod = false;\n    var pendingExecutionWithParameters;\n    var pendingTimeoutId;\n    return {\n        throttled: function () {\n            var parameters = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                parameters[_i] = arguments[_i];\n            }\n            if (inWaitPeriod) {\n                pendingExecutionWithParameters = parameters;\n                return;\n            }\n            if (needLeadingExecution) {\n                fn.apply(void 0, parameters);\n            }\n            else {\n                pendingExecutionWithParameters = parameters;\n            }\n            inWaitPeriod = true;\n            pendingTimeoutId = setTimeout(function () {\n                if (needTrailingExecution && pendingExecutionWithParameters) {\n                    fn.apply(void 0, pendingExecutionWithParameters);\n                }\n                inWaitPeriod = false;\n                pendingExecutionWithParameters = undefined;\n            }, wait);\n        },\n        cancel: function () {\n            clearTimeout(pendingTimeoutId);\n            inWaitPeriod = false;\n            pendingExecutionWithParameters = undefined;\n        },\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() { }\n//# sourceMappingURL=functionUtils.js.map","import { noop } from '../utils/functionUtils';\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n    if (typeof value !== 'object' || value === null) {\n        return JSON.stringify(value);\n    }\n    // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n    // subclasses.\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    var restoreValuePrototypeToJson = detachToJsonMethod(Object.getPrototypeOf(value));\n    var restoreValueToJson = detachToJsonMethod(value);\n    try {\n        return JSON.stringify(value, replacer, space);\n    }\n    catch (_a) {\n        return '<error: unable to serialize object>';\n    }\n    finally {\n        restoreObjectPrototypeToJson();\n        restoreArrayPrototypeToJson();\n        restoreValuePrototypeToJson();\n        restoreValueToJson();\n    }\n}\nexport function detachToJsonMethod(value) {\n    var object = value;\n    var objectToJson = object.toJSON;\n    if (objectToJson) {\n        delete object.toJSON;\n        return function () {\n            object.toJSON = objectToJson;\n        };\n    }\n    return noop;\n}\n//# sourceMappingURL=jsonStringify.js.map","import { assign } from './polyfills';\nexport function shallowClone(object) {\n    return assign({}, object);\n}\nexport function objectHasValue(object, value) {\n    return Object.keys(object).some(function (key) { return object[key] === value; });\n}\nexport function isEmptyObject(object) {\n    return Object.keys(object).length === 0;\n}\nexport function mapValues(object, fn) {\n    var newObject = {};\n    for (var _i = 0, _a = Object.keys(object); _i < _a.length; _i++) {\n        var key = _a[_i];\n        newObject[key] = fn(object[key]);\n    }\n    return newObject;\n}\n//# sourceMappingURL=objectUtils.js.map","import { ONE_KIBI_BYTE, computeBytesCount } from '../../tools/utils/byteUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { DOCS_TROUBLESHOOTING, MORE_DETAILS, display } from '../../tools/display';\nimport { isEmptyObject } from '../../tools/utils/objectUtils';\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport var CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE;\n// We observed that the compression ratio is around 8 in general, but we also want to keep a margin\n// because some data might not be compressed (ex: last view update on page exit). We chose 16KiB\n// because it is also the limit of the 'batchBytesCount' that we use for RUM and Logs data, but this\n// is a bit arbitrary.\nexport var CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT = 16 * ONE_KIBI_BYTE;\nexport var BYTES_COMPUTATION_THROTTLING_DELAY = 200;\nexport function createCustomerDataTrackerManager(compressionStatus) {\n    if (compressionStatus === void 0) { compressionStatus = 2 /* CustomerDataCompressionStatus.Disabled */; }\n    var customerDataTrackers = new Map();\n    var alreadyWarned = false;\n    function checkCustomerDataLimit(initialBytesCount) {\n        if (initialBytesCount === void 0) { initialBytesCount = 0; }\n        if (alreadyWarned || compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n            return;\n        }\n        var bytesCountLimit = compressionStatus === 2 /* CustomerDataCompressionStatus.Disabled */\n            ? CUSTOMER_DATA_BYTES_LIMIT\n            : CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT;\n        var bytesCount = initialBytesCount;\n        customerDataTrackers.forEach(function (tracker) {\n            bytesCount += tracker.getBytesCount();\n        });\n        if (bytesCount > bytesCountLimit) {\n            displayCustomerDataLimitReachedWarning(bytesCountLimit);\n            alreadyWarned = true;\n        }\n    }\n    return {\n        /**\n         * Creates a detached tracker. The manager will not store a reference to that tracker, and the\n         * bytes count will be counted independently from other detached trackers.\n         *\n         * This is particularly useful when we don't know when the tracker will be unused, so we don't\n         * leak memory (ex: when used in Logger instances).\n         */\n        createDetachedTracker: function () {\n            var tracker = createCustomerDataTracker(function () { return checkCustomerDataLimit(tracker.getBytesCount()); });\n            return tracker;\n        },\n        /**\n         * Creates a tracker if it doesn't exist, and returns it.\n         */\n        getOrCreateTracker: function (type) {\n            if (!customerDataTrackers.has(type)) {\n                customerDataTrackers.set(type, createCustomerDataTracker(checkCustomerDataLimit));\n            }\n            return customerDataTrackers.get(type);\n        },\n        setCompressionStatus: function (newCompressionStatus) {\n            if (compressionStatus === 0 /* CustomerDataCompressionStatus.Unknown */) {\n                compressionStatus = newCompressionStatus;\n                checkCustomerDataLimit();\n            }\n        },\n        getCompressionStatus: function () { return compressionStatus; },\n        stop: function () {\n            customerDataTrackers.forEach(function (tracker) { return tracker.stop(); });\n            customerDataTrackers.clear();\n        },\n    };\n}\nexport function createCustomerDataTracker(checkCustomerDataLimit) {\n    var bytesCountCache = 0;\n    // Throttle the bytes computation to minimize the impact on performance.\n    // Especially useful if the user call context APIs synchronously multiple times in a row\n    var _a = throttle(function (context) {\n        bytesCountCache = computeBytesCount(jsonStringify(context));\n        checkCustomerDataLimit();\n    }, BYTES_COMPUTATION_THROTTLING_DELAY), computeBytesCountThrottled = _a.throttled, cancelComputeBytesCount = _a.cancel;\n    var resetBytesCount = function () {\n        cancelComputeBytesCount();\n        bytesCountCache = 0;\n    };\n    return {\n        updateCustomerData: function (context) {\n            if (isEmptyObject(context)) {\n                resetBytesCount();\n            }\n            else {\n                computeBytesCountThrottled(context);\n            }\n        },\n        resetCustomerData: resetBytesCount,\n        getBytesCount: function () { return bytesCountCache; },\n        stop: function () {\n            cancelComputeBytesCount();\n        },\n    };\n}\nfunction displayCustomerDataLimitReachedWarning(bytesCountLimit) {\n    display.warn(\"Customer data exceeds the recommended \".concat(bytesCountLimit / ONE_KIBI_BYTE, \"KiB threshold. \").concat(MORE_DETAILS, \" \").concat(DOCS_TROUBLESHOOTING, \"/#customer-data-exceeds-the-recommended-threshold-warning\"));\n}\n//# sourceMappingURL=customerDataTracker.js.map","/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n    if (value === null) {\n        return 'null';\n    }\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    return typeof value;\n}\n//# sourceMappingURL=typeUtils.js.map","import { getType } from './utils/typeUtils';\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n    if (circularReferenceChecker === void 0) { circularReferenceChecker = createCircularReferenceChecker(); }\n    // ignore the source if it is undefined\n    if (source === undefined) {\n        return destination;\n    }\n    if (typeof source !== 'object' || source === null) {\n        // primitive values - just return source\n        return source;\n    }\n    else if (source instanceof Date) {\n        return new Date(source.getTime());\n    }\n    else if (source instanceof RegExp) {\n        var flags = source.flags ||\n            // old browsers compatibility\n            [\n                source.global ? 'g' : '',\n                source.ignoreCase ? 'i' : '',\n                source.multiline ? 'm' : '',\n                source.sticky ? 'y' : '',\n                source.unicode ? 'u' : '',\n            ].join('');\n        return new RegExp(source.source, flags);\n    }\n    if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n        // remove circular references\n        return undefined;\n    }\n    else if (Array.isArray(source)) {\n        var merged_1 = Array.isArray(destination) ? destination : [];\n        for (var i = 0; i < source.length; ++i) {\n            merged_1[i] = mergeInto(merged_1[i], source[i], circularReferenceChecker);\n        }\n        return merged_1;\n    }\n    var merged = getType(destination) === 'object' ? destination : {};\n    for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            merged[key] = mergeInto(merged[key], source[key], circularReferenceChecker);\n        }\n    }\n    return merged;\n}\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n    return mergeInto(undefined, value);\n}\nexport function combine() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    var destination;\n    for (var _a = 0, sources_1 = sources; _a < sources_1.length; _a++) {\n        var source = sources_1[_a];\n        // Ignore any undefined or null sources.\n        if (source === undefined || source === null) {\n            continue;\n        }\n        destination = mergeInto(destination, source);\n    }\n    return destination;\n}\nfunction createCircularReferenceChecker() {\n    if (typeof WeakSet !== 'undefined') {\n        var set_1 = new WeakSet();\n        return {\n            hasAlreadyBeenSeen: function (value) {\n                var has = set_1.has(value);\n                if (!has) {\n                    set_1.add(value);\n                }\n                return has;\n            },\n        };\n    }\n    var array = [];\n    return {\n        hasAlreadyBeenSeen: function (value) {\n            var has = array.indexOf(value) >= 0;\n            if (!has) {\n                array.push(value);\n            }\n            return has;\n        },\n    };\n}\n//# sourceMappingURL=mergeInto.js.map","import { display } from '../display';\nimport { ONE_KIBI_BYTE } from '../utils/byteUtils';\nimport { detachToJsonMethod } from './jsonStringify';\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE;\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$';\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3;\nexport function sanitize(source, maxCharacterCount) {\n    if (maxCharacterCount === void 0) { maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT; }\n    // Unbind any toJSON function we may have on [] or {} prototypes\n    var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype);\n    var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype);\n    // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n    var containerQueue = [];\n    var visitedObjectsWithPath = new WeakMap();\n    var sanitizedData = sanitizeProcessor(source, JSON_PATH_ROOT_ELEMENT, undefined, containerQueue, visitedObjectsWithPath);\n    var serializedSanitizedData = JSON.stringify(sanitizedData);\n    var accumulatedCharacterCount = serializedSanitizedData ? serializedSanitizedData.length : 0;\n    if (accumulatedCharacterCount > maxCharacterCount) {\n        warnOverCharacterLimit(maxCharacterCount, 'discarded', source);\n        return undefined;\n    }\n    while (containerQueue.length > 0 && accumulatedCharacterCount < maxCharacterCount) {\n        var containerToProcess = containerQueue.shift();\n        var separatorLength = 0; // 0 for the first element, 1 for subsequent elements\n        // Arrays and Objects have to be handled distinctly to ensure\n        // we do not pick up non-numerical properties from Arrays\n        if (Array.isArray(containerToProcess.source)) {\n            for (var key = 0; key < containerToProcess.source.length; key++) {\n                var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                if (targetData !== undefined) {\n                    accumulatedCharacterCount += JSON.stringify(targetData).length;\n                }\n                else {\n                    // When an element of an Array (targetData) is undefined, it is serialized as null:\n                    // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n                    accumulatedCharacterCount += 4;\n                }\n                accumulatedCharacterCount += separatorLength;\n                separatorLength = 1;\n                if (accumulatedCharacterCount > maxCharacterCount) {\n                    warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                    break;\n                }\n                ;\n                containerToProcess.target[key] = targetData;\n            }\n        }\n        else {\n            for (var key in containerToProcess.source) {\n                if (Object.prototype.hasOwnProperty.call(containerToProcess.source, key)) {\n                    var targetData = sanitizeProcessor(containerToProcess.source[key], containerToProcess.path, key, containerQueue, visitedObjectsWithPath);\n                    // When a property of an object has an undefined value, it will be dropped during serialization:\n                    // JSON.stringify({a:undefined}) => '{}'\n                    if (targetData !== undefined) {\n                        accumulatedCharacterCount +=\n                            JSON.stringify(targetData).length + separatorLength + key.length + KEY_DECORATION_LENGTH;\n                        separatorLength = 1;\n                    }\n                    if (accumulatedCharacterCount > maxCharacterCount) {\n                        warnOverCharacterLimit(maxCharacterCount, 'truncated', source);\n                        break;\n                    }\n                    ;\n                    containerToProcess.target[key] = targetData;\n                }\n            }\n        }\n    }\n    // Rebind detached toJSON functions\n    restoreObjectPrototypeToJson();\n    restoreArrayPrototypeToJson();\n    return sanitizedData;\n}\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(source, parentPath, key, queue, visitedObjectsWithPath) {\n    // Start by handling toJSON, as we want to sanitize its output\n    var sourceToSanitize = tryToApplyToJSON(source);\n    if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n        return sanitizePrimitivesAndFunctions(sourceToSanitize);\n    }\n    var sanitizedSource = sanitizeObjects(sourceToSanitize);\n    if (sanitizedSource !== '[Object]' && sanitizedSource !== '[Array]' && sanitizedSource !== '[Error]') {\n        return sanitizedSource;\n    }\n    // Handle potential cyclic references\n    // We need to use source as sourceToSanitize could be a reference to a new object\n    // At this stage, we know the source is an object type\n    var sourceAsObject = source;\n    if (visitedObjectsWithPath.has(sourceAsObject)) {\n        return \"[Reference seen at \".concat(visitedObjectsWithPath.get(sourceAsObject), \"]\");\n    }\n    // Add processed source to queue\n    var currentPath = key !== undefined ? \"\".concat(parentPath, \".\").concat(key) : parentPath;\n    var target = Array.isArray(sourceToSanitize) ? [] : {};\n    visitedObjectsWithPath.set(sourceAsObject, currentPath);\n    queue.push({ source: sourceToSanitize, target: target, path: currentPath });\n    return target;\n}\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n    // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n    if (typeof value === 'bigint') {\n        return \"[BigInt] \".concat(value.toString());\n    }\n    // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n    // so it won't prevent stringify from serializing later\n    if (typeof value === 'function') {\n        return \"[Function] \".concat(value.name || 'unknown');\n    }\n    // JSON.stringify() does not serialize symbols.\n    if (typeof value === 'symbol') {\n        return \"[Symbol] \".concat(value.description || value.toString());\n    }\n    return value;\n}\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n    try {\n        // Handle events - Keep a simple implementation to avoid breaking changes\n        if (value instanceof Event) {\n            return {\n                isTrusted: value.isTrusted,\n            };\n        }\n        // Handle all remaining object types in a generic way\n        var result = Object.prototype.toString.call(value);\n        var match = result.match(/\\[object (.*)\\]/);\n        if (match && match[1]) {\n            return \"[\".concat(match[1], \"]\");\n        }\n    }\n    catch (_a) {\n        // If the previous serialization attempts failed, and we cannot convert using\n        // Object.prototype.toString, declare the value unserializable\n    }\n    return '[Unserializable]';\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n    var object = value;\n    if (object && typeof object.toJSON === 'function') {\n        try {\n            return object.toJSON();\n        }\n        catch (_a) {\n            // If toJSON fails, we continue by trying to serialize the value manually\n        }\n    }\n    return value;\n}\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n    display.warn(\"The data provided has been \".concat(changeType, \" as it is over the limit of \").concat(maxCharacterCount, \" characters:\"), source);\n}\n//# sourceMappingURL=sanitize.js.map","// eslint-disable-next-line no-restricted-syntax\nvar Observable = /** @class */ (function () {\n    function Observable(onFirstSubscribe) {\n        this.onFirstSubscribe = onFirstSubscribe;\n        this.observers = [];\n    }\n    Observable.prototype.subscribe = function (f) {\n        var _this = this;\n        this.observers.push(f);\n        if (this.observers.length === 1 && this.onFirstSubscribe) {\n            this.onLastUnsubscribe = this.onFirstSubscribe(this) || undefined;\n        }\n        return {\n            unsubscribe: function () {\n                _this.observers = _this.observers.filter(function (other) { return f !== other; });\n                if (!_this.observers.length && _this.onLastUnsubscribe) {\n                    _this.onLastUnsubscribe();\n                }\n            },\n        };\n    };\n    Observable.prototype.notify = function (data) {\n        this.observers.forEach(function (observer) { return observer(data); });\n    };\n    return Observable;\n}());\nexport { Observable };\nexport function mergeObservables() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return new Observable(function (globalObservable) {\n        var subscriptions = observables.map(function (observable) {\n            return observable.subscribe(function (data) { return globalObservable.notify(data); });\n        });\n        return function () { return subscriptions.forEach(function (subscription) { return subscription.unsubscribe(); }); };\n    });\n}\n//# sourceMappingURL=observable.js.map","import { deepClone } from '../../tools/mergeInto';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { Observable } from '../../tools/observable';\nexport function createContextManager(customerDataTracker) {\n    var context = {};\n    var changeObservable = new Observable();\n    var contextManager = {\n        getContext: function () { return deepClone(context); },\n        setContext: function (newContext) {\n            if (getType(newContext) === 'object') {\n                context = sanitize(newContext);\n                customerDataTracker && customerDataTracker.updateCustomerData(context);\n            }\n            else {\n                contextManager.clearContext();\n            }\n            changeObservable.notify();\n        },\n        setContextProperty: function (key, property) {\n            context[key] = sanitize(property);\n            customerDataTracker && customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        removeContextProperty: function (key) {\n            delete context[key];\n            customerDataTracker && customerDataTracker.updateCustomerData(context);\n            changeObservable.notify();\n        },\n        clearContext: function () {\n            context = {};\n            customerDataTracker && customerDataTracker.resetCustomerData();\n            changeObservable.notify();\n        },\n        changeObservable: changeObservable,\n    };\n    return contextManager;\n}\n//# sourceMappingURL=contextManager.js.map","import { Observable } from '../tools/observable';\nexport var TrackingConsent = {\n    GRANTED: 'granted',\n    NOT_GRANTED: 'not-granted',\n};\nexport function createTrackingConsentState(currentConsent) {\n    var observable = new Observable();\n    return {\n        tryToInit: function (trackingConsent) {\n            if (!currentConsent) {\n                currentConsent = trackingConsent;\n            }\n        },\n        update: function (trackingConsent) {\n            currentConsent = trackingConsent;\n            observable.notify();\n        },\n        isGranted: function () {\n            return currentConsent === TrackingConsent.GRANTED;\n        },\n        observable: observable,\n    };\n}\n//# sourceMappingURL=trackingConsent.js.map","import { monitor } from '../tools/monitor';\nimport { getZoneJsOriginalValue } from '../tools/getZoneJsOriginalValue';\n/**\n * Add an event listener to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n */\nexport function addEventListener(configuration, eventTarget, eventName, listener, options) {\n    return addEventListeners(configuration, eventTarget, [eventName], listener, options);\n}\n/**\n * Add event listeners to an event target object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by: using an option object only if needed and emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are listened\n */\nexport function addEventListeners(configuration, eventTarget, eventNames, listener, _a) {\n    var _b = _a === void 0 ? {} : _a, once = _b.once, capture = _b.capture, passive = _b.passive;\n    var listenerWithMonitor = monitor(function (event) {\n        if (!event.isTrusted && !event.__ddIsTrusted && !configuration.allowUntrustedEvents) {\n            return;\n        }\n        if (once) {\n            stop();\n        }\n        listener(event);\n    });\n    var options = passive ? { capture: capture, passive: passive } : capture;\n    var add = getZoneJsOriginalValue(eventTarget, 'addEventListener');\n    eventNames.forEach(function (eventName) { return add.call(eventTarget, eventName, listenerWithMonitor, options); });\n    function stop() {\n        var remove = getZoneJsOriginalValue(eventTarget, 'removeEventListener');\n        eventNames.forEach(function (eventName) { return remove.call(eventTarget, eventName, listenerWithMonitor, options); });\n    }\n    return {\n        stop: stop,\n    };\n}\n//# sourceMappingURL=addEventListener.js.map","import { addEventListener } from '../../browser/addEventListener';\nimport { combine } from '../../tools/mergeInto';\nvar CONTEXT_STORE_KEY_PREFIX = '_dd_c';\nvar storageListeners = [];\nexport function storeContextManager(configuration, contextManager, productKey, customerDataType) {\n    var storageKey = buildStorageKey(productKey, customerDataType);\n    storageListeners.push(addEventListener(configuration, window, \"storage\" /* DOM_EVENT.STORAGE */, function (_a) {\n        var key = _a.key;\n        if (storageKey === key) {\n            synchronizeWithStorage();\n        }\n    }));\n    contextManager.changeObservable.subscribe(dumpToStorage);\n    contextManager.setContext(combine(getFromStorage(), contextManager.getContext()));\n    function synchronizeWithStorage() {\n        contextManager.setContext(getFromStorage());\n    }\n    function dumpToStorage() {\n        localStorage.setItem(storageKey, JSON.stringify(contextManager.getContext()));\n    }\n    function getFromStorage() {\n        var rawContext = localStorage.getItem(storageKey);\n        return rawContext !== null ? JSON.parse(rawContext) : {};\n    }\n}\nexport function buildStorageKey(productKey, customerDataType) {\n    return \"\".concat(CONTEXT_STORE_KEY_PREFIX, \"_\").concat(productKey, \"_\").concat(customerDataType);\n}\nexport function removeStorageListeners() {\n    storageListeners.map(function (listener) { return listener.stop(); });\n}\n//# sourceMappingURL=storeContextManager.js.map","/**\n * Cross-browser stack trace computation.\n *\n * Reference implementation: https://github.com/csnover/TraceKit/blob/04530298073c3823de72deb0b97e7b38ca7bcb59/tracekit.js\n */\nimport { startsWith } from '../utils/polyfills';\nvar UNKNOWN_FUNCTION = '?';\nexport function computeStackTrace(ex) {\n    var stack = [];\n    var stackProperty = tryToGetString(ex, 'stack');\n    var exString = String(ex);\n    if (stackProperty && startsWith(stackProperty, exString)) {\n        stackProperty = stackProperty.slice(exString.length);\n    }\n    if (stackProperty) {\n        stackProperty.split('\\n').forEach(function (line) {\n            var stackFrame = parseChromeLine(line) || parseChromeAnonymousLine(line) || parseWinLine(line) || parseGeckoLine(line);\n            if (stackFrame) {\n                if (!stackFrame.func && stackFrame.line) {\n                    stackFrame.func = UNKNOWN_FUNCTION;\n                }\n                stack.push(stackFrame);\n            }\n        });\n    }\n    return {\n        message: tryToGetString(ex, 'message'),\n        name: tryToGetString(ex, 'name'),\n        stack: stack,\n    };\n}\nvar fileUrl = '((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\\\w+\\\\.|\\\\/).*?)';\nvar filePosition = '(?::(\\\\d+))';\nvar CHROME_LINE_RE = new RegExp(\"^\\\\s*at (.*?) ?\\\\(\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"?\\\\)?\\\\s*$\"), 'i');\nvar CHROME_EVAL_RE = new RegExp(\"\\\\((\\\\S*)\".concat(filePosition).concat(filePosition, \"\\\\)\"));\nfunction parseChromeLine(line) {\n    var parts = CHROME_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n    var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n    var submatch = CHROME_EVAL_RE.exec(parts[2]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1]; // url\n        parts[3] = submatch[2]; // line\n        parts[4] = submatch[3]; // column\n    }\n    return {\n        args: isNative ? [parts[2]] : [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[3] ? +parts[3] : undefined,\n        url: !isNative ? parts[2] : undefined,\n    };\n}\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\"^\\\\s*at ?\".concat(fileUrl).concat(filePosition, \"?\").concat(filePosition, \"??\\\\s*$\"), 'i');\nfunction parseChromeAnonymousLine(line) {\n    var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[3] ? +parts[3] : undefined,\n        func: UNKNOWN_FUNCTION,\n        line: parts[2] ? +parts[2] : undefined,\n        url: parts[1],\n    };\n}\nvar WINJS_LINE_RE = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinLine(line) {\n    var parts = WINJS_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    return {\n        args: [],\n        column: parts[4] ? +parts[4] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: +parts[3],\n        url: parts[2],\n    };\n}\nvar GECKO_LINE_RE = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGeckoLine(line) {\n    var parts = GECKO_LINE_RE.exec(line);\n    if (!parts) {\n        return;\n    }\n    var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    var submatch = GECKO_EVAL_RE.exec(parts[3]);\n    if (isEval && submatch) {\n        // throw out eval line/column and use top-most line number\n        parts[3] = submatch[1];\n        parts[4] = submatch[2];\n        parts[5] = undefined; // no column when eval\n    }\n    return {\n        args: parts[2] ? parts[2].split(',') : [],\n        column: parts[5] ? +parts[5] : undefined,\n        func: parts[1] || UNKNOWN_FUNCTION,\n        line: parts[4] ? +parts[4] : undefined,\n        url: parts[3],\n    };\n}\nfunction tryToGetString(candidate, property) {\n    if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n        return undefined;\n    }\n    var value = candidate[property];\n    return typeof value === 'string' ? value : undefined;\n}\nexport function computeStackTraceFromOnErrorMessage(messageObj, url, line, column) {\n    var stack = [{ url: url, column: column, line: line }];\n    var _a = tryToParseMessage(messageObj), name = _a.name, message = _a.message;\n    return {\n        name: name,\n        message: message,\n        stack: stack,\n    };\n}\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\\s\\S]*)$/;\nfunction tryToParseMessage(messageObj) {\n    var _a;\n    var name;\n    var message;\n    if ({}.toString.call(messageObj) === '[object String]') {\n        ;\n        _a = ERROR_TYPES_RE.exec(messageObj), name = _a[1], message = _a[2];\n    }\n    return { name: name, message: message };\n}\n//# sourceMappingURL=computeStackTrace.js.map","import { callMonitored } from '../monitor';\nimport { noop } from '../utils/functionUtils';\nimport { computeStackTrace } from './computeStackTrace';\n/**\n * Creates a stacktrace without SDK internal frames.\n * Constraints:\n * - Has to be called at the utmost position of the call stack.\n * - No monitored function should encapsulate it, that is why we need to use callMonitored inside it.\n */\nexport function createHandlingStack() {\n    /**\n     * Skip the two internal frames:\n     * - SDK API (console.error, ...)\n     * - this function\n     * in order to keep only the user calls\n     */\n    var internalFramesToSkip = 2;\n    var error = new Error();\n    var formattedStack;\n    // IE needs to throw the error to fill in the stack trace\n    if (!error.stack) {\n        try {\n            throw error;\n        }\n        catch (e) {\n            noop();\n        }\n    }\n    callMonitored(function () {\n        var stackTrace = computeStackTrace(error);\n        stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip);\n        formattedStack = toStackTraceString(stackTrace);\n    });\n    return formattedStack;\n}\nexport function toStackTraceString(stack) {\n    var result = formatErrorMessage(stack);\n    stack.stack.forEach(function (frame) {\n        var func = frame.func === '?' ? '<anonymous>' : frame.func;\n        var args = frame.args && frame.args.length > 0 ? \"(\".concat(frame.args.join(', '), \")\") : '';\n        var line = frame.line ? \":\".concat(frame.line) : '';\n        var column = frame.line && frame.column ? \":\".concat(frame.column) : '';\n        result += \"\\n  at \".concat(func).concat(args, \" @ \").concat(frame.url).concat(line).concat(column);\n    });\n    return result;\n}\nexport function formatErrorMessage(stack) {\n    return \"\".concat(stack.name || 'Error', \": \").concat(stack.message);\n}\n//# sourceMappingURL=handlingStack.js.map","import { sanitize } from '../../tools/serialisation/sanitize';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nexport var NO_ERROR_STACK_PRESENT_MESSAGE = 'No stack, consider using an instance of Error';\nexport function computeRawError(_a) {\n    var stackTrace = _a.stackTrace, originalError = _a.originalError, handlingStack = _a.handlingStack, startClocks = _a.startClocks, nonErrorPrefix = _a.nonErrorPrefix, source = _a.source, handling = _a.handling;\n    var isErrorInstance = originalError instanceof Error;\n    var message = computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError);\n    var stack = hasUsableStack(isErrorInstance, stackTrace)\n        ? toStackTraceString(stackTrace)\n        : NO_ERROR_STACK_PRESENT_MESSAGE;\n    var causes = isErrorInstance ? flattenErrorCauses(originalError, source) : undefined;\n    var type = stackTrace ? stackTrace.name : undefined;\n    var fingerprint = tryToGetFingerprint(originalError);\n    return {\n        startClocks: startClocks,\n        source: source,\n        handling: handling,\n        handlingStack: handlingStack,\n        originalError: originalError,\n        type: type,\n        message: message,\n        stack: stack,\n        causes: causes,\n        fingerprint: fingerprint,\n    };\n}\nfunction computeMessage(stackTrace, isErrorInstance, nonErrorPrefix, originalError) {\n    // Favor stackTrace message only if tracekit has really been able to extract something meaningful (message + name)\n    // TODO rework tracekit integration to avoid scattering error building logic\n    return (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.message) && (stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name)\n        ? stackTrace.message\n        : !isErrorInstance\n            ? \"\".concat(nonErrorPrefix, \" \").concat(jsonStringify(sanitize(originalError)))\n            : 'Empty message';\n}\nfunction hasUsableStack(isErrorInstance, stackTrace) {\n    if (stackTrace === undefined) {\n        return false;\n    }\n    if (isErrorInstance) {\n        return true;\n    }\n    // handle cases where tracekit return stack = [] or stack = [{url: undefined, line: undefined, column: undefined}]\n    // TODO rework tracekit integration to avoid generating those unusable stack\n    return stackTrace.stack.length > 0 && (stackTrace.stack.length > 1 || stackTrace.stack[0].url !== undefined);\n}\nexport function tryToGetFingerprint(originalError) {\n    return originalError instanceof Error && 'dd_fingerprint' in originalError\n        ? String(originalError.dd_fingerprint)\n        : undefined;\n}\nexport function getFileFromStackTraceString(stack) {\n    var _a;\n    return (_a = /@ (.+)/.exec(stack)) === null || _a === void 0 ? void 0 : _a[1];\n}\nexport function flattenErrorCauses(error, parentSource) {\n    var currentError = error;\n    var causes = [];\n    while ((currentError === null || currentError === void 0 ? void 0 : currentError.cause) instanceof Error && causes.length < 10) {\n        var stackTrace = computeStackTrace(currentError.cause);\n        causes.push({\n            message: currentError.cause.message,\n            source: parentSource,\n            type: stackTrace === null || stackTrace === void 0 ? void 0 : stackTrace.name,\n            stack: stackTrace && toStackTraceString(stackTrace),\n        });\n        currentError = currentError.cause;\n    }\n    return causes.length ? causes : undefined;\n}\n//# sourceMappingURL=error.js.map","/**\n * LIMITATION:\n * For NPM setup, this feature flag singleton is shared between RUM and Logs product.\n * This means that an experimental flag set on the RUM product will be set on the Logs product.\n * So keep in mind that in certain configurations, your experimental feature flag may affect other products.\n *\n * FORMAT:\n * All feature flags should be snake_cased\n */\n// We want to use a real enum (i.e. not a const enum) here, to be able to check whether an arbitrary\n// string is an expected feature flag\nimport { objectHasValue } from './utils/objectUtils';\n// eslint-disable-next-line no-restricted-syntax\nexport var ExperimentalFeature;\n(function (ExperimentalFeature) {\n    ExperimentalFeature[\"WRITABLE_RESOURCE_GRAPHQL\"] = \"writable_resource_graphql\";\n    ExperimentalFeature[\"REMOTE_CONFIGURATION\"] = \"remote_configuration\";\n    ExperimentalFeature[\"UPDATE_VIEW_NAME\"] = \"update_view_name\";\n    ExperimentalFeature[\"LONG_ANIMATION_FRAME\"] = \"long_animation_frame\";\n})(ExperimentalFeature || (ExperimentalFeature = {}));\nvar enabledExperimentalFeatures = new Set();\nexport function initFeatureFlags(enableExperimentalFeatures) {\n    if (Array.isArray(enableExperimentalFeatures)) {\n        addExperimentalFeatures(enableExperimentalFeatures.filter(function (flag) {\n            return objectHasValue(ExperimentalFeature, flag);\n        }));\n    }\n}\nexport function addExperimentalFeatures(enabledFeatures) {\n    enabledFeatures.forEach(function (flag) {\n        enabledExperimentalFeatures.add(flag);\n    });\n}\nexport function isExperimentalFeatureEnabled(featureName) {\n    return enabledExperimentalFeatures.has(featureName);\n}\nexport function resetExperimentalFeatures() {\n    enabledExperimentalFeatures.clear();\n}\nexport function getExperimentalFeatures() {\n    return enabledExperimentalFeatures;\n}\n//# sourceMappingURL=experimentalFeatures.js.map","export var INTAKE_SITE_STAGING = 'datad0g.com';\nexport var INTAKE_SITE_FED_STAGING = 'dd0g-gov.com';\nexport var INTAKE_SITE_US1 = 'datadoghq.com';\nexport var INTAKE_SITE_EU1 = 'datadoghq.eu';\nexport var INTAKE_SITE_US1_FED = 'ddog-gov.com';\nexport var PCI_INTAKE_HOST_US1 = 'pci.browser-intake-datadoghq.com';\n//# sourceMappingURL=intakeSites.js.map","import { isNumber, round } from './numberUtils';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = 60 * ONE_SECOND;\nexport var ONE_HOUR = 60 * ONE_MINUTE;\nexport var ONE_DAY = 24 * ONE_HOUR;\nexport var ONE_YEAR = 365 * ONE_DAY;\nexport function relativeToClocks(relative) {\n    return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) };\n}\nexport function timeStampToClocks(timeStamp) {\n    return { relative: getRelativeTime(timeStamp), timeStamp: timeStamp };\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n    var correctedOrigin = (dateNow() - performance.now());\n    // apply correction only for positive drift\n    if (correctedOrigin > getNavigationStart()) {\n        return Math.round(addDuration(correctedOrigin, relativeTime));\n    }\n    return getTimeStamp(relativeTime);\n}\nexport function currentDrift() {\n    return Math.round(dateNow() - addDuration(getNavigationStart(), performance.now()));\n}\nexport function toServerDuration(duration) {\n    if (!isNumber(duration)) {\n        return duration;\n    }\n    return round(duration * 1e6, 0);\n}\nexport function dateNow() {\n    // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n    // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n    // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n    // case ourselves.\n    // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n    return new Date().getTime();\n}\nexport function timeStampNow() {\n    return dateNow();\n}\nexport function relativeNow() {\n    return performance.now();\n}\nexport function clocksNow() {\n    return { relative: relativeNow(), timeStamp: timeStampNow() };\n}\nexport function clocksOrigin() {\n    return { relative: 0, timeStamp: getNavigationStart() };\n}\nexport function elapsed(start, end) {\n    return (end - start);\n}\nexport function addDuration(a, b) {\n    return a + b;\n}\n/**\n * Get the time since the navigation was started.\n *\n * Note: this does not use `performance.timeOrigin` because it doesn't seem to reflect the actual\n * time on which the navigation has started: it may be much farther in the past, at least in Firefox 71.\n * Related issue in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1429926\n */\nexport function getRelativeTime(timestamp) {\n    return (timestamp - getNavigationStart());\n}\nexport function getTimeStamp(relativeTime) {\n    return Math.round(addDuration(getNavigationStart(), relativeTime));\n}\nexport function looksLikeRelativeTime(time) {\n    return time < ONE_YEAR;\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart;\nfunction getNavigationStart() {\n    if (navigationStart === undefined) {\n        navigationStart = performance.timing.navigationStart;\n    }\n    return navigationStart;\n}\n//# sourceMappingURL=timeUtils.js.map","export function sendToExtension(type, payload) {\n    var callback = window.__ddBrowserSdkExtensionCallback;\n    if (callback) {\n        callback({ type: type, payload: payload });\n    }\n}\n//# sourceMappingURL=sendToExtension.js.map","/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n    return threshold !== 0 && Math.random() * 100 <= threshold;\n}\nexport function round(num, decimals) {\n    return +num.toFixed(decimals);\n}\nexport function isPercentage(value) {\n    return isNumber(value) && value >= 0 && value <= 100;\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\n//# sourceMappingURL=numberUtils.js.map","export function getConnectivity() {\n    var _a;\n    var navigator = window.navigator;\n    return {\n        status: navigator.onLine ? 'connected' : 'not_connected',\n        interfaces: navigator.connection && navigator.connection.type ? [navigator.connection.type] : undefined,\n        effective_type: (_a = navigator.connection) === null || _a === void 0 ? void 0 : _a.effectiveType,\n    };\n}\n//# sourceMappingURL=connectivity.js.map","import { arrayFrom } from './polyfills';\nexport function removeDuplicates(array) {\n    var set = new Set();\n    array.forEach(function (item) { return set.add(item); });\n    return arrayFrom(set);\n}\nexport function removeItem(array, item) {\n    var index = array.indexOf(item);\n    if (index >= 0) {\n        array.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrayUtils.js.map","import { removeItem } from './utils/arrayUtils';\nvar BUFFER_LIMIT = 500;\nexport function createBoundedBuffer() {\n    var buffer = [];\n    var add = function (callback) {\n        var length = buffer.push(callback);\n        if (length > BUFFER_LIMIT) {\n            buffer.splice(0, 1);\n        }\n    };\n    var remove = function (callback) {\n        removeItem(buffer, callback);\n    };\n    var drain = function (arg) {\n        buffer.forEach(function (callback) { return callback(arg); });\n        buffer.length = 0;\n    };\n    return {\n        add: add,\n        remove: remove,\n        drain: drain,\n    };\n}\n//# sourceMappingURL=boundedBuffer.js.map","export var TelemetryType = {\n    log: 'log',\n    configuration: 'configuration',\n    usage: 'usage',\n};\n//# sourceMappingURL=rawTelemetryEvent.types.js.map","import { ConsoleApiName } from '../../tools/display';\nimport { NO_ERROR_STACK_PRESENT_MESSAGE } from '../error/error';\nimport { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { getExperimentalFeatures } from '../../tools/experimentalFeatures';\nimport { INTAKE_SITE_STAGING, INTAKE_SITE_US1_FED } from '../configuration';\nimport { Observable } from '../../tools/observable';\nimport { timeStampNow } from '../../tools/utils/timeUtils';\nimport { displayIfDebugEnabled, startMonitorErrorCollection } from '../../tools/monitor';\nimport { sendToExtension } from '../../tools/sendToExtension';\nimport { startsWith, arrayFrom, includes, assign } from '../../tools/utils/polyfills';\nimport { performDraw } from '../../tools/utils/numberUtils';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { combine } from '../../tools/mergeInto';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { getConnectivity } from '../connectivity';\nimport { createBoundedBuffer } from '../../tools/boundedBuffer';\nimport { TelemetryType } from './rawTelemetryEvent.types';\nvar ALLOWED_FRAME_URLS = [\n    'https://www.datadoghq-browser-agent.com',\n    'https://www.datad0g-browser-agent.com',\n    'https://d3uc069fcn7uxw.cloudfront.net',\n    'https://d20xtzwzcl0ceb.cloudfront.net',\n    'http://localhost',\n    '<anonymous>',\n];\nvar TELEMETRY_EXCLUDED_SITES = [INTAKE_SITE_US1_FED];\n// eslint-disable-next-line local-rules/disallow-side-effects\nvar preStartTelemetryBuffer = createBoundedBuffer();\nvar onRawTelemetryEventCollected = function (event) {\n    preStartTelemetryBuffer.add(function () { return onRawTelemetryEventCollected(event); });\n};\nexport function startTelemetry(telemetryService, configuration) {\n    var _a;\n    var contextProvider;\n    var observable = new Observable();\n    var alreadySentEvents = new Set();\n    var telemetryEnabled = !includes(TELEMETRY_EXCLUDED_SITES, configuration.site) && performDraw(configuration.telemetrySampleRate);\n    var telemetryEnabledPerType = (_a = {},\n        _a[TelemetryType.log] = telemetryEnabled,\n        _a[TelemetryType.configuration] = telemetryEnabled && performDraw(configuration.telemetryConfigurationSampleRate),\n        _a[TelemetryType.usage] = telemetryEnabled && performDraw(configuration.telemetryUsageSampleRate),\n        _a);\n    var runtimeEnvInfo = getRuntimeEnvInfo();\n    onRawTelemetryEventCollected = function (rawEvent) {\n        var stringifiedEvent = jsonStringify(rawEvent);\n        if (telemetryEnabledPerType[rawEvent.type] &&\n            alreadySentEvents.size < configuration.maxTelemetryEventsPerPage &&\n            !alreadySentEvents.has(stringifiedEvent)) {\n            var event_1 = toTelemetryEvent(telemetryService, rawEvent, runtimeEnvInfo);\n            observable.notify(event_1);\n            sendToExtension('telemetry', event_1);\n            alreadySentEvents.add(stringifiedEvent);\n        }\n    };\n    startMonitorErrorCollection(addTelemetryError);\n    function toTelemetryEvent(telemetryService, event, runtimeEnvInfo) {\n        return combine({\n            type: 'telemetry',\n            date: timeStampNow(),\n            service: telemetryService,\n            version: \"5.28.1\",\n            source: 'browser',\n            _dd: {\n                format_version: 2,\n            },\n            telemetry: combine(event, {\n                runtime_env: runtimeEnvInfo,\n                connectivity: getConnectivity(),\n                sdk_setup: \"npm\",\n            }),\n            experimental_features: arrayFrom(getExperimentalFeatures()),\n        }, contextProvider !== undefined ? contextProvider() : {});\n    }\n    return {\n        setContextProvider: function (provider) {\n            contextProvider = provider;\n        },\n        observable: observable,\n        enabled: telemetryEnabled,\n    };\n}\nfunction getRuntimeEnvInfo() {\n    return {\n        is_local_file: window.location.protocol === 'file:',\n        is_worker: 'WorkerGlobalScope' in self,\n    };\n}\nexport function startFakeTelemetry() {\n    var events = [];\n    onRawTelemetryEventCollected = function (event) {\n        events.push(event);\n    };\n    return events;\n}\n// need to be called after telemetry context is provided and observers are registered\nexport function drainPreStartTelemetry() {\n    preStartTelemetryBuffer.drain();\n}\nexport function resetTelemetry() {\n    preStartTelemetryBuffer = createBoundedBuffer();\n    onRawTelemetryEventCollected = function (event) {\n        preStartTelemetryBuffer.add(function () { return onRawTelemetryEventCollected(event); });\n    };\n}\n/**\n * Avoid mixing telemetry events from different data centers\n * but keep replicating staging events for reliability\n */\nexport function isTelemetryReplicationAllowed(configuration) {\n    return configuration.site === INTAKE_SITE_STAGING;\n}\nexport function addTelemetryDebug(message, context) {\n    displayIfDebugEnabled(ConsoleApiName.debug, message, context);\n    onRawTelemetryEventCollected(assign({\n        type: TelemetryType.log,\n        message: message,\n        status: \"debug\" /* StatusType.debug */,\n    }, context));\n}\nexport function addTelemetryError(e, context) {\n    onRawTelemetryEventCollected(assign({\n        type: TelemetryType.log,\n        status: \"error\" /* StatusType.error */,\n    }, formatError(e), context));\n}\nexport function addTelemetryConfiguration(configuration) {\n    onRawTelemetryEventCollected({\n        type: TelemetryType.configuration,\n        configuration: configuration,\n    });\n}\nexport function addTelemetryUsage(usage) {\n    onRawTelemetryEventCollected({\n        type: TelemetryType.usage,\n        usage: usage,\n    });\n}\nexport function formatError(e) {\n    if (e instanceof Error) {\n        var stackTrace = computeStackTrace(e);\n        return {\n            error: {\n                kind: stackTrace.name,\n                stack: toStackTraceString(scrubCustomerFrames(stackTrace)),\n            },\n            message: stackTrace.message,\n        };\n    }\n    return {\n        error: {\n            stack: NO_ERROR_STACK_PRESENT_MESSAGE,\n        },\n        message: \"\".concat(\"Uncaught\" /* NonErrorPrefix.UNCAUGHT */, \" \").concat(jsonStringify(e)),\n    };\n}\nexport function scrubCustomerFrames(stackTrace) {\n    stackTrace.stack = stackTrace.stack.filter(function (frame) { return !frame.url || ALLOWED_FRAME_URLS.some(function (allowedFrameUrl) { return startsWith(frame.url, allowedFrameUrl); }); });\n    return stackTrace;\n}\n//# sourceMappingURL=telemetry.js.map","import { display } from '../../tools/display';\nimport { getType } from '../../tools/utils/typeUtils';\nimport { assign } from '../../tools/utils/polyfills';\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n * https://docs.datadoghq.com/logs/log_configuration/attributes_naming_convention/#user-related-attributes\n */\nexport function sanitizeUser(newUser) {\n    // We shallow clone only to prevent mutation of user data.\n    var user = assign({}, newUser);\n    var keys = ['id', 'name', 'email'];\n    keys.forEach(function (key) {\n        if (key in user) {\n            user[key] = String(user[key]);\n        }\n    });\n    return user;\n}\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n    var isValid = getType(newUser) === 'object';\n    if (!isValid) {\n        display.error('Unsupported user:', newUser);\n    }\n    return isValid;\n}\n//# sourceMappingURL=user.js.map","import { display } from '../tools/display';\nexport function displayAlreadyInitializedError(sdkName, initConfiguration) {\n    if (!initConfiguration.silentMultipleInit) {\n        display.error(\"\".concat(sdkName, \" is already initialized.\"));\n    }\n}\n//# sourceMappingURL=displayAlreadyInitializedError.js.map","export var ErrorSource = {\n    AGENT: 'agent',\n    CONSOLE: 'console',\n    CUSTOM: 'custom',\n    LOGGER: 'logger',\n    NETWORK: 'network',\n    SOURCE: 'source',\n    REPORT: 'report',\n};\n//# sourceMappingURL=error.types.js.map","var _a;\nimport { includes } from '@datadog/browser-core';\nexport function isAuthorized(status, handlerType, logger) {\n    var loggerHandler = logger.getHandler();\n    var sanitizedHandlerType = Array.isArray(loggerHandler) ? loggerHandler : [loggerHandler];\n    return (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[logger.getLevel()] && includes(sanitizedHandlerType, handlerType));\n}\nexport var StatusType = {\n    ok: 'ok',\n    debug: 'debug',\n    info: 'info',\n    notice: 'notice',\n    warn: 'warn',\n    error: 'error',\n    critical: 'critical',\n    alert: 'alert',\n    emerg: 'emerg',\n};\nexport var STATUS_PRIORITIES = (_a = {},\n    _a[StatusType.ok] = 0,\n    _a[StatusType.debug] = 1,\n    _a[StatusType.info] = 2,\n    _a[StatusType.notice] = 4,\n    _a[StatusType.warn] = 5,\n    _a[StatusType.error] = 6,\n    _a[StatusType.critical] = 7,\n    _a[StatusType.alert] = 8,\n    _a[StatusType.emerg] = 9,\n    _a);\n//# sourceMappingURL=isAuthorized.js.map","export function createErrorFieldFromRawError(rawError, _a) {\n    var _b = _a === void 0 ? {} : _a, \n    /**\n     * Set this to `true` to include the error message in the error field. In most cases, the error\n     * message is already included in the log message, so we don't need to include it again.\n     */\n    _c = _b.includeMessage, \n    /**\n     * Set this to `true` to include the error message in the error field. In most cases, the error\n     * message is already included in the log message, so we don't need to include it again.\n     */\n    includeMessage = _c === void 0 ? false : _c;\n    return {\n        stack: rawError.stack,\n        kind: rawError.type,\n        message: includeMessage ? rawError.message : undefined,\n        causes: rawError.causes,\n        fingerprint: rawError.fingerprint,\n        handling: rawError.handling,\n    };\n}\n//# sourceMappingURL=createErrorFieldFromRawError.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { clocksNow, computeRawError, computeStackTrace, combine, createContextManager, ErrorSource, monitored, sanitize, createHandlingStack, } from '@datadog/browser-core';\nimport { isAuthorized, StatusType } from './logger/isAuthorized';\nimport { createErrorFieldFromRawError } from './createErrorFieldFromRawError';\nexport var HandlerType = {\n    console: 'console',\n    http: 'http',\n    silent: 'silent',\n};\nexport var STATUSES = Object.keys(StatusType);\n// note: it is safe to merge declarations as long as the methods are actually defined on the prototype\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging, no-restricted-syntax\nvar Logger = /** @class */ (function () {\n    function Logger(handleLogStrategy, customerDataTracker, name, handlerType, level, loggerContext) {\n        if (handlerType === void 0) { handlerType = HandlerType.http; }\n        if (level === void 0) { level = StatusType.debug; }\n        if (loggerContext === void 0) { loggerContext = {}; }\n        this.handleLogStrategy = handleLogStrategy;\n        this.handlerType = handlerType;\n        this.level = level;\n        this.contextManager = createContextManager(customerDataTracker);\n        this.contextManager.setContext(loggerContext);\n        if (name) {\n            this.contextManager.setContextProperty('logger', { name: name });\n        }\n    }\n    Logger.prototype.logImplementation = function (message, messageContext, status, error, handlingStack) {\n        if (status === void 0) { status = StatusType.info; }\n        var sanitizedMessageContext = sanitize(messageContext);\n        var context;\n        if (error !== undefined && error !== null) {\n            var rawError = computeRawError({\n                stackTrace: error instanceof Error ? computeStackTrace(error) : undefined,\n                originalError: error,\n                nonErrorPrefix: \"Provided\" /* NonErrorPrefix.PROVIDED */,\n                source: ErrorSource.LOGGER,\n                handling: \"handled\" /* ErrorHandling.HANDLED */,\n                startClocks: clocksNow(),\n            });\n            context = combine({\n                error: createErrorFieldFromRawError(rawError, { includeMessage: true }),\n            }, sanitizedMessageContext);\n        }\n        else {\n            context = sanitizedMessageContext;\n        }\n        this.handleLogStrategy({\n            message: sanitize(message),\n            context: context,\n            status: status,\n        }, this, handlingStack);\n    };\n    Logger.prototype.log = function (message, messageContext, status, error) {\n        if (status === void 0) { status = StatusType.info; }\n        var handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack();\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    };\n    Logger.prototype.setContext = function (context) {\n        this.contextManager.setContext(context);\n    };\n    Logger.prototype.getContext = function () {\n        return this.contextManager.getContext();\n    };\n    Logger.prototype.setContextProperty = function (key, value) {\n        this.contextManager.setContextProperty(key, value);\n    };\n    Logger.prototype.removeContextProperty = function (key) {\n        this.contextManager.removeContextProperty(key);\n    };\n    Logger.prototype.clearContext = function () {\n        this.contextManager.clearContext();\n    };\n    Logger.prototype.setHandler = function (handler) {\n        this.handlerType = handler;\n    };\n    Logger.prototype.getHandler = function () {\n        return this.handlerType;\n    };\n    Logger.prototype.setLevel = function (level) {\n        this.level = level;\n    };\n    Logger.prototype.getLevel = function () {\n        return this.level;\n    };\n    __decorate([\n        monitored\n    ], Logger.prototype, \"logImplementation\", null);\n    return Logger;\n}());\nexport { Logger };\n/* eslint-disable local-rules/disallow-side-effects */\nLogger.prototype.ok = createLoggerMethod(StatusType.ok);\nLogger.prototype.debug = createLoggerMethod(StatusType.debug);\nLogger.prototype.info = createLoggerMethod(StatusType.info);\nLogger.prototype.notice = createLoggerMethod(StatusType.notice);\nLogger.prototype.warn = createLoggerMethod(StatusType.warn);\nLogger.prototype.error = createLoggerMethod(StatusType.error);\nLogger.prototype.critical = createLoggerMethod(StatusType.critical);\nLogger.prototype.alert = createLoggerMethod(StatusType.alert);\nLogger.prototype.emerg = createLoggerMethod(StatusType.emerg);\nfunction createLoggerMethod(status) {\n    return function (message, messageContext, error) {\n        var handlingStack;\n        if (isAuthorized(status, HandlerType.http, this)) {\n            handlingStack = createHandlingStack();\n        }\n        this.logImplementation(message, messageContext, status, error, handlingStack);\n    };\n}\n//# sourceMappingURL=logger.js.map","import { endsWith, includes } from '../tools/utils/polyfills';\nimport { getGlobalObject } from '../tools/getGlobalObject';\nexport function getEventBridge() {\n    var eventBridgeGlobal = getEventBridgeGlobal();\n    if (!eventBridgeGlobal) {\n        return;\n    }\n    return {\n        getCapabilities: function () {\n            var _a;\n            return JSON.parse(((_a = eventBridgeGlobal.getCapabilities) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal)) || '[]');\n        },\n        getPrivacyLevel: function () {\n            var _a;\n            return (_a = eventBridgeGlobal.getPrivacyLevel) === null || _a === void 0 ? void 0 : _a.call(eventBridgeGlobal);\n        },\n        getAllowedWebViewHosts: function () {\n            return JSON.parse(eventBridgeGlobal.getAllowedWebViewHosts());\n        },\n        send: function (eventType, event, viewId) {\n            var view = viewId ? { id: viewId } : undefined;\n            eventBridgeGlobal.send(JSON.stringify({ eventType: eventType, event: event, view: view }));\n        },\n    };\n}\nexport function bridgeSupports(capability) {\n    var bridge = getEventBridge();\n    return !!bridge && includes(bridge.getCapabilities(), capability);\n}\nexport function canUseEventBridge(currentHost) {\n    var _a;\n    if (currentHost === void 0) { currentHost = (_a = getGlobalObject().location) === null || _a === void 0 ? void 0 : _a.hostname; }\n    var bridge = getEventBridge();\n    return (!!bridge &&\n        bridge\n            .getAllowedWebViewHosts()\n            .some(function (allowedHost) { return currentHost === allowedHost || endsWith(currentHost, \".\".concat(allowedHost)); }));\n}\nfunction getEventBridgeGlobal() {\n    return getGlobalObject().DatadogEventBridge;\n}\n//# sourceMappingURL=eventBridge.js.map","import { setTimeout } from './timer';\nimport { callMonitored } from './monitor';\nimport { noop } from './utils/functionUtils';\nimport { arrayFrom, startsWith } from './utils/polyfills';\nimport { createHandlingStack } from './stackTrace/handlingStack';\n/**\n * Instruments a method on a object, calling the given callback before the original method is\n * invoked. The callback receives an object with information about the method call.\n *\n * This function makes sure that we are \"good citizens\" regarding third party instrumentations: when\n * removing the instrumentation, the original method is usually restored, but if a third party\n * instrumentation was set after ours, we keep it in place and just replace our instrumentation with\n * a noop.\n *\n * Note: it is generally better to instrument methods that are \"owned\" by the object instead of ones\n * that are inherited from the prototype chain. Example:\n * * do:    `instrumentMethod(Array.prototype, 'push', ...)`\n * * don't: `instrumentMethod([], 'push', ...)`\n *\n * This method is also used to set event handler properties (ex: window.onerror = ...), as it has\n * the same requirements as instrumenting a method:\n * * if the event handler is already set by a third party, we need to call it and not just blindly\n * override it.\n * * if the event handler is set by a third party after us, we need to keep it in place when\n * removing ours.\n *\n * @example\n *\n *  instrumentMethod(window, 'fetch', ({ target, parameters, onPostCall }) => {\n *    console.log('Before calling fetch on', target, 'with parameters', parameters)\n *\n *    onPostCall((result) => {\n *      console.log('After fetch calling on', target, 'with parameters', parameters, 'and result', result)\n *    })\n *  })\n */\nexport function instrumentMethod(targetPrototype, method, onPreCall, _a) {\n    var _b = _a === void 0 ? {} : _a, computeHandlingStack = _b.computeHandlingStack;\n    var original = targetPrototype[method];\n    if (typeof original !== 'function') {\n        if (method in targetPrototype && startsWith(method, 'on')) {\n            original = noop;\n        }\n        else {\n            return { stop: noop };\n        }\n    }\n    var stopped = false;\n    var instrumentation = function () {\n        if (stopped) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n            return original.apply(this, arguments);\n        }\n        var parameters = arrayFrom(arguments);\n        var postCallCallback;\n        callMonitored(onPreCall, null, [\n            {\n                target: this,\n                parameters: parameters,\n                onPostCall: function (callback) {\n                    postCallCallback = callback;\n                },\n                handlingStack: computeHandlingStack ? createHandlingStack() : undefined,\n            },\n        ]);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        var result = original.apply(this, parameters);\n        if (postCallCallback) {\n            callMonitored(postCallCallback, null, [result]);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return result;\n    };\n    targetPrototype[method] = instrumentation;\n    return {\n        stop: function () {\n            stopped = true;\n            // If the instrumentation has been removed by a third party, keep the last one\n            if (targetPrototype[method] === instrumentation) {\n                targetPrototype[method] = original;\n            }\n        },\n    };\n}\nexport function instrumentSetter(targetPrototype, property, after) {\n    var originalDescriptor = Object.getOwnPropertyDescriptor(targetPrototype, property);\n    if (!originalDescriptor || !originalDescriptor.set || !originalDescriptor.configurable) {\n        return { stop: noop };\n    }\n    var stoppedInstrumentation = noop;\n    var instrumentation = function (target, value) {\n        // put hooked setter into event loop to avoid of set latency\n        setTimeout(function () {\n            if (instrumentation !== stoppedInstrumentation) {\n                after(target, value);\n            }\n        }, 0);\n    };\n    var instrumentationWrapper = function (value) {\n        originalDescriptor.set.call(this, value);\n        instrumentation(this, value);\n    };\n    Object.defineProperty(targetPrototype, property, {\n        set: instrumentationWrapper,\n    });\n    return {\n        stop: function () {\n            var _a;\n            if (((_a = Object.getOwnPropertyDescriptor(targetPrototype, property)) === null || _a === void 0 ? void 0 : _a.set) === instrumentationWrapper) {\n                Object.defineProperty(targetPrototype, property, originalDescriptor);\n            }\n            instrumentation = stoppedInstrumentation;\n        },\n    };\n}\n//# sourceMappingURL=instrumentMethod.js.map","import { jsonStringify } from '../serialisation/jsonStringify';\nexport function normalizeUrl(url) {\n    return buildUrl(url, location.href).href;\n}\nexport function isValidUrl(url) {\n    try {\n        return !!buildUrl(url);\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function getPathName(url) {\n    var pathname = buildUrl(url).pathname;\n    return pathname[0] === '/' ? pathname : \"/\".concat(pathname);\n}\nexport function buildUrl(url, base) {\n    var supportedURL = getSupportedUrl();\n    if (supportedURL) {\n        try {\n            return base !== undefined ? new supportedURL(url, base) : new supportedURL(url);\n        }\n        catch (error) {\n            throw new Error(\"Failed to construct URL: \".concat(String(error), \" \").concat(jsonStringify({ url: url, base: base })));\n        }\n    }\n    if (base === undefined && !/:/.test(url)) {\n        throw new Error(\"Invalid URL: '\".concat(url, \"'\"));\n    }\n    var doc = document;\n    var anchorElement = doc.createElement('a');\n    if (base !== undefined) {\n        doc = document.implementation.createHTMLDocument('');\n        var baseElement = doc.createElement('base');\n        baseElement.href = base;\n        doc.head.appendChild(baseElement);\n        doc.body.appendChild(anchorElement);\n    }\n    anchorElement.href = url;\n    return anchorElement;\n}\nvar originalURL = URL;\nvar isURLSupported;\nfunction getSupportedUrl() {\n    if (isURLSupported === undefined) {\n        try {\n            var url = new originalURL('http://test/path');\n            isURLSupported = url.href === 'http://test/path';\n        }\n        catch (_a) {\n            isURLSupported = false;\n        }\n    }\n    return isURLSupported ? originalURL : undefined;\n}\n//# sourceMappingURL=urlPolyfill.js.map","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { monitor } from '../tools/monitor';\nimport { Observable } from '../tools/observable';\nimport { assign } from '../tools/utils/polyfills';\nimport { clocksNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nvar fetchObservable;\nexport function initFetchObservable() {\n    if (!fetchObservable) {\n        fetchObservable = createFetchObservable();\n    }\n    return fetchObservable;\n}\nexport function resetFetchObservable() {\n    fetchObservable = undefined;\n}\nfunction createFetchObservable() {\n    return new Observable(function (observable) {\n        if (!window.fetch) {\n            return;\n        }\n        var stop = instrumentMethod(window, 'fetch', function (call) { return beforeSend(call, observable); }, {\n            computeHandlingStack: true,\n        }).stop;\n        return stop;\n    });\n}\nfunction beforeSend(_a, observable) {\n    var parameters = _a.parameters, onPostCall = _a.onPostCall, handlingStack = _a.handlingStack;\n    var input = parameters[0], init = parameters[1];\n    var methodFromParams = init && init.method;\n    if (methodFromParams === undefined && input instanceof Request) {\n        methodFromParams = input.method;\n    }\n    var method = methodFromParams !== undefined ? String(methodFromParams).toUpperCase() : 'GET';\n    var url = input instanceof Request ? input.url : normalizeUrl(String(input));\n    var startClocks = clocksNow();\n    var context = {\n        state: 'start',\n        init: init,\n        input: input,\n        method: method,\n        startClocks: startClocks,\n        url: url,\n        handlingStack: handlingStack,\n    };\n    observable.notify(context);\n    // Those properties can be changed by observable subscribers\n    parameters[0] = context.input;\n    parameters[1] = context.init;\n    onPostCall(function (responsePromise) { return afterSend(observable, responsePromise, context); });\n}\nfunction afterSend(observable, responsePromise, startContext) {\n    var context = startContext;\n    function reportFetch(partialContext) {\n        context.state = 'resolve';\n        assign(context, partialContext);\n        observable.notify(context);\n    }\n    responsePromise.then(monitor(function (response) {\n        reportFetch({\n            response: response,\n            responseType: response.type,\n            status: response.status,\n            isAborted: false,\n        });\n    }), monitor(function (error) {\n        var _a, _b;\n        reportFetch({\n            status: 0,\n            isAborted: ((_b = (_a = context.init) === null || _a === void 0 ? void 0 : _a.signal) === null || _b === void 0 ? void 0 : _b.aborted) || (error instanceof DOMException && error.code === DOMException.ABORT_ERR),\n            error: error,\n        });\n    }));\n}\n//# sourceMappingURL=fetchObservable.js.map","/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function generateUUID(placeholder) {\n    return placeholder\n        ? // eslint-disable-next-line  no-bitwise\n            (parseInt(placeholder, 10) ^ ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))).toString(16)\n        : \"\".concat(1e7, \"-\").concat(1e3, \"-\").concat(4e3, \"-\").concat(8e3, \"-\").concat(1e11).replace(/[018]/g, generateUUID);\n}\nvar COMMA_SEPARATED_KEY_VALUE = /([\\w-]+)\\s*=\\s*([^;]+)/g;\nexport function findCommaSeparatedValue(rawString, name) {\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            if (match[1] === name) {\n                return match[2];\n            }\n        }\n        else {\n            break;\n        }\n    }\n}\nexport function findCommaSeparatedValues(rawString) {\n    var result = new Map();\n    COMMA_SEPARATED_KEY_VALUE.lastIndex = 0;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString);\n        if (match) {\n            result.set(match[1], match[2]);\n        }\n        else {\n            break;\n        }\n    }\n    return result;\n}\nexport function safeTruncate(candidate, length, suffix) {\n    if (suffix === void 0) { suffix = ''; }\n    var lastChar = candidate.charCodeAt(length - 1);\n    var isLastCharSurrogatePair = lastChar >= 0xd800 && lastChar <= 0xdbff;\n    var correctedLength = isLastCharSurrogatePair ? length + 1 : length;\n    if (candidate.length <= correctedLength) {\n        return candidate;\n    }\n    return \"\".concat(candidate.slice(0, correctedLength)).concat(suffix);\n}\n//# sourceMappingURL=stringUtils.js.map","export function isIE() {\n    return detectBrowserCached() === 0 /* Browser.IE */;\n}\nexport function isChromium() {\n    return detectBrowserCached() === 1 /* Browser.CHROMIUM */;\n}\nexport function isSafari() {\n    return detectBrowserCached() === 2 /* Browser.SAFARI */;\n}\nvar browserCache;\nfunction detectBrowserCached() {\n    return browserCache !== null && browserCache !== void 0 ? browserCache : (browserCache = detectBrowser());\n}\n// Exported only for tests\nexport function detectBrowser(browserWindow) {\n    var _a;\n    if (browserWindow === void 0) { browserWindow = window; }\n    var userAgent = browserWindow.navigator.userAgent;\n    if (browserWindow.chrome || /HeadlessChrome/.test(userAgent)) {\n        return 1 /* Browser.CHROMIUM */;\n    }\n    if (\n    // navigator.vendor is deprecated, but it is the most resilient way we found to detect\n    // \"Apple maintained browsers\" (AKA Safari). If one day it gets removed, we still have the\n    // useragent test as a semi-working fallback.\n    ((_a = browserWindow.navigator.vendor) === null || _a === void 0 ? void 0 : _a.indexOf('Apple')) === 0 ||\n        (/safari/i.test(userAgent) && !/chrome|android/i.test(userAgent))) {\n        return 2 /* Browser.SAFARI */;\n    }\n    if (browserWindow.document.documentMode) {\n        return 0 /* Browser.IE */;\n    }\n    return 3 /* Browser.OTHER */;\n}\n//# sourceMappingURL=browserDetection.js.map","import { display } from '../tools/display';\nimport { ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { findCommaSeparatedValue, findCommaSeparatedValues, generateUUID } from '../tools/utils/stringUtils';\nexport function setCookie(name, value, expireDelay, options) {\n    var date = new Date();\n    date.setTime(date.getTime() + expireDelay);\n    var expires = \"expires=\".concat(date.toUTCString());\n    var sameSite = options && options.crossSite ? 'none' : 'strict';\n    var domain = options && options.domain ? \";domain=\".concat(options.domain) : '';\n    var secure = options && options.secure ? ';secure' : '';\n    var partitioned = options && options.partitioned ? ';partitioned' : '';\n    document.cookie = \"\".concat(name, \"=\").concat(value, \";\").concat(expires, \";path=/;samesite=\").concat(sameSite).concat(domain).concat(secure).concat(partitioned);\n}\nexport function getCookie(name) {\n    return findCommaSeparatedValue(document.cookie, name);\n}\nvar initCookieParsed;\n/**\n * Returns a cached value of the cookie. Use this during SDK initialization (and whenever possible)\n * to avoid accessing document.cookie multiple times.\n */\nexport function getInitCookie(name) {\n    if (!initCookieParsed) {\n        initCookieParsed = findCommaSeparatedValues(document.cookie);\n    }\n    return initCookieParsed.get(name);\n}\nexport function resetInitCookies() {\n    initCookieParsed = undefined;\n}\nexport function deleteCookie(name, options) {\n    setCookie(name, '', 0, options);\n}\nexport function areCookiesAuthorized(options) {\n    if (document.cookie === undefined || document.cookie === null) {\n        return false;\n    }\n    try {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_cookie_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        setCookie(testCookieName, testCookieValue, ONE_MINUTE, options);\n        var isCookieCorrectlySet = getCookie(testCookieName) === testCookieValue;\n        deleteCookie(testCookieName, options);\n        return isCookieCorrectlySet;\n    }\n    catch (error) {\n        display.error(error);\n        return false;\n    }\n}\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache;\nexport function getCurrentSite() {\n    if (getCurrentSiteCache === undefined) {\n        // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n        // the test cookie lifetime\n        var testCookieName = \"dd_site_test_\".concat(generateUUID());\n        var testCookieValue = 'test';\n        var domainLevels = window.location.hostname.split('.');\n        var candidateDomain = domainLevels.pop();\n        while (domainLevels.length && !getCookie(testCookieName)) {\n            candidateDomain = \"\".concat(domainLevels.pop(), \".\").concat(candidateDomain);\n            setCookie(testCookieName, testCookieValue, ONE_SECOND, { domain: candidateDomain });\n        }\n        deleteCookie(testCookieName, { domain: candidateDomain });\n        getCurrentSiteCache = candidateDomain;\n    }\n    return getCurrentSiteCache;\n}\n//# sourceMappingURL=cookie.js.map","export var SESSION_STORE_KEY = '_dd_s';\n//# sourceMappingURL=sessionStoreStrategy.js.map","import { ONE_HOUR, ONE_MINUTE } from '../../tools/utils/timeUtils';\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR;\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE;\n//# sourceMappingURL=sessionConstants.js.map","import { isEmptyObject } from '../../tools/utils/objectUtils';\nimport { objectEntries } from '../../tools/utils/polyfills';\nimport { dateNow } from '../../tools/utils/timeUtils';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from './sessionConstants';\nvar SESSION_ENTRY_REGEXP = /^([a-zA-Z]+)=([a-z0-9-]+)$/;\nvar SESSION_ENTRY_SEPARATOR = '&';\nexport var EXPIRED = '1';\nexport function getExpiredSessionState() {\n    return {\n        isExpired: EXPIRED,\n    };\n}\nexport function isSessionInNotStartedState(session) {\n    return isEmptyObject(session);\n}\nexport function isSessionStarted(session) {\n    return !isSessionInNotStartedState(session);\n}\nexport function isSessionInExpiredState(session) {\n    return session.isExpired !== undefined || !isActiveSession(session);\n}\n// An active session is a session in either `Tracked` or `NotTracked` state\nfunction isActiveSession(sessionState) {\n    // created and expire can be undefined for versions which was not storing them\n    // these checks could be removed when older versions will not be available/live anymore\n    return ((sessionState.created === undefined || dateNow() - Number(sessionState.created) < SESSION_TIME_OUT_DELAY) &&\n        (sessionState.expire === undefined || dateNow() < Number(sessionState.expire)));\n}\nexport function expandSessionState(session) {\n    session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY);\n}\nexport function toSessionString(session) {\n    return objectEntries(session)\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return \"\".concat(key, \"=\").concat(value);\n    })\n        .join(SESSION_ENTRY_SEPARATOR);\n}\nexport function toSessionState(sessionString) {\n    var session = {};\n    if (isValidSessionString(sessionString)) {\n        sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n            var matches = SESSION_ENTRY_REGEXP.exec(entry);\n            if (matches !== null) {\n                var key = matches[1], value = matches[2];\n                session[key] = value;\n            }\n        });\n    }\n    return session;\n}\nfunction isValidSessionString(sessionString) {\n    return (!!sessionString &&\n        (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 || SESSION_ENTRY_REGEXP.test(sessionString)));\n}\n//# sourceMappingURL=sessionState.js.map","import { getInitCookie } from '../../browser/cookie';\nimport { SESSION_STORE_KEY } from './storeStrategies/sessionStoreStrategy';\nimport { expandSessionState, isSessionStarted } from './sessionState';\nexport var OLD_SESSION_COOKIE_NAME = '_dd';\nexport var OLD_RUM_COOKIE_NAME = '_dd_r';\nexport var OLD_LOGS_COOKIE_NAME = '_dd_l';\n// duplicate values to avoid dependency issues\nexport var RUM_SESSION_KEY = 'rum';\nexport var LOGS_SESSION_KEY = 'logs';\n/**\n * This migration should remain in the codebase as long as older versions are available/live\n * to allow older sdk versions to be upgraded to newer versions without compatibility issues.\n */\nexport function tryOldCookiesMigration(cookieStoreStrategy) {\n    var sessionString = getInitCookie(SESSION_STORE_KEY);\n    if (!sessionString) {\n        var oldSessionId = getInitCookie(OLD_SESSION_COOKIE_NAME);\n        var oldRumType = getInitCookie(OLD_RUM_COOKIE_NAME);\n        var oldLogsType = getInitCookie(OLD_LOGS_COOKIE_NAME);\n        var session = {};\n        if (oldSessionId) {\n            session.id = oldSessionId;\n        }\n        if (oldLogsType && /^[01]$/.test(oldLogsType)) {\n            session[LOGS_SESSION_KEY] = oldLogsType;\n        }\n        if (oldRumType && /^[012]$/.test(oldRumType)) {\n            session[RUM_SESSION_KEY] = oldRumType;\n        }\n        if (isSessionStarted(session)) {\n            expandSessionState(session);\n            cookieStoreStrategy.persistSession(session);\n        }\n    }\n}\n//# sourceMappingURL=oldCookiesMigration.js.map","import { isChromium } from '../../../tools/utils/browserDetection';\nimport { getCurrentSite, areCookiesAuthorized, getCookie, setCookie } from '../../../browser/cookie';\nimport { tryOldCookiesMigration } from '../oldCookiesMigration';\nimport { SESSION_EXPIRATION_DELAY, SESSION_TIME_OUT_DELAY } from '../sessionConstants';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nexport function selectCookieStrategy(initConfiguration) {\n    var cookieOptions = buildCookieOptions(initConfiguration);\n    return areCookiesAuthorized(cookieOptions) ? { type: 'Cookie', cookieOptions: cookieOptions } : undefined;\n}\nexport function initCookieStrategy(cookieOptions) {\n    var cookieStore = {\n        /**\n         * Lock strategy allows mitigating issues due to concurrent access to cookie.\n         * This issue concerns only chromium browsers and enabling this on firefox increases cookie write failures.\n         */\n        isLockEnabled: isChromium(),\n        persistSession: persistSessionCookie(cookieOptions),\n        retrieveSession: retrieveSessionCookie,\n        expireSession: function () { return expireSessionCookie(cookieOptions); },\n    };\n    tryOldCookiesMigration(cookieStore);\n    return cookieStore;\n}\nfunction persistSessionCookie(options) {\n    return function (session) {\n        setCookie(SESSION_STORE_KEY, toSessionString(session), SESSION_EXPIRATION_DELAY, options);\n    };\n}\nfunction expireSessionCookie(options) {\n    setCookie(SESSION_STORE_KEY, toSessionString(getExpiredSessionState()), SESSION_TIME_OUT_DELAY, options);\n}\nfunction retrieveSessionCookie() {\n    var sessionString = getCookie(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nexport function buildCookieOptions(initConfiguration) {\n    var cookieOptions = {};\n    cookieOptions.secure =\n        !!initConfiguration.useSecureSessionCookie ||\n            !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n            !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.crossSite =\n        !!initConfiguration.usePartitionedCrossSiteSessionCookie || !!initConfiguration.useCrossSiteSessionCookie;\n    cookieOptions.partitioned = !!initConfiguration.usePartitionedCrossSiteSessionCookie;\n    if (initConfiguration.trackSessionAcrossSubdomains) {\n        cookieOptions.domain = getCurrentSite();\n    }\n    return cookieOptions;\n}\n//# sourceMappingURL=sessionInCookie.js.map","import { generateUUID } from '../../../tools/utils/stringUtils';\nimport { toSessionString, toSessionState, getExpiredSessionState } from '../sessionState';\nimport { SESSION_STORE_KEY } from './sessionStoreStrategy';\nvar LOCAL_STORAGE_TEST_KEY = '_dd_test_';\nexport function selectLocalStorageStrategy() {\n    try {\n        var id = generateUUID();\n        var testKey = \"\".concat(LOCAL_STORAGE_TEST_KEY).concat(id);\n        localStorage.setItem(testKey, id);\n        var retrievedId = localStorage.getItem(testKey);\n        localStorage.removeItem(testKey);\n        return id === retrievedId ? { type: 'LocalStorage' } : undefined;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\nexport function initLocalStorageStrategy() {\n    return {\n        isLockEnabled: false,\n        persistSession: persistInLocalStorage,\n        retrieveSession: retrieveSessionFromLocalStorage,\n        expireSession: expireSessionFromLocalStorage,\n    };\n}\nfunction persistInLocalStorage(sessionState) {\n    localStorage.setItem(SESSION_STORE_KEY, toSessionString(sessionState));\n}\nfunction retrieveSessionFromLocalStorage() {\n    var sessionString = localStorage.getItem(SESSION_STORE_KEY);\n    return toSessionState(sessionString);\n}\nfunction expireSessionFromLocalStorage() {\n    persistInLocalStorage(getExpiredSessionState());\n}\n//# sourceMappingURL=sessionInLocalStorage.js.map","import { setTimeout } from '../../tools/timer';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { expandSessionState, isSessionInExpiredState } from './sessionState';\nexport var LOCK_RETRY_DELAY = 10;\nexport var LOCK_MAX_TRIES = 100;\nvar bufferedOperations = [];\nvar ongoingOperations;\nexport function processSessionStoreOperations(operations, sessionStoreStrategy, numberOfRetries) {\n    var _a;\n    if (numberOfRetries === void 0) { numberOfRetries = 0; }\n    var isLockEnabled = sessionStoreStrategy.isLockEnabled, persistSession = sessionStoreStrategy.persistSession, expireSession = sessionStoreStrategy.expireSession;\n    var persistWithLock = function (session) { return persistSession(assign({}, session, { lock: currentLock })); };\n    var retrieveStore = function () {\n        var session = sessionStoreStrategy.retrieveSession();\n        var lock = session.lock;\n        if (session.lock) {\n            delete session.lock;\n        }\n        return {\n            session: session,\n            lock: lock,\n        };\n    };\n    if (!ongoingOperations) {\n        ongoingOperations = operations;\n    }\n    if (operations !== ongoingOperations) {\n        bufferedOperations.push(operations);\n        return;\n    }\n    if (isLockEnabled && numberOfRetries >= LOCK_MAX_TRIES) {\n        next(sessionStoreStrategy);\n        return;\n    }\n    var currentLock;\n    var currentStore = retrieveStore();\n    if (isLockEnabled) {\n        // if someone has lock, retry later\n        if (currentStore.lock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n        // acquire lock\n        currentLock = generateUUID();\n        persistWithLock(currentStore.session);\n        // if lock is not acquired, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    var processedSession = operations.process(currentStore.session);\n    if (isLockEnabled) {\n        // if lock corrupted after process, retry later\n        currentStore = retrieveStore();\n        if (currentStore.lock !== currentLock) {\n            retryLater(operations, sessionStoreStrategy, numberOfRetries);\n            return;\n        }\n    }\n    if (processedSession) {\n        if (isSessionInExpiredState(processedSession)) {\n            expireSession();\n        }\n        else {\n            expandSessionState(processedSession);\n            isLockEnabled ? persistWithLock(processedSession) : persistSession(processedSession);\n        }\n    }\n    if (isLockEnabled) {\n        // correctly handle lock around expiration would require to handle this case properly at several levels\n        // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n        if (!(processedSession && isSessionInExpiredState(processedSession))) {\n            // if lock corrupted after persist, retry later\n            currentStore = retrieveStore();\n            if (currentStore.lock !== currentLock) {\n                retryLater(operations, sessionStoreStrategy, numberOfRetries);\n                return;\n            }\n            persistSession(currentStore.session);\n            processedSession = currentStore.session;\n        }\n    }\n    // call after even if session is not persisted in order to perform operations on\n    // up-to-date session state value => the value could have been modified by another tab\n    (_a = operations.after) === null || _a === void 0 ? void 0 : _a.call(operations, processedSession || currentStore.session);\n    next(sessionStoreStrategy);\n}\nfunction retryLater(operations, sessionStore, currentNumberOfRetries) {\n    setTimeout(function () {\n        processSessionStoreOperations(operations, sessionStore, currentNumberOfRetries + 1);\n    }, LOCK_RETRY_DELAY);\n}\nfunction next(sessionStore) {\n    ongoingOperations = undefined;\n    var nextOperations = bufferedOperations.shift();\n    if (nextOperations) {\n        processSessionStoreOperations(nextOperations, sessionStore);\n    }\n}\n//# sourceMappingURL=sessionStoreOperations.js.map","import { clearInterval, setInterval } from '../../tools/timer';\nimport { Observable } from '../../tools/observable';\nimport { ONE_SECOND, dateNow } from '../../tools/utils/timeUtils';\nimport { throttle } from '../../tools/utils/functionUtils';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { selectCookieStrategy, initCookieStrategy } from './storeStrategies/sessionInCookie';\nimport { getExpiredSessionState, isSessionInExpiredState, isSessionInNotStartedState, isSessionStarted, } from './sessionState';\nimport { initLocalStorageStrategy, selectLocalStorageStrategy } from './storeStrategies/sessionInLocalStorage';\nimport { processSessionStoreOperations } from './sessionStoreOperations';\n/**\n * Every second, the storage will be polled to check for any change that can occur\n * to the session state in another browser tab, or another window.\n * This value has been determined from our previous cookie-only implementation.\n */\nexport var STORAGE_POLL_DELAY = ONE_SECOND;\n/**\n * Checks if cookies are available as the preferred storage\n * Else, checks if LocalStorage is allowed and available\n */\nexport function selectSessionStoreStrategyType(initConfiguration) {\n    var sessionStoreStrategyType = selectCookieStrategy(initConfiguration);\n    if (!sessionStoreStrategyType && initConfiguration.allowFallbackToLocalStorage) {\n        sessionStoreStrategyType = selectLocalStorageStrategy();\n    }\n    return sessionStoreStrategyType;\n}\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(sessionStoreStrategyType, productKey, computeSessionState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    var sessionStateUpdateObservable = new Observable();\n    var sessionStoreStrategy = sessionStoreStrategyType.type === 'Cookie'\n        ? initCookieStrategy(sessionStoreStrategyType.cookieOptions)\n        : initLocalStorageStrategy();\n    var expireSession = sessionStoreStrategy.expireSession;\n    var watchSessionTimeoutId = setInterval(watchSession, STORAGE_POLL_DELAY);\n    var sessionCache;\n    startSession();\n    var _a = throttle(function () {\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return;\n                }\n                var synchronizedSession = synchronizeSession(sessionState);\n                expandOrRenewSessionState(synchronizedSession);\n                return synchronizedSession;\n            },\n            after: function (sessionState) {\n                if (isSessionStarted(sessionState) && !hasSessionInCache()) {\n                    renewSessionInCache(sessionState);\n                }\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }, STORAGE_POLL_DELAY), throttledExpandOrRenewSession = _a.throttled, cancelExpandOrRenewSession = _a.cancel;\n    function expandSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (hasSessionInCache() ? synchronizeSession(sessionState) : undefined); },\n        }, sessionStoreStrategy);\n    }\n    /**\n     * allows two behaviors:\n     * - if the session is active, synchronize the session cache without updating the session store\n     * - if the session is not active, clear the session store and expire the session cache\n     */\n    function watchSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) { return (isSessionInExpiredState(sessionState) ? getExpiredSessionState() : undefined); },\n            after: synchronizeSession,\n        }, sessionStoreStrategy);\n    }\n    function synchronizeSession(sessionState) {\n        if (isSessionInExpiredState(sessionState)) {\n            sessionState = getExpiredSessionState();\n        }\n        if (hasSessionInCache()) {\n            if (isSessionInCacheOutdated(sessionState)) {\n                expireSessionInCache();\n            }\n            else {\n                sessionStateUpdateObservable.notify({ previousState: sessionCache, newState: sessionState });\n                sessionCache = sessionState;\n            }\n        }\n        return sessionState;\n    }\n    function startSession() {\n        processSessionStoreOperations({\n            process: function (sessionState) {\n                if (isSessionInNotStartedState(sessionState)) {\n                    return getExpiredSessionState();\n                }\n            },\n            after: function (sessionState) {\n                sessionCache = sessionState;\n            },\n        }, sessionStoreStrategy);\n    }\n    function expandOrRenewSessionState(sessionState) {\n        if (isSessionInNotStartedState(sessionState)) {\n            return false;\n        }\n        var _a = computeSessionState(sessionState[productKey]), trackingType = _a.trackingType, isTracked = _a.isTracked;\n        sessionState[productKey] = trackingType;\n        delete sessionState.isExpired;\n        if (isTracked && !sessionState.id) {\n            sessionState.id = generateUUID();\n            sessionState.created = String(dateNow());\n        }\n    }\n    function hasSessionInCache() {\n        return sessionCache[productKey] !== undefined;\n    }\n    function isSessionInCacheOutdated(sessionState) {\n        return sessionCache.id !== sessionState.id || sessionCache[productKey] !== sessionState[productKey];\n    }\n    function expireSessionInCache() {\n        sessionCache = getExpiredSessionState();\n        expireObservable.notify();\n    }\n    function renewSessionInCache(sessionState) {\n        sessionCache = sessionState;\n        renewObservable.notify();\n    }\n    function updateSessionState(partialSessionState) {\n        processSessionStoreOperations({\n            process: function (sessionState) { return assign({}, sessionState, partialSessionState); },\n            after: synchronizeSession,\n        }, sessionStoreStrategy);\n    }\n    return {\n        expandOrRenewSession: throttledExpandOrRenewSession,\n        expandSession: expandSession,\n        getSession: function () { return sessionCache; },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        sessionStateUpdateObservable: sessionStateUpdateObservable,\n        restartSession: startSession,\n        expire: function () {\n            cancelExpandOrRenewSession();\n            expireSession();\n            synchronizeSession(getExpiredSessionState());\n        },\n        stop: function () {\n            clearInterval(watchSessionTimeoutId);\n        },\n        updateSessionState: updateSessionState,\n    };\n}\n//# sourceMappingURL=sessionStore.js.map","import { timeStampNow } from '../../tools/utils/timeUtils';\nimport { normalizeUrl } from '../../tools/utils/urlPolyfill';\nimport { generateUUID } from '../../tools/utils/stringUtils';\nimport { INTAKE_SITE_US1, INTAKE_SITE_FED_STAGING, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function createEndpointBuilder(initConfiguration, trackType, configurationTags) {\n    var buildUrlWithParameters = createEndpointUrlWithParametersBuilder(initConfiguration, trackType);\n    return {\n        build: function (api, payload) {\n            var parameters = buildEndpointParameters(initConfiguration, trackType, configurationTags, api, payload);\n            return buildUrlWithParameters(parameters);\n        },\n        urlPrefix: buildUrlWithParameters(''),\n        trackType: trackType,\n    };\n}\n/**\n * Create a function used to build a full endpoint url from provided parameters. The goal of this\n * function is to pre-compute some parts of the URL to avoid re-computing everything on every\n * request, as only parameters are changing.\n */\nfunction createEndpointUrlWithParametersBuilder(initConfiguration, trackType) {\n    var path = \"/api/v2/\".concat(trackType);\n    var proxy = initConfiguration.proxy;\n    if (typeof proxy === 'string') {\n        var normalizedProxyUrl_1 = normalizeUrl(proxy);\n        return function (parameters) { return \"\".concat(normalizedProxyUrl_1, \"?ddforward=\").concat(encodeURIComponent(\"\".concat(path, \"?\").concat(parameters))); };\n    }\n    if (typeof proxy === 'function') {\n        return function (parameters) { return proxy({ path: path, parameters: parameters }); };\n    }\n    var host = buildEndpointHost(trackType, initConfiguration);\n    return function (parameters) { return \"https://\".concat(host).concat(path, \"?\").concat(parameters); };\n}\nfunction buildEndpointHost(trackType, initConfiguration) {\n    var _a = initConfiguration.site, site = _a === void 0 ? INTAKE_SITE_US1 : _a, internalAnalyticsSubdomain = initConfiguration.internalAnalyticsSubdomain;\n    if (trackType === 'logs' && initConfiguration.usePciIntake && site === INTAKE_SITE_US1) {\n        return PCI_INTAKE_HOST_US1;\n    }\n    if (internalAnalyticsSubdomain && site === INTAKE_SITE_US1) {\n        return \"\".concat(internalAnalyticsSubdomain, \".\").concat(INTAKE_SITE_US1);\n    }\n    if (site === INTAKE_SITE_FED_STAGING) {\n        return \"http-intake.logs.\".concat(site);\n    }\n    var domainParts = site.split('.');\n    var extension = domainParts.pop();\n    return \"browser-intake-\".concat(domainParts.join('-'), \".\").concat(extension);\n}\n/**\n * Build parameters to be used for an intake request. Parameters should be re-built for each\n * request, as they change randomly.\n */\nfunction buildEndpointParameters(_a, trackType, configurationTags, api, _b) {\n    var clientToken = _a.clientToken, internalAnalyticsSubdomain = _a.internalAnalyticsSubdomain;\n    var retry = _b.retry, encoding = _b.encoding;\n    var tags = [\"sdk_version:\".concat(\"5.28.1\"), \"api:\".concat(api)].concat(configurationTags);\n    if (retry) {\n        tags.push(\"retry_count:\".concat(retry.count), \"retry_after:\".concat(retry.lastFailureStatus));\n    }\n    var parameters = [\n        'ddsource=browser',\n        \"ddtags=\".concat(encodeURIComponent(tags.join(','))),\n        \"dd-api-key=\".concat(clientToken),\n        \"dd-evp-origin-version=\".concat(encodeURIComponent(\"5.28.1\")),\n        'dd-evp-origin=browser',\n        \"dd-request-id=\".concat(generateUUID()),\n    ];\n    if (encoding) {\n        parameters.push(\"dd-evp-encoding=\".concat(encoding));\n    }\n    if (trackType === 'rum') {\n        parameters.push(\"batch_time=\".concat(timeStampNow()));\n    }\n    if (internalAnalyticsSubdomain) {\n        parameters.reverse();\n    }\n    return parameters.join('&');\n}\n//# sourceMappingURL=endpointBuilder.js.map","import { DOCS_ORIGIN, MORE_DETAILS, display } from '../../tools/display';\nexport var TAG_SIZE_LIMIT = 200;\nexport function buildTags(configuration) {\n    var env = configuration.env, service = configuration.service, version = configuration.version, datacenter = configuration.datacenter;\n    var tags = [];\n    if (env) {\n        tags.push(buildTag('env', env));\n    }\n    if (service) {\n        tags.push(buildTag('service', service));\n    }\n    if (version) {\n        tags.push(buildTag('version', version));\n    }\n    if (datacenter) {\n        tags.push(buildTag('datacenter', datacenter));\n    }\n    return tags;\n}\nexport function buildTag(key, rawValue) {\n    // See https://docs.datadoghq.com/getting_started/tagging/#defining-tags for tags syntax. Note\n    // that the backend may not follow the exact same rules, so we only want to display an informal\n    // warning.\n    var valueSizeLimit = TAG_SIZE_LIMIT - key.length - 1;\n    if (rawValue.length > valueSizeLimit || hasForbiddenCharacters(rawValue)) {\n        display.warn(\"\".concat(key, \" value doesn't meet tag requirements and will be sanitized. \").concat(MORE_DETAILS, \" \").concat(DOCS_ORIGIN, \"/getting_started/tagging/#defining-tags\"));\n    }\n    // Let the backend do most of the sanitization, but still make sure multiple tags can't be crafted\n    // by forging a value containing commas.\n    var sanitizedValue = rawValue.replace(/,/g, '_');\n    return \"\".concat(key, \":\").concat(sanitizedValue);\n}\nfunction hasForbiddenCharacters(rawValue) {\n    // Unicode property escapes is not supported in all browsers, so we use a try/catch.\n    // Todo: Remove the try/catch when dropping IE11.\n    if (!supportUnicodePropertyEscapes()) {\n        return false;\n    }\n    // We use the Unicode property escapes to match any character that is a letter including other languages like Chinese, Japanese, etc.\n    // p{Ll} matches a lowercase letter.\n    // p{Lo} matches a letter that is neither uppercase nor lowercase (ex: Japanese characters).\n    // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Unicode_character_class_escape#unicode_property_escapes_vs._character_classes\n    return new RegExp('[^\\\\p{Ll}\\\\p{Lo}0-9_:./-]', 'u').test(rawValue);\n}\nexport function supportUnicodePropertyEscapes() {\n    try {\n        new RegExp('[\\\\p{Ll}]', 'u');\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\n//# sourceMappingURL=tags.js.map","import { objectValues, assign } from '../../tools/utils/polyfills';\nimport { createEndpointBuilder } from './endpointBuilder';\nimport { buildTags } from './tags';\nimport { INTAKE_SITE_US1, PCI_INTAKE_HOST_US1 } from './intakeSites';\nexport function computeTransportConfiguration(initConfiguration) {\n    var site = initConfiguration.site || INTAKE_SITE_US1;\n    var tags = buildTags(initConfiguration);\n    var endpointBuilders = computeEndpointBuilders(initConfiguration, tags);\n    var intakeUrlPrefixes = computeIntakeUrlPrefixes(endpointBuilders, site);\n    var replicaConfiguration = computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags);\n    return assign({\n        isIntakeUrl: function (url) { return intakeUrlPrefixes.some(function (intakeEndpoint) { return url.indexOf(intakeEndpoint) === 0; }); },\n        replica: replicaConfiguration,\n        site: site,\n    }, endpointBuilders);\n}\nfunction computeEndpointBuilders(initConfiguration, tags) {\n    return {\n        logsEndpointBuilder: createEndpointBuilder(initConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(initConfiguration, 'rum', tags),\n        sessionReplayEndpointBuilder: createEndpointBuilder(initConfiguration, 'replay', tags),\n    };\n}\nfunction computeReplicaConfiguration(initConfiguration, intakeUrlPrefixes, tags) {\n    if (!initConfiguration.replica) {\n        return;\n    }\n    var replicaConfiguration = assign({}, initConfiguration, {\n        site: INTAKE_SITE_US1,\n        clientToken: initConfiguration.replica.clientToken,\n    });\n    var replicaEndpointBuilders = {\n        logsEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'logs', tags),\n        rumEndpointBuilder: createEndpointBuilder(replicaConfiguration, 'rum', tags),\n    };\n    intakeUrlPrefixes.push.apply(intakeUrlPrefixes, objectValues(replicaEndpointBuilders).map(function (builder) { return builder.urlPrefix; }));\n    return assign({ applicationId: initConfiguration.replica.applicationId }, replicaEndpointBuilders);\n}\nfunction computeIntakeUrlPrefixes(endpointBuilders, site) {\n    var intakeUrlPrefixes = objectValues(endpointBuilders).map(function (builder) { return builder.urlPrefix; });\n    if (site === INTAKE_SITE_US1) {\n        intakeUrlPrefixes.push(\"https://\".concat(PCI_INTAKE_HOST_US1, \"/\"));\n    }\n    return intakeUrlPrefixes;\n}\n//# sourceMappingURL=transportConfiguration.js.map","import { catchUserErrors } from '../../tools/catchUserErrors';\nimport { DOCS_ORIGIN, MORE_DETAILS, display } from '../../tools/display';\nimport { ONE_SECOND } from '../../tools/utils/timeUtils';\nimport { isPercentage } from '../../tools/utils/numberUtils';\nimport { ONE_KIBI_BYTE } from '../../tools/utils/byteUtils';\nimport { objectHasValue } from '../../tools/utils/objectUtils';\nimport { assign } from '../../tools/utils/polyfills';\nimport { selectSessionStoreStrategyType } from '../session/sessionStore';\nimport { TrackingConsent } from '../trackingConsent';\nimport { computeTransportConfiguration } from './transportConfiguration';\nexport var DefaultPrivacyLevel = {\n    ALLOW: 'allow',\n    MASK: 'mask',\n    MASK_USER_INPUT: 'mask-user-input',\n};\nexport var TraceContextInjection = {\n    ALL: 'all',\n    SAMPLED: 'sampled',\n};\nfunction isString(tag, tagName) {\n    if (tag !== undefined && tag !== null && typeof tag !== 'string') {\n        display.error(\"\".concat(tagName, \" must be defined as a string\"));\n        return false;\n    }\n    return true;\n}\nfunction isDatadogSite(site) {\n    if (site && typeof site === 'string' && !/(datadog|ddog|datad0g|dd0g)/.test(site)) {\n        display.error(\"Site should be a valid Datadog site. \".concat(MORE_DETAILS, \" \").concat(DOCS_ORIGIN, \"/getting_started/site/.\"));\n        return false;\n    }\n    return true;\n}\nexport function isSampleRate(sampleRate, name) {\n    if (sampleRate !== undefined && !isPercentage(sampleRate)) {\n        display.error(\"\".concat(name, \" Sample Rate should be a number between 0 and 100\"));\n        return false;\n    }\n    return true;\n}\nexport function validateAndBuildConfiguration(initConfiguration) {\n    var _a, _b, _c, _d, _e;\n    if (!initConfiguration || !initConfiguration.clientToken) {\n        display.error('Client Token is not configured, we will not send any data.');\n        return;\n    }\n    if (!isDatadogSite(initConfiguration.site) ||\n        !isSampleRate(initConfiguration.sessionSampleRate, 'Session') ||\n        !isSampleRate(initConfiguration.telemetrySampleRate, 'Telemetry') ||\n        !isSampleRate(initConfiguration.telemetryConfigurationSampleRate, 'Telemetry Configuration') ||\n        !isSampleRate(initConfiguration.telemetryUsageSampleRate, 'Telemetry Usage') ||\n        !isString(initConfiguration.version, 'Version') ||\n        !isString(initConfiguration.env, 'Env') ||\n        !isString(initConfiguration.service, 'Service')) {\n        return;\n    }\n    if (initConfiguration.trackingConsent !== undefined &&\n        !objectHasValue(TrackingConsent, initConfiguration.trackingConsent)) {\n        display.error('Tracking Consent should be either \"granted\" or \"not-granted\"');\n        return;\n    }\n    return assign({\n        beforeSend: initConfiguration.beforeSend && catchUserErrors(initConfiguration.beforeSend, 'beforeSend threw an error:'),\n        sessionStoreStrategyType: selectSessionStoreStrategyType(initConfiguration),\n        sessionSampleRate: (_a = initConfiguration.sessionSampleRate) !== null && _a !== void 0 ? _a : 100,\n        telemetrySampleRate: (_b = initConfiguration.telemetrySampleRate) !== null && _b !== void 0 ? _b : 20,\n        telemetryConfigurationSampleRate: (_c = initConfiguration.telemetryConfigurationSampleRate) !== null && _c !== void 0 ? _c : 5,\n        telemetryUsageSampleRate: (_d = initConfiguration.telemetryUsageSampleRate) !== null && _d !== void 0 ? _d : 5,\n        service: initConfiguration.service || undefined,\n        silentMultipleInit: !!initConfiguration.silentMultipleInit,\n        allowUntrustedEvents: !!initConfiguration.allowUntrustedEvents,\n        trackingConsent: (_e = initConfiguration.trackingConsent) !== null && _e !== void 0 ? _e : TrackingConsent.GRANTED,\n        storeContextsAcrossPages: !!initConfiguration.storeContextsAcrossPages,\n        /**\n         * beacon payload max queue size implementation is 64kb\n         * ensure that we leave room for logs, rum and potential other users\n         */\n        batchBytesLimit: 16 * ONE_KIBI_BYTE,\n        eventRateLimiterThreshold: 3000,\n        maxTelemetryEventsPerPage: 15,\n        /**\n         * flush automatically, aim to be lower than ALB connection timeout\n         * to maximize connection reuse.\n         */\n        flushTimeout: (30 * ONE_SECOND),\n        /**\n         * Logs intake limit\n         */\n        batchMessagesLimit: 50,\n        messageBytesLimit: 256 * ONE_KIBI_BYTE,\n    }, computeTransportConfiguration(initConfiguration));\n}\nexport function serializeConfiguration(initConfiguration) {\n    return {\n        session_sample_rate: initConfiguration.sessionSampleRate,\n        telemetry_sample_rate: initConfiguration.telemetrySampleRate,\n        telemetry_configuration_sample_rate: initConfiguration.telemetryConfigurationSampleRate,\n        telemetry_usage_sample_rate: initConfiguration.telemetryUsageSampleRate,\n        use_before_send: !!initConfiguration.beforeSend,\n        use_cross_site_session_cookie: initConfiguration.useCrossSiteSessionCookie,\n        use_partitioned_cross_site_session_cookie: initConfiguration.usePartitionedCrossSiteSessionCookie,\n        use_secure_session_cookie: initConfiguration.useSecureSessionCookie,\n        use_proxy: !!initConfiguration.proxy,\n        silent_multiple_init: initConfiguration.silentMultipleInit,\n        track_session_across_subdomains: initConfiguration.trackSessionAcrossSubdomains,\n        allow_fallback_to_local_storage: !!initConfiguration.allowFallbackToLocalStorage,\n        store_contexts_across_pages: !!initConfiguration.storeContextsAcrossPages,\n        allow_untrusted_events: !!initConfiguration.allowUntrustedEvents,\n        tracking_consent: initConfiguration.trackingConsent,\n    };\n}\n//# sourceMappingURL=configuration.js.map","import { toStackTraceString } from '../../tools/stackTrace/handlingStack';\nimport { monitor } from '../../tools/monitor';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { addEventListener } from '../../browser/addEventListener';\nimport { assign, includes } from '../../tools/utils/polyfills';\nimport { safeTruncate } from '../../tools/utils/stringUtils';\nimport { ErrorSource } from '../error/error.types';\nimport { clocksNow } from '../../tools/utils/timeUtils';\nexport var RawReportType = {\n    intervention: 'intervention',\n    deprecation: 'deprecation',\n    cspViolation: 'csp_violation',\n};\nexport function initReportObservable(configuration, apis) {\n    var observables = [];\n    if (includes(apis, RawReportType.cspViolation)) {\n        observables.push(createCspViolationReportObservable(configuration));\n    }\n    var reportTypes = apis.filter(function (api) { return api !== RawReportType.cspViolation; });\n    if (reportTypes.length) {\n        observables.push(createReportObservable(reportTypes));\n    }\n    return mergeObservables.apply(void 0, observables);\n}\nfunction createReportObservable(reportTypes) {\n    return new Observable(function (observable) {\n        if (!window.ReportingObserver) {\n            return;\n        }\n        var handleReports = monitor(function (reports, _) {\n            return reports.forEach(function (report) { return observable.notify(buildRawReportErrorFromReport(report)); });\n        });\n        var observer = new window.ReportingObserver(handleReports, {\n            types: reportTypes,\n            buffered: true,\n        });\n        observer.observe();\n        return function () {\n            observer.disconnect();\n        };\n    });\n}\nfunction createCspViolationReportObservable(configuration) {\n    return new Observable(function (observable) {\n        var stop = addEventListener(configuration, document, \"securitypolicyviolation\" /* DOM_EVENT.SECURITY_POLICY_VIOLATION */, function (event) {\n            observable.notify(buildRawReportErrorFromCspViolation(event));\n        }).stop;\n        return stop;\n    });\n}\nfunction buildRawReportErrorFromReport(report) {\n    var type = report.type, body = report.body;\n    return buildRawReportError({\n        type: body.id,\n        message: \"\".concat(type, \": \").concat(body.message),\n        originalError: report,\n        stack: buildStack(body.id, body.message, body.sourceFile, body.lineNumber, body.columnNumber),\n    });\n}\nfunction buildRawReportErrorFromCspViolation(event) {\n    var message = \"'\".concat(event.blockedURI, \"' blocked by '\").concat(event.effectiveDirective, \"' directive\");\n    return buildRawReportError({\n        type: event.effectiveDirective,\n        message: \"\".concat(RawReportType.cspViolation, \": \").concat(message),\n        originalError: event,\n        csp: {\n            disposition: event.disposition,\n        },\n        stack: buildStack(event.effectiveDirective, event.originalPolicy\n            ? \"\".concat(message, \" of the policy \\\"\").concat(safeTruncate(event.originalPolicy, 100, '...'), \"\\\"\")\n            : 'no policy', event.sourceFile, event.lineNumber, event.columnNumber),\n    });\n}\nfunction buildRawReportError(partial) {\n    return assign({\n        startClocks: clocksNow(),\n        source: ErrorSource.REPORT,\n        handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n    }, partial);\n}\nfunction buildStack(name, message, sourceFile, lineNumber, columnNumber) {\n    return sourceFile\n        ? toStackTraceString({\n            name: name,\n            message: message,\n            stack: [\n                {\n                    func: '?',\n                    url: sourceFile,\n                    line: lineNumber !== null && lineNumber !== void 0 ? lineNumber : undefined,\n                    column: columnNumber !== null && columnNumber !== void 0 ? columnNumber : undefined,\n                },\n            ],\n        })\n        : undefined;\n}\n//# sourceMappingURL=reportObservable.js.map","import { serializeConfiguration, assign, ONE_KIBI_BYTE, validateAndBuildConfiguration, display, removeDuplicates, ConsoleApiName, RawReportType, includes, objectValues, } from '@datadog/browser-core';\n/**\n * arbitrary value, byte precision not needed\n */\nexport var DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT = 32 * ONE_KIBI_BYTE;\nexport function validateAndBuildLogsConfiguration(initConfiguration) {\n    if (initConfiguration.usePciIntake === true && initConfiguration.site && initConfiguration.site !== 'datadoghq.com') {\n        display.warn('PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.');\n    }\n    var baseConfiguration = validateAndBuildConfiguration(initConfiguration);\n    var forwardConsoleLogs = validateAndBuildForwardOption(initConfiguration.forwardConsoleLogs, objectValues(ConsoleApiName), 'Forward Console Logs');\n    var forwardReports = validateAndBuildForwardOption(initConfiguration.forwardReports, objectValues(RawReportType), 'Forward Reports');\n    if (!baseConfiguration || !forwardConsoleLogs || !forwardReports) {\n        return;\n    }\n    if (initConfiguration.forwardErrorsToLogs && !includes(forwardConsoleLogs, ConsoleApiName.error)) {\n        forwardConsoleLogs.push(ConsoleApiName.error);\n    }\n    return assign({\n        forwardErrorsToLogs: initConfiguration.forwardErrorsToLogs !== false,\n        forwardConsoleLogs: forwardConsoleLogs,\n        forwardReports: forwardReports,\n        requestErrorResponseLengthLimit: DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT,\n        sendLogsAfterSessionExpiration: !!initConfiguration.sendLogsAfterSessionExpiration,\n    }, baseConfiguration);\n}\nexport function validateAndBuildForwardOption(option, allowedValues, label) {\n    if (option === undefined) {\n        return [];\n    }\n    if (!(option === 'all' || (Array.isArray(option) && option.every(function (api) { return includes(allowedValues, api); })))) {\n        display.error(\"\".concat(label, \" should be \\\"all\\\" or an array with allowed values \\\"\").concat(allowedValues.join('\", \"'), \"\\\"\"));\n        return;\n    }\n    return option === 'all' ? allowedValues : removeDuplicates(option);\n}\nexport function serializeLogsConfiguration(configuration) {\n    var baseSerializedInitConfiguration = serializeConfiguration(configuration);\n    return assign({\n        forward_errors_to_logs: configuration.forwardErrorsToLogs,\n        forward_console_logs: configuration.forwardConsoleLogs,\n        forward_reports: configuration.forwardReports,\n        use_pci_intake: configuration.usePciIntake,\n        send_logs_after_session_expiration: configuration.sendLogsAfterSessionExpiration,\n    }, baseSerializedInitConfiguration);\n}\n//# sourceMappingURL=configuration.js.map","import { createBoundedBuffer, assign, canUseEventBridge, display, displayAlreadyInitializedError, initFeatureFlags, initFetchObservable, noop, timeStampNow, } from '@datadog/browser-core';\nimport { validateAndBuildLogsConfiguration, } from '../domain/configuration';\nexport function createPreStartStrategy(getCommonContext, trackingConsentState, doStartLogs) {\n    var bufferApiCalls = createBoundedBuffer();\n    var cachedInitConfiguration;\n    var cachedConfiguration;\n    var trackingConsentStateSubscription = trackingConsentState.observable.subscribe(tryStartLogs);\n    function tryStartLogs() {\n        if (!cachedConfiguration || !cachedInitConfiguration || !trackingConsentState.isGranted()) {\n            return;\n        }\n        trackingConsentStateSubscription.unsubscribe();\n        var startLogsResult = doStartLogs(cachedInitConfiguration, cachedConfiguration);\n        bufferApiCalls.drain(startLogsResult);\n    }\n    return {\n        init: function (initConfiguration) {\n            if (!initConfiguration) {\n                display.error('Missing configuration');\n                return;\n            }\n            // Set the experimental feature flags as early as possible, so we can use them in most places\n            initFeatureFlags(initConfiguration.enableExperimentalFeatures);\n            if (canUseEventBridge()) {\n                initConfiguration = overrideInitConfigurationForBridge(initConfiguration);\n            }\n            // Expose the initial configuration regardless of initialization success.\n            cachedInitConfiguration = initConfiguration;\n            if (cachedConfiguration) {\n                displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n                return;\n            }\n            var configuration = validateAndBuildLogsConfiguration(initConfiguration);\n            if (!configuration) {\n                return;\n            }\n            cachedConfiguration = configuration;\n            // Instrumuent fetch to track network requests\n            // This is needed in case the consent is not granted and some cutsomer\n            // library (Apollo Client) is storing uninstrumented fetch to be used later\n            // The subscrption is needed so that the instrumentation process is completed\n            initFetchObservable().subscribe(noop);\n            trackingConsentState.tryToInit(configuration.trackingConsent);\n            tryStartLogs();\n        },\n        get initConfiguration() {\n            return cachedInitConfiguration;\n        },\n        getInternalContext: noop,\n        handleLog: function (message, statusType, handlingStack, context, date) {\n            if (context === void 0) { context = getCommonContext(); }\n            if (date === void 0) { date = timeStampNow(); }\n            bufferApiCalls.add(function (startLogsResult) {\n                return startLogsResult.handleLog(message, statusType, handlingStack, context, date);\n            });\n        },\n    };\n}\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n    return assign({}, initConfiguration, { clientToken: 'empty' });\n}\n//# sourceMappingURL=preStartLogs.js.map","import { addTelemetryUsage, assign, createContextManager, makePublicApi, monitor, checkUser, sanitizeUser, sanitize, createCustomerDataTrackerManager, storeContextManager, displayAlreadyInitializedError, deepClone, createTrackingConsentState, } from '@datadog/browser-core';\nimport { Logger } from '../domain/logger';\nimport { buildCommonContext } from '../domain/contexts/commonContext';\nimport { createPreStartStrategy } from './preStartLogs';\nvar LOGS_STORAGE_KEY = 'logs';\nexport function makeLogsPublicApi(startLogsImpl) {\n    var customerDataTrackerManager = createCustomerDataTrackerManager();\n    var globalContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(2 /* CustomerDataType.GlobalContext */));\n    var userContextManager = createContextManager(customerDataTrackerManager.getOrCreateTracker(1 /* CustomerDataType.User */));\n    var trackingConsentState = createTrackingConsentState();\n    function getCommonContext() {\n        return buildCommonContext(globalContextManager, userContextManager);\n    }\n    var strategy = createPreStartStrategy(getCommonContext, trackingConsentState, function (initConfiguration, configuration) {\n        if (initConfiguration.storeContextsAcrossPages) {\n            storeContextManager(configuration, globalContextManager, LOGS_STORAGE_KEY, 2 /* CustomerDataType.GlobalContext */);\n            storeContextManager(configuration, userContextManager, LOGS_STORAGE_KEY, 1 /* CustomerDataType.User */);\n        }\n        var startLogsResult = startLogsImpl(initConfiguration, configuration, getCommonContext, trackingConsentState);\n        strategy = createPostStartStrategy(initConfiguration, startLogsResult);\n        return startLogsResult;\n    });\n    var customLoggers = {};\n    var mainLogger = new Logger(function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        return strategy.handleLog.apply(strategy, params);\n    }, customerDataTrackerManager.createDetachedTracker());\n    return makePublicApi({\n        logger: mainLogger,\n        init: monitor(function (initConfiguration) { return strategy.init(initConfiguration); }),\n        setTrackingConsent: monitor(function (trackingConsent) {\n            trackingConsentState.update(trackingConsent);\n            addTelemetryUsage({ feature: 'set-tracking-consent', tracking_consent: trackingConsent });\n        }),\n        getGlobalContext: monitor(function () { return globalContextManager.getContext(); }),\n        setGlobalContext: monitor(function (context) { return globalContextManager.setContext(context); }),\n        setGlobalContextProperty: monitor(function (key, value) { return globalContextManager.setContextProperty(key, value); }),\n        removeGlobalContextProperty: monitor(function (key) { return globalContextManager.removeContextProperty(key); }),\n        clearGlobalContext: monitor(function () { return globalContextManager.clearContext(); }),\n        createLogger: monitor(function (name, conf) {\n            if (conf === void 0) { conf = {}; }\n            customLoggers[name] = new Logger(function () {\n                var params = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    params[_i] = arguments[_i];\n                }\n                return strategy.handleLog.apply(strategy, params);\n            }, customerDataTrackerManager.createDetachedTracker(), sanitize(name), conf.handler, conf.level, sanitize(conf.context));\n            return customLoggers[name];\n        }),\n        getLogger: monitor(function (name) { return customLoggers[name]; }),\n        getInitConfiguration: monitor(function () { return deepClone(strategy.initConfiguration); }),\n        getInternalContext: monitor(function (startTime) { return strategy.getInternalContext(startTime); }),\n        setUser: monitor(function (newUser) {\n            if (checkUser(newUser)) {\n                userContextManager.setContext(sanitizeUser(newUser));\n            }\n        }),\n        getUser: monitor(function () { return userContextManager.getContext(); }),\n        setUserProperty: monitor(function (key, property) {\n            var _a;\n            var sanitizedProperty = sanitizeUser((_a = {}, _a[key] = property, _a))[key];\n            userContextManager.setContextProperty(key, sanitizedProperty);\n        }),\n        removeUserProperty: monitor(function (key) { return userContextManager.removeContextProperty(key); }),\n        clearUser: monitor(function () { return userContextManager.clearContext(); }),\n    });\n}\nfunction createPostStartStrategy(initConfiguration, startLogsResult) {\n    return assign({\n        init: function (initConfiguration) {\n            displayAlreadyInitializedError('DD_LOGS', initConfiguration);\n        },\n        initConfiguration: initConfiguration,\n    }, startLogsResult);\n}\n//# sourceMappingURL=logsPublicApi.js.map","import { Observable } from '../tools/observable';\nimport { objectValues, includes } from '../tools/utils/polyfills';\nimport { addEventListeners, addEventListener } from './addEventListener';\nexport var PageExitReason = {\n    HIDDEN: 'visibility_hidden',\n    UNLOADING: 'before_unload',\n    PAGEHIDE: 'page_hide',\n    FROZEN: 'page_frozen',\n};\nexport function createPageExitObservable(configuration) {\n    return new Observable(function (observable) {\n        var stopListeners = addEventListeners(configuration, window, [\"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, \"freeze\" /* DOM_EVENT.FREEZE */], function (event) {\n            if (event.type === \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */ && document.visibilityState === 'hidden') {\n                /**\n                 * Only event that guarantee to fire on mobile devices when the page transitions to background state\n                 * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n                 */\n                observable.notify({ reason: PageExitReason.HIDDEN });\n            }\n            else if (event.type === \"freeze\" /* DOM_EVENT.FREEZE */) {\n                /**\n                 * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n                 * Allow to collect events happening between hidden and frozen state.\n                 */\n                observable.notify({ reason: PageExitReason.FROZEN });\n            }\n        }, { capture: true }).stop;\n        var stopBeforeUnloadListener = addEventListener(configuration, window, \"beforeunload\" /* DOM_EVENT.BEFORE_UNLOAD */, function () {\n            observable.notify({ reason: PageExitReason.UNLOADING });\n        }).stop;\n        return function () {\n            stopListeners();\n            stopBeforeUnloadListener();\n        };\n    });\n}\nexport function isPageExitReason(reason) {\n    return includes(objectValues(PageExitReason), reason);\n}\n//# sourceMappingURL=pageExitObservable.js.map","import { getInitCookie } from '../../browser/cookie';\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'datadog-synthetics-public-id';\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'datadog-synthetics-result-id';\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'datadog-synthetics-injects-rum';\nexport function willSyntheticsInjectRum() {\n    return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM || getInitCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME));\n}\nexport function getSyntheticsTestId() {\n    var value = window._DATADOG_SYNTHETICS_PUBLIC_ID || getInitCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\nexport function getSyntheticsResultId() {\n    var value = window._DATADOG_SYNTHETICS_RESULT_ID || getInitCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);\n    return typeof value === 'string' ? value : undefined;\n}\n//# sourceMappingURL=syntheticsWorkerValues.js.map","import { setInterval, clearInterval } from './timer';\nimport { removeItem } from './utils/arrayUtils';\nimport { addDuration, relativeNow, ONE_MINUTE } from './utils/timeUtils';\nvar END_OF_TIMES = Infinity;\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE;\nexport function createValueHistory(_a) {\n    var expireDelay = _a.expireDelay, maxEntries = _a.maxEntries;\n    var entries = [];\n    var clearOldValuesInterval = setInterval(function () { return clearOldValues(); }, CLEAR_OLD_VALUES_INTERVAL);\n    function clearOldValues() {\n        var oldTimeThreshold = relativeNow() - expireDelay;\n        while (entries.length > 0 && entries[entries.length - 1].endTime < oldTimeThreshold) {\n            entries.pop();\n        }\n    }\n    /**\n     * Add a value to the history associated with a start time. Returns a reference to this newly\n     * added entry that can be removed or closed.\n     */\n    function add(value, startTime) {\n        var entry = {\n            value: value,\n            startTime: startTime,\n            endTime: END_OF_TIMES,\n            remove: function () {\n                removeItem(entries, entry);\n            },\n            close: function (endTime) {\n                entry.endTime = endTime;\n            },\n        };\n        if (maxEntries && entries.length >= maxEntries) {\n            entries.pop();\n        }\n        entries.unshift(entry);\n        return entry;\n    }\n    /**\n     * Return the latest value that was active during `startTime`, or the currently active value\n     * if no `startTime` is provided. This method assumes that entries are not overlapping.\n     *\n     * If `option.returnInactive` is true, returns the value at `startTime` (active or not).\n     */\n    function find(startTime, options) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        if (options === void 0) { options = { returnInactive: false }; }\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n            var entry = entries_1[_i];\n            if (entry.startTime <= startTime) {\n                if (options.returnInactive || startTime <= entry.endTime) {\n                    return entry.value;\n                }\n                break;\n            }\n        }\n    }\n    /**\n     * Helper function to close the currently active value, if any. This method assumes that entries\n     * are not overlapping.\n     */\n    function closeActive(endTime) {\n        var latestEntry = entries[0];\n        if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n            latestEntry.close(endTime);\n        }\n    }\n    /**\n     * Return all values with an active period overlapping with the duration,\n     * or all values that were active during `startTime` if no duration is provided,\n     * or all currently active values if no `startTime` is provided.\n     */\n    function findAll(startTime, duration) {\n        if (startTime === void 0) { startTime = END_OF_TIMES; }\n        if (duration === void 0) { duration = 0; }\n        var endTime = addDuration(startTime, duration);\n        return entries\n            .filter(function (entry) { return entry.startTime <= endTime && startTime <= entry.endTime; })\n            .map(function (entry) { return entry.value; });\n    }\n    /**\n     * Remove all entries from this collection.\n     */\n    function reset() {\n        entries = [];\n    }\n    /**\n     * Stop internal garbage collection of past entries.\n     */\n    function stop() {\n        clearInterval(clearOldValuesInterval);\n    }\n    return { add: add, find: find, closeActive: closeActive, findAll: findAll, reset: reset, stop: stop };\n}\n//# sourceMappingURL=valueHistory.js.map","import { Observable } from '../../tools/observable';\nimport { createValueHistory } from '../../tools/valueHistory';\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { addEventListener, addEventListeners } from '../../browser/addEventListener';\nimport { clearInterval, setInterval } from '../../tools/timer';\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants';\nimport { startSessionStore } from './sessionStore';\nexport var VISIBILITY_CHECK_DELAY = ONE_MINUTE;\nvar SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY;\nvar stopCallbacks = [];\nexport function startSessionManager(configuration, productKey, computeSessionState, trackingConsentState) {\n    var renewObservable = new Observable();\n    var expireObservable = new Observable();\n    // TODO - Improve configuration type and remove assertion\n    var sessionStore = startSessionStore(configuration.sessionStoreStrategyType, productKey, computeSessionState);\n    stopCallbacks.push(function () { return sessionStore.stop(); });\n    var sessionContextHistory = createValueHistory({\n        expireDelay: SESSION_CONTEXT_TIMEOUT_DELAY,\n    });\n    stopCallbacks.push(function () { return sessionContextHistory.stop(); });\n    sessionStore.renewObservable.subscribe(function () {\n        sessionContextHistory.add(buildSessionContext(), relativeNow());\n        renewObservable.notify();\n    });\n    sessionStore.expireObservable.subscribe(function () {\n        expireObservable.notify();\n        sessionContextHistory.closeActive(relativeNow());\n    });\n    // We expand/renew session unconditionally as tracking consent is always granted when the session\n    // manager is started.\n    sessionStore.expandOrRenewSession();\n    sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative);\n    trackingConsentState.observable.subscribe(function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n        else {\n            sessionStore.expire();\n        }\n    });\n    trackActivity(configuration, function () {\n        if (trackingConsentState.isGranted()) {\n            sessionStore.expandOrRenewSession();\n        }\n    });\n    trackVisibility(configuration, function () { return sessionStore.expandSession(); });\n    trackResume(configuration, function () { return sessionStore.restartSession(); });\n    function buildSessionContext() {\n        return {\n            id: sessionStore.getSession().id,\n            trackingType: sessionStore.getSession()[productKey],\n            isReplayForced: !!sessionStore.getSession().forcedReplay,\n        };\n    }\n    return {\n        findSession: function (startTime, options) { return sessionContextHistory.find(startTime, options); },\n        renewObservable: renewObservable,\n        expireObservable: expireObservable,\n        sessionStateUpdateObservable: sessionStore.sessionStateUpdateObservable,\n        expire: sessionStore.expire,\n        updateSessionState: sessionStore.updateSessionState,\n    };\n}\nexport function stopSessionManager() {\n    stopCallbacks.forEach(function (e) { return e(); });\n    stopCallbacks = [];\n}\nfunction trackActivity(configuration, expandOrRenewSession) {\n    var stop = addEventListeners(configuration, window, [\"click\" /* DOM_EVENT.CLICK */, \"touchstart\" /* DOM_EVENT.TOUCH_START */, \"keydown\" /* DOM_EVENT.KEY_DOWN */, \"scroll\" /* DOM_EVENT.SCROLL */], expandOrRenewSession, { capture: true, passive: true }).stop;\n    stopCallbacks.push(stop);\n}\nfunction trackVisibility(configuration, expandSession) {\n    var expandSessionWhenVisible = function () {\n        if (document.visibilityState === 'visible') {\n            expandSession();\n        }\n    };\n    var stop = addEventListener(configuration, document, \"visibilitychange\" /* DOM_EVENT.VISIBILITY_CHANGE */, expandSessionWhenVisible).stop;\n    stopCallbacks.push(stop);\n    var visibilityCheckInterval = setInterval(expandSessionWhenVisible, VISIBILITY_CHECK_DELAY);\n    stopCallbacks.push(function () {\n        clearInterval(visibilityCheckInterval);\n    });\n}\nfunction trackResume(configuration, cb) {\n    var stop = addEventListener(configuration, window, \"resume\" /* DOM_EVENT.RESUME */, cb, { capture: true }).stop;\n    stopCallbacks.push(stop);\n}\n//# sourceMappingURL=sessionManager.js.map","import { Observable, performDraw, startSessionManager } from '@datadog/browser-core';\nexport var LOGS_SESSION_KEY = 'logs';\nexport function startLogsSessionManager(configuration, trackingConsentState) {\n    var sessionManager = startSessionManager(configuration, LOGS_SESSION_KEY, function (rawTrackingType) { return computeSessionState(configuration, rawTrackingType); }, trackingConsentState);\n    return {\n        findTrackedSession: function (startTime, options) {\n            if (options === void 0) { options = { returnInactive: false }; }\n            var session = sessionManager.findSession(startTime, options);\n            return session && session.trackingType === \"1\" /* LoggerTrackingType.TRACKED */\n                ? {\n                    id: session.id,\n                }\n                : undefined;\n        },\n        expireObservable: sessionManager.expireObservable,\n    };\n}\nexport function startLogsSessionManagerStub(configuration) {\n    var isTracked = computeTrackingType(configuration) === \"1\" /* LoggerTrackingType.TRACKED */;\n    var session = isTracked ? {} : undefined;\n    return {\n        findTrackedSession: function () { return session; },\n        expireObservable: new Observable(),\n    };\n}\nfunction computeTrackingType(configuration) {\n    if (!performDraw(configuration.sessionSampleRate)) {\n        return \"0\" /* LoggerTrackingType.NOT_TRACKED */;\n    }\n    return \"1\" /* LoggerTrackingType.TRACKED */;\n}\nfunction computeSessionState(configuration, rawSessionType) {\n    var trackingType = hasValidLoggerSession(rawSessionType) ? rawSessionType : computeTrackingType(configuration);\n    return {\n        trackingType: trackingType,\n        isTracked: trackingType === \"1\" /* LoggerTrackingType.TRACKED */,\n    };\n}\nfunction hasValidLoggerSession(trackingType) {\n    return trackingType === \"0\" /* LoggerTrackingType.NOT_TRACKED */ || trackingType === \"1\" /* LoggerTrackingType.TRACKED */;\n}\n//# sourceMappingURL=logsSessionManager.js.map","import { willSyntheticsInjectRum, addTelemetryDebug, getSyntheticsTestId, getSyntheticsResultId, } from '@datadog/browser-core';\nvar logsSentBeforeRumInjectionTelemetryAdded = false;\nexport function getRUMInternalContext(startTime) {\n    var browserWindow = window;\n    if (willSyntheticsInjectRum()) {\n        var context = getInternalContextFromRumGlobal(browserWindow.DD_RUM_SYNTHETICS);\n        if (!context && !logsSentBeforeRumInjectionTelemetryAdded) {\n            logsSentBeforeRumInjectionTelemetryAdded = true;\n            addTelemetryDebug('Logs sent before RUM is injected by the synthetics worker', {\n                testId: getSyntheticsTestId(),\n                resultId: getSyntheticsResultId(),\n            });\n        }\n        return context;\n    }\n    return getInternalContextFromRumGlobal(browserWindow.DD_RUM);\n    function getInternalContextFromRumGlobal(rumGlobal) {\n        if (rumGlobal && rumGlobal.getInternalContext) {\n            return rumGlobal.getInternalContext(startTime);\n        }\n    }\n}\nexport function resetRUMInternalContext() {\n    logsSentBeforeRumInjectionTelemetryAdded = false;\n}\n//# sourceMappingURL=rumInternalContext.js.map","import { ErrorSource, combine, createEventRateLimiter, getRelativeTime, isEmptyObject } from '@datadog/browser-core';\nimport { STATUSES } from './logger';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nexport function startLogsAssembly(sessionManager, configuration, lifeCycle, getCommonContext, reportError) {\n    var statusWithCustom = STATUSES.concat(['custom']);\n    var logRateLimiters = {};\n    statusWithCustom.forEach(function (status) {\n        logRateLimiters[status] = createEventRateLimiter(status, configuration.eventRateLimiterThreshold, reportError);\n    });\n    lifeCycle.subscribe(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, function (_a) {\n        var _b, _c;\n        var rawLogsEvent = _a.rawLogsEvent, _d = _a.messageContext, messageContext = _d === void 0 ? undefined : _d, _e = _a.savedCommonContext, savedCommonContext = _e === void 0 ? undefined : _e, domainContext = _a.domainContext;\n        var startTime = getRelativeTime(rawLogsEvent.date);\n        var session = sessionManager.findTrackedSession(startTime);\n        if (!session &&\n            (!configuration.sendLogsAfterSessionExpiration ||\n                !sessionManager.findTrackedSession(startTime, { returnInactive: true }))) {\n            return;\n        }\n        var commonContext = savedCommonContext || getCommonContext();\n        var log = combine({\n            service: configuration.service,\n            session_id: session ? session.id : undefined,\n            // Insert user first to allow overrides from global context\n            usr: !isEmptyObject(commonContext.user) ? commonContext.user : undefined,\n            view: commonContext.view,\n        }, commonContext.context, getRUMInternalContext(startTime), rawLogsEvent, messageContext);\n        if (((_b = configuration.beforeSend) === null || _b === void 0 ? void 0 : _b.call(configuration, log, domainContext)) === false ||\n            (log.origin !== ErrorSource.AGENT &&\n                ((_c = logRateLimiters[log.status]) !== null && _c !== void 0 ? _c : logRateLimiters['custom']).isLimitReached())) {\n            return;\n        }\n        lifeCycle.notify(1 /* LifeCycleEventType.LOG_COLLECTED */, log);\n    });\n}\n//# sourceMappingURL=assembly.js.map","import { setTimeout } from '../../tools/timer';\nimport { clocksNow, ONE_MINUTE } from '../../tools/utils/timeUtils';\nimport { ErrorSource } from '../error/error.types';\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n    var eventCount = 0;\n    var allowNextEvent = false;\n    return {\n        isLimitReached: function () {\n            if (eventCount === 0) {\n                setTimeout(function () {\n                    eventCount = 0;\n                }, ONE_MINUTE);\n            }\n            eventCount += 1;\n            if (eventCount <= limit || allowNextEvent) {\n                allowNextEvent = false;\n                return false;\n            }\n            if (eventCount === limit + 1) {\n                allowNextEvent = true;\n                try {\n                    onLimitReached({\n                        message: \"Reached max number of \".concat(eventType, \"s by minute: \").concat(limit),\n                        source: ErrorSource.AGENT,\n                        startClocks: clocksNow(),\n                    });\n                }\n                finally {\n                    allowNextEvent = false;\n                }\n            }\n            return true;\n        },\n    };\n}\n//# sourceMappingURL=createEventRateLimiter.js.map","import { flattenErrorCauses, tryToGetFingerprint } from '../error/error';\nimport { mergeObservables, Observable } from '../../tools/observable';\nimport { ConsoleApiName, globalConsole } from '../../tools/display';\nimport { callMonitored } from '../../tools/monitor';\nimport { sanitize } from '../../tools/serialisation/sanitize';\nimport { find } from '../../tools/utils/polyfills';\nimport { jsonStringify } from '../../tools/serialisation/jsonStringify';\nimport { ErrorSource } from '../error/error.types';\nimport { computeStackTrace } from '../../tools/stackTrace/computeStackTrace';\nimport { createHandlingStack, toStackTraceString, formatErrorMessage } from '../../tools/stackTrace/handlingStack';\nimport { clocksNow } from '../../tools/utils/timeUtils';\nvar consoleObservablesByApi = {};\nexport function initConsoleObservable(apis) {\n    var consoleObservables = apis.map(function (api) {\n        if (!consoleObservablesByApi[api]) {\n            consoleObservablesByApi[api] = createConsoleObservable(api); // we are sure that the observable created for this api will yield the expected ConsoleLog type\n        }\n        return consoleObservablesByApi[api];\n    });\n    return mergeObservables.apply(void 0, consoleObservables);\n}\nexport function resetConsoleObservable() {\n    consoleObservablesByApi = {};\n}\nfunction createConsoleObservable(api) {\n    return new Observable(function (observable) {\n        var originalConsoleApi = globalConsole[api];\n        globalConsole[api] = function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            originalConsoleApi.apply(console, params);\n            var handlingStack = createHandlingStack();\n            callMonitored(function () {\n                observable.notify(buildConsoleLog(params, api, handlingStack));\n            });\n        };\n        return function () {\n            globalConsole[api] = originalConsoleApi;\n        };\n    });\n}\nfunction buildConsoleLog(params, api, handlingStack) {\n    var message = params.map(function (param) { return formatConsoleParameters(param); }).join(' ');\n    var error;\n    if (api === ConsoleApiName.error) {\n        var firstErrorParam = find(params, function (param) { return param instanceof Error; });\n        error = {\n            stack: firstErrorParam ? toStackTraceString(computeStackTrace(firstErrorParam)) : undefined,\n            fingerprint: tryToGetFingerprint(firstErrorParam),\n            causes: firstErrorParam ? flattenErrorCauses(firstErrorParam, 'console') : undefined,\n            startClocks: clocksNow(),\n            message: message,\n            source: ErrorSource.CONSOLE,\n            handling: \"handled\" /* ErrorHandling.HANDLED */,\n            handlingStack: handlingStack,\n        };\n    }\n    return {\n        api: api,\n        message: message,\n        error: error,\n        handlingStack: handlingStack,\n    };\n}\nfunction formatConsoleParameters(param) {\n    if (typeof param === 'string') {\n        return sanitize(param);\n    }\n    if (param instanceof Error) {\n        return formatErrorMessage(computeStackTrace(param));\n    }\n    return jsonStringify(sanitize(param), undefined, 2);\n}\n//# sourceMappingURL=consoleObservable.js.map","var _a;\nimport { timeStampNow, ConsoleApiName, ErrorSource, initConsoleObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport var LogStatusForApi = (_a = {},\n    _a[ConsoleApiName.log] = StatusType.info,\n    _a[ConsoleApiName.debug] = StatusType.debug,\n    _a[ConsoleApiName.info] = StatusType.info,\n    _a[ConsoleApiName.warn] = StatusType.warn,\n    _a[ConsoleApiName.error] = StatusType.error,\n    _a);\nexport function startConsoleCollection(configuration, lifeCycle) {\n    var consoleSubscription = initConsoleObservable(configuration.forwardConsoleLogs).subscribe(function (log) {\n        var collectedData = {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: log.message,\n                origin: ErrorSource.CONSOLE,\n                error: log.error && createErrorFieldFromRawError(log.error),\n                status: LogStatusForApi[log.api],\n            },\n            domainContext: {\n                handlingStack: log.handlingStack,\n            },\n        };\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, collectedData);\n    });\n    return {\n        stop: function () {\n            consoleSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=consoleCollection.js.map","import { instrumentMethod } from '../tools/instrumentMethod';\nimport { Observable } from '../tools/observable';\nimport { elapsed, clocksNow, timeStampNow } from '../tools/utils/timeUtils';\nimport { normalizeUrl } from '../tools/utils/urlPolyfill';\nimport { shallowClone } from '../tools/utils/objectUtils';\nimport { addEventListener } from './addEventListener';\nvar xhrObservable;\nvar xhrContexts = new WeakMap();\nexport function initXhrObservable(configuration) {\n    if (!xhrObservable) {\n        xhrObservable = createXhrObservable(configuration);\n    }\n    return xhrObservable;\n}\nfunction createXhrObservable(configuration) {\n    return new Observable(function (observable) {\n        var stopInstrumentingStart = instrumentMethod(XMLHttpRequest.prototype, 'open', openXhr).stop;\n        var stopInstrumentingSend = instrumentMethod(XMLHttpRequest.prototype, 'send', function (call) {\n            sendXhr(call, configuration, observable);\n        }, { computeHandlingStack: true }).stop;\n        var stopInstrumentingAbort = instrumentMethod(XMLHttpRequest.prototype, 'abort', abortXhr).stop;\n        return function () {\n            stopInstrumentingStart();\n            stopInstrumentingSend();\n            stopInstrumentingAbort();\n        };\n    });\n}\nfunction openXhr(_a) {\n    var xhr = _a.target, _b = _a.parameters, method = _b[0], url = _b[1];\n    xhrContexts.set(xhr, {\n        state: 'open',\n        method: String(method).toUpperCase(),\n        url: normalizeUrl(String(url)),\n    });\n}\nfunction sendXhr(_a, configuration, observable) {\n    var xhr = _a.target, handlingStack = _a.handlingStack;\n    var context = xhrContexts.get(xhr);\n    if (!context) {\n        return;\n    }\n    var startContext = context;\n    startContext.state = 'start';\n    startContext.startClocks = clocksNow();\n    startContext.isAborted = false;\n    startContext.xhr = xhr;\n    startContext.handlingStack = handlingStack;\n    var hasBeenReported = false;\n    var stopInstrumentingOnReadyStateChange = instrumentMethod(xhr, 'onreadystatechange', function () {\n        if (xhr.readyState === XMLHttpRequest.DONE) {\n            // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n            // application during a future event. For example, Angular is calling .abort() on\n            // completed requests during an onreadystatechange event, so the status becomes '0'\n            // before the request is collected.\n            onEnd();\n        }\n    }).stop;\n    var onEnd = function () {\n        unsubscribeLoadEndListener();\n        stopInstrumentingOnReadyStateChange();\n        if (hasBeenReported) {\n            return;\n        }\n        hasBeenReported = true;\n        var completeContext = context;\n        completeContext.state = 'complete';\n        completeContext.duration = elapsed(startContext.startClocks.timeStamp, timeStampNow());\n        completeContext.status = xhr.status;\n        observable.notify(shallowClone(completeContext));\n    };\n    var unsubscribeLoadEndListener = addEventListener(configuration, xhr, 'loadend', onEnd).stop;\n    observable.notify(startContext);\n}\nfunction abortXhr(_a) {\n    var xhr = _a.target;\n    var context = xhrContexts.get(xhr);\n    if (context) {\n        context.isAborted = true;\n    }\n}\n//# sourceMappingURL=xhrObservable.js.map","export function isServerError(status) {\n    return status >= 500;\n}\nexport function tryToClone(response) {\n    try {\n        return response.clone();\n    }\n    catch (e) {\n        // clone can throw if the response has already been used by another instrumentation or is disturbed\n        return;\n    }\n}\n//# sourceMappingURL=responseUtils.js.map","import { ErrorSource, initXhrObservable, initFetchObservable, computeStackTrace, toStackTraceString, monitor, noop, readBytesFromStream, tryToClone, isServerError, } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nexport function startNetworkErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var xhrSubscription = initXhrObservable(configuration).subscribe(function (context) {\n        if (context.state === 'complete') {\n            handleResponse(\"xhr\" /* RequestType.XHR */, context);\n        }\n    });\n    var fetchSubscription = initFetchObservable().subscribe(function (context) {\n        if (context.state === 'resolve') {\n            handleResponse(\"fetch\" /* RequestType.FETCH */, context);\n        }\n    });\n    function handleResponse(type, request) {\n        if (!configuration.isIntakeUrl(request.url) && (isRejected(request) || isServerError(request.status))) {\n            if ('xhr' in request) {\n                computeXhrResponseData(request.xhr, configuration, onResponseDataAvailable);\n            }\n            else if (request.response) {\n                computeFetchResponseText(request.response, configuration, onResponseDataAvailable);\n            }\n            else if (request.error) {\n                computeFetchErrorText(request.error, configuration, onResponseDataAvailable);\n            }\n        }\n        function onResponseDataAvailable(responseData) {\n            var domainContext = {\n                isAborted: request.isAborted,\n                handlingStack: request.handlingStack,\n            };\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n                rawLogsEvent: {\n                    message: \"\".concat(format(type), \" error \").concat(request.method, \" \").concat(request.url),\n                    date: request.startClocks.timeStamp,\n                    error: {\n                        stack: responseData || 'Failed to load',\n                        // We don't know if the error was handled or not, so we set it to undefined\n                        handling: undefined,\n                    },\n                    http: {\n                        method: request.method, // Cast resource method because of case mismatch cf issue RUMF-1152\n                        status_code: request.status,\n                        url: request.url,\n                    },\n                    status: StatusType.error,\n                    origin: ErrorSource.NETWORK,\n                },\n                domainContext: domainContext,\n            });\n        }\n    }\n    return {\n        stop: function () {\n            xhrSubscription.unsubscribe();\n            fetchSubscription.unsubscribe();\n        },\n    };\n}\n// TODO: ideally, computeXhrResponseData should always call the callback with a string instead of\n// `unknown`. But to keep backward compatibility, in the case of XHR with a `responseType` different\n// than \"text\", the response data should be whatever `xhr.response` is. This is a bit confusing as\n// Logs event 'stack' is expected to be a string. This should be changed in a future major version\n// as it could be a breaking change.\nexport function computeXhrResponseData(xhr, configuration, callback) {\n    if (typeof xhr.response === 'string') {\n        callback(truncateResponseText(xhr.response, configuration));\n    }\n    else {\n        callback(xhr.response);\n    }\n}\nexport function computeFetchErrorText(error, configuration, callback) {\n    callback(truncateResponseText(toStackTraceString(computeStackTrace(error)), configuration));\n}\nexport function computeFetchResponseText(response, configuration, callback) {\n    var clonedResponse = tryToClone(response);\n    if (!clonedResponse || !clonedResponse.body) {\n        // if the clone failed or if the body is null, let's not try to read it.\n        callback();\n    }\n    else if (!window.TextDecoder) {\n        // If the browser doesn't support TextDecoder, let's read the whole response then truncate it.\n        //\n        // This should only be the case on early versions of Edge (before they migrated to Chromium).\n        // Even if it could be possible to implement a workaround for the missing TextDecoder API (using\n        // a Blob and FileReader), we found another issue preventing us from reading only the first\n        // bytes from the response: contrary to other browsers, when reading from the cloned response,\n        // if the original response gets canceled, the cloned response is also canceled and we can't\n        // know about it.  In the following illustration, the promise returned by `reader.read()` may\n        // never be fulfilled:\n        //\n        // fetch('/').then((response) => {\n        //   const reader = response.clone().body.getReader()\n        //   readMore()\n        //   function readMore() {\n        //     reader.read().then(\n        //       (result) => {\n        //         if (result.done) {\n        //           console.log('done')\n        //         } else {\n        //           readMore()\n        //         }\n        //       },\n        //       () => console.log('error')\n        //     )\n        //   }\n        //   response.body.getReader().cancel()\n        // })\n        clonedResponse.text().then(monitor(function (text) { return callback(truncateResponseText(text, configuration)); }), monitor(function (error) { return callback(\"Unable to retrieve response: \".concat(error)); }));\n    }\n    else {\n        truncateResponseStream(clonedResponse.body, configuration.requestErrorResponseLengthLimit, function (error, responseText) {\n            if (error) {\n                callback(\"Unable to retrieve response: \".concat(error));\n            }\n            else {\n                callback(responseText);\n            }\n        });\n    }\n}\nfunction isRejected(request) {\n    return request.status === 0 && request.responseType !== 'opaque';\n}\nfunction truncateResponseText(responseText, configuration) {\n    if (responseText.length > configuration.requestErrorResponseLengthLimit) {\n        return \"\".concat(responseText.substring(0, configuration.requestErrorResponseLengthLimit), \"...\");\n    }\n    return responseText;\n}\nfunction format(type) {\n    if (\"xhr\" /* RequestType.XHR */ === type) {\n        return 'XHR';\n    }\n    return 'Fetch';\n}\nfunction truncateResponseStream(stream, bytesLimit, callback) {\n    readBytesFromStream(stream, function (error, bytes, limitExceeded) {\n        if (error) {\n            callback(error);\n        }\n        else {\n            var responseText = new TextDecoder().decode(bytes);\n            if (limitExceeded) {\n                responseText += '...';\n            }\n            callback(undefined, responseText);\n        }\n    }, {\n        bytesLimit: bytesLimit,\n        collectStreamBody: true,\n    });\n}\n//# sourceMappingURL=networkErrorCollection.js.map","import { monitor } from './monitor';\nimport { noop } from './utils/functionUtils';\n/**\n * Read bytes from a ReadableStream until at least `limit` bytes have been read (or until the end of\n * the stream). The callback is invoked with the at most `limit` bytes, and indicates that the limit\n * has been exceeded if more bytes were available.\n */\nexport function readBytesFromStream(stream, callback, options) {\n    var reader = stream.getReader();\n    var chunks = [];\n    var readBytesCount = 0;\n    readMore();\n    function readMore() {\n        reader.read().then(monitor(function (result) {\n            if (result.done) {\n                onDone();\n                return;\n            }\n            if (options.collectStreamBody) {\n                chunks.push(result.value);\n            }\n            readBytesCount += result.value.length;\n            if (readBytesCount > options.bytesLimit) {\n                onDone();\n            }\n            else {\n                readMore();\n            }\n        }), monitor(function (error) { return callback(error); }));\n    }\n    function onDone() {\n        reader.cancel().catch(\n        // we don't care if cancel fails, but we still need to catch the error to avoid reporting it\n        // as an unhandled rejection\n        noop);\n        var bytes;\n        var limitExceeded;\n        if (options.collectStreamBody) {\n            var completeBuffer_1;\n            if (chunks.length === 1) {\n                // optimization: if the response is small enough to fit in a single buffer (provided by the browser), just\n                // use it directly.\n                completeBuffer_1 = chunks[0];\n            }\n            else {\n                // else, we need to copy buffers into a larger buffer to concatenate them.\n                completeBuffer_1 = new Uint8Array(readBytesCount);\n                var offset_1 = 0;\n                chunks.forEach(function (chunk) {\n                    completeBuffer_1.set(chunk, offset_1);\n                    offset_1 += chunk.length;\n                });\n            }\n            bytes = completeBuffer_1.slice(0, options.bytesLimit);\n            limitExceeded = completeBuffer_1.length > options.bytesLimit;\n        }\n        callback(undefined, bytes, limitExceeded);\n    }\n}\n//# sourceMappingURL=readBytesFromStream.js.map","import { instrumentMethod } from '../../tools/instrumentMethod';\nimport { clocksNow } from '../../tools/utils/timeUtils';\nimport { computeStackTrace, computeStackTraceFromOnErrorMessage } from '../../tools/stackTrace/computeStackTrace';\nimport { computeRawError } from './error';\nimport { ErrorSource } from './error.types';\nexport function trackRuntimeError(errorObservable) {\n    var handleRuntimeError = function (stackTrace, originalError) {\n        var rawError = computeRawError({\n            stackTrace: stackTrace,\n            originalError: originalError,\n            startClocks: clocksNow(),\n            nonErrorPrefix: \"Uncaught\" /* NonErrorPrefix.UNCAUGHT */,\n            source: ErrorSource.SOURCE,\n            handling: \"unhandled\" /* ErrorHandling.UNHANDLED */,\n        });\n        errorObservable.notify(rawError);\n    };\n    var stopInstrumentingOnError = instrumentOnError(handleRuntimeError).stop;\n    var stopInstrumentingOnUnhandledRejection = instrumentUnhandledRejection(handleRuntimeError).stop;\n    return {\n        stop: function () {\n            stopInstrumentingOnError();\n            stopInstrumentingOnUnhandledRejection();\n        },\n    };\n}\nexport function instrumentOnError(callback) {\n    return instrumentMethod(window, 'onerror', function (_a) {\n        var _b = _a.parameters, messageObj = _b[0], url = _b[1], line = _b[2], column = _b[3], errorObj = _b[4];\n        var stackTrace;\n        if (errorObj instanceof Error) {\n            stackTrace = computeStackTrace(errorObj);\n        }\n        else {\n            stackTrace = computeStackTraceFromOnErrorMessage(messageObj, url, line, column);\n        }\n        callback(stackTrace, errorObj !== null && errorObj !== void 0 ? errorObj : messageObj);\n    });\n}\nexport function instrumentUnhandledRejection(callback) {\n    return instrumentMethod(window, 'onunhandledrejection', function (_a) {\n        var e = _a.parameters[0];\n        var reason = e.reason || 'Empty reason';\n        var stack = computeStackTrace(reason);\n        callback(stack, reason);\n    });\n}\n//# sourceMappingURL=trackRuntimeError.js.map","// eslint-disable-next-line no-restricted-syntax\nvar AbstractLifeCycle = /** @class */ (function () {\n    function AbstractLifeCycle() {\n        this.callbacks = {};\n    }\n    AbstractLifeCycle.prototype.notify = function (eventType, data) {\n        var eventCallbacks = this.callbacks[eventType];\n        if (eventCallbacks) {\n            eventCallbacks.forEach(function (callback) { return callback(data); });\n        }\n    };\n    AbstractLifeCycle.prototype.subscribe = function (eventType, callback) {\n        var _this = this;\n        if (!this.callbacks[eventType]) {\n            this.callbacks[eventType] = [];\n        }\n        this.callbacks[eventType].push(callback);\n        return {\n            unsubscribe: function () {\n                _this.callbacks[eventType] = _this.callbacks[eventType].filter(function (other) { return callback !== other; });\n            },\n        };\n    };\n    return AbstractLifeCycle;\n}());\nexport { AbstractLifeCycle };\n//# sourceMappingURL=abstractLifeCycle.js.map","var _a;\nimport { combine, ErrorSource, timeStampNow, originalConsoleMethods, globalConsole, ConsoleApiName, } from '@datadog/browser-core';\nimport { HandlerType } from '../logger';\nimport { isAuthorized, StatusType } from './isAuthorized';\nexport function startLoggerCollection(lifeCycle) {\n    function handleLog(logsMessage, logger, handlingStack, savedCommonContext, savedDate) {\n        var messageContext = combine(logger.getContext(), logsMessage.context);\n        if (isAuthorized(logsMessage.status, HandlerType.console, logger)) {\n            displayInConsole(logsMessage, messageContext);\n        }\n        if (isAuthorized(logsMessage.status, HandlerType.http, logger)) {\n            var rawLogEventData = {\n                rawLogsEvent: {\n                    date: savedDate || timeStampNow(),\n                    message: logsMessage.message,\n                    status: logsMessage.status,\n                    origin: ErrorSource.LOGGER,\n                },\n                messageContext: messageContext,\n                savedCommonContext: savedCommonContext,\n            };\n            if (handlingStack) {\n                rawLogEventData.domainContext = { handlingStack: handlingStack };\n            }\n            lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, rawLogEventData);\n        }\n    }\n    return {\n        handleLog: handleLog,\n    };\n}\nvar loggerToConsoleApiName = (_a = {},\n    _a[StatusType.ok] = ConsoleApiName.debug,\n    _a[StatusType.debug] = ConsoleApiName.debug,\n    _a[StatusType.info] = ConsoleApiName.info,\n    _a[StatusType.notice] = ConsoleApiName.info,\n    _a[StatusType.warn] = ConsoleApiName.warn,\n    _a[StatusType.error] = ConsoleApiName.error,\n    _a[StatusType.critical] = ConsoleApiName.error,\n    _a[StatusType.alert] = ConsoleApiName.error,\n    _a[StatusType.emerg] = ConsoleApiName.error,\n    _a);\nfunction displayInConsole(_a, messageContext) {\n    var status = _a.status, message = _a.message;\n    originalConsoleMethods[loggerToConsoleApiName[status]].call(globalConsole, message, messageContext);\n}\n//# sourceMappingURL=loggerCollection.js.map","import { AbstractLifeCycle } from '@datadog/browser-core';\nexport var LifeCycle = (AbstractLifeCycle);\n//# sourceMappingURL=lifeCycle.js.map","import { DOCS_TROUBLESHOOTING, MORE_DETAILS, display } from '../tools/display';\nimport { objectValues } from '../tools/utils/polyfills';\nimport { isPageExitReason } from '../browser/pageExitObservable';\nimport { jsonStringify } from '../tools/serialisation/jsonStringify';\nimport { computeBytesCount } from '../tools/utils/byteUtils';\nexport function createBatch(_a) {\n    var encoder = _a.encoder, request = _a.request, flushController = _a.flushController, messageBytesLimit = _a.messageBytesLimit;\n    var upsertBuffer = {};\n    var flushSubscription = flushController.flushObservable.subscribe(function (event) { return flush(event); });\n    function push(serializedMessage, estimatedMessageBytesCount, key) {\n        flushController.notifyBeforeAddMessage(estimatedMessageBytesCount);\n        if (key !== undefined) {\n            upsertBuffer[key] = serializedMessage;\n            flushController.notifyAfterAddMessage();\n        }\n        else {\n            encoder.write(encoder.isEmpty ? serializedMessage : \"\\n\".concat(serializedMessage), function (realMessageBytesCount) {\n                flushController.notifyAfterAddMessage(realMessageBytesCount - estimatedMessageBytesCount);\n            });\n        }\n    }\n    function hasMessageFor(key) {\n        return key !== undefined && upsertBuffer[key] !== undefined;\n    }\n    function remove(key) {\n        var removedMessage = upsertBuffer[key];\n        delete upsertBuffer[key];\n        var messageBytesCount = encoder.estimateEncodedBytesCount(removedMessage);\n        flushController.notifyAfterRemoveMessage(messageBytesCount);\n    }\n    function addOrUpdate(message, key) {\n        var serializedMessage = jsonStringify(message);\n        var estimatedMessageBytesCount = encoder.estimateEncodedBytesCount(serializedMessage);\n        if (estimatedMessageBytesCount >= messageBytesLimit) {\n            display.warn(\"Discarded a message whose size was bigger than the maximum allowed size \".concat(messageBytesLimit, \"KB. \").concat(MORE_DETAILS, \" \").concat(DOCS_TROUBLESHOOTING, \"/#technical-limitations\"));\n            return;\n        }\n        if (hasMessageFor(key)) {\n            remove(key);\n        }\n        push(serializedMessage, estimatedMessageBytesCount, key);\n    }\n    function flush(event) {\n        var upsertMessages = objectValues(upsertBuffer).join('\\n');\n        upsertBuffer = {};\n        var isPageExit = isPageExitReason(event.reason);\n        var send = isPageExit ? request.sendOnExit : request.send;\n        if (isPageExit &&\n            // Note: checking that the encoder is async is not strictly needed, but it's an optimization:\n            // if the encoder is async we need to send two requests in some cases (one for encoded data\n            // and the other for non-encoded data). But if it's not async, we don't have to worry about\n            // it and always send a single request.\n            encoder.isAsync) {\n            var encoderResult = encoder.finishSync();\n            // Send encoded messages\n            if (encoderResult.outputBytesCount) {\n                send(formatPayloadFromEncoder(encoderResult));\n            }\n            // Send messages that are not yet encoded at this point\n            var pendingMessages = [encoderResult.pendingData, upsertMessages].filter(Boolean).join('\\n');\n            if (pendingMessages) {\n                send({\n                    data: pendingMessages,\n                    bytesCount: computeBytesCount(pendingMessages),\n                });\n            }\n        }\n        else {\n            if (upsertMessages) {\n                encoder.write(encoder.isEmpty ? upsertMessages : \"\\n\".concat(upsertMessages));\n            }\n            encoder.finish(function (encoderResult) {\n                send(formatPayloadFromEncoder(encoderResult));\n            });\n        }\n    }\n    return {\n        flushController: flushController,\n        add: addOrUpdate,\n        upsert: addOrUpdate,\n        stop: flushSubscription.unsubscribe,\n    };\n}\nfunction formatPayloadFromEncoder(encoderResult) {\n    var data;\n    if (typeof encoderResult.output === 'string') {\n        data = encoderResult.output;\n    }\n    else {\n        data = new Blob([encoderResult.output], {\n            // This will set the 'Content-Type: text/plain' header. Reasoning:\n            // * The intake rejects the request if there is no content type.\n            // * The browser will issue CORS preflight requests if we set it to 'application/json', which\n            // could induce higher intake load (and maybe has other impacts).\n            // * Also it's not quite JSON, since we are concatenating multiple JSON objects separated by\n            // new lines.\n            type: 'text/plain',\n        });\n    }\n    return {\n        data: data,\n        bytesCount: encoderResult.outputBytesCount,\n        encoding: encoderResult.encoding,\n    };\n}\n//# sourceMappingURL=batch.js.map","import { setTimeout } from '../tools/timer';\nimport { clocksNow, ONE_MINUTE, ONE_SECOND } from '../tools/utils/timeUtils';\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../tools/utils/byteUtils';\nimport { isServerError } from '../tools/utils/responseUtils';\nimport { ErrorSource } from '../domain/error/error.types';\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE;\nexport var MAX_ONGOING_REQUESTS = 32;\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE;\nexport var MAX_BACKOFF_TIME = ONE_MINUTE;\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND;\nexport function sendWithRetryStrategy(payload, state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus === 0 /* TransportStatus.UP */ &&\n        state.queuedPayloads.size() === 0 &&\n        state.bandwidthMonitor.canHandle(payload)) {\n        send(payload, state, sendStrategy, {\n            onSuccess: function () { return retryQueuedPayloads(0 /* RetryReason.AFTER_SUCCESS */, state, sendStrategy, trackType, reportError); },\n            onFailure: function () {\n                state.queuedPayloads.enqueue(payload);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }\n    else {\n        state.queuedPayloads.enqueue(payload);\n    }\n}\nfunction scheduleRetry(state, sendStrategy, trackType, reportError) {\n    if (state.transportStatus !== 2 /* TransportStatus.DOWN */) {\n        return;\n    }\n    setTimeout(function () {\n        var payload = state.queuedPayloads.first();\n        send(payload, state, sendStrategy, {\n            onSuccess: function () {\n                state.queuedPayloads.dequeue();\n                state.currentBackoffTime = INITIAL_BACKOFF_TIME;\n                retryQueuedPayloads(1 /* RetryReason.AFTER_RESUME */, state, sendStrategy, trackType, reportError);\n            },\n            onFailure: function () {\n                state.currentBackoffTime = Math.min(MAX_BACKOFF_TIME, state.currentBackoffTime * 2);\n                scheduleRetry(state, sendStrategy, trackType, reportError);\n            },\n        });\n    }, state.currentBackoffTime);\n}\nfunction send(payload, state, sendStrategy, _a) {\n    var onSuccess = _a.onSuccess, onFailure = _a.onFailure;\n    state.bandwidthMonitor.add(payload);\n    sendStrategy(payload, function (response) {\n        state.bandwidthMonitor.remove(payload);\n        if (!shouldRetryRequest(response)) {\n            state.transportStatus = 0 /* TransportStatus.UP */;\n            onSuccess();\n        }\n        else {\n            // do not consider transport down if another ongoing request could succeed\n            state.transportStatus =\n                state.bandwidthMonitor.ongoingRequestCount > 0 ? 1 /* TransportStatus.FAILURE_DETECTED */ : 2 /* TransportStatus.DOWN */;\n            payload.retry = {\n                count: payload.retry ? payload.retry.count + 1 : 1,\n                lastFailureStatus: response.status,\n            };\n            onFailure();\n        }\n    });\n}\nfunction retryQueuedPayloads(reason, state, sendStrategy, trackType, reportError) {\n    if (reason === 0 /* RetryReason.AFTER_SUCCESS */ && state.queuedPayloads.isFull() && !state.queueFullReported) {\n        reportError({\n            message: \"Reached max \".concat(trackType, \" events size queued for upload: \").concat(MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE, \"MiB\"),\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow(),\n        });\n        state.queueFullReported = true;\n    }\n    var previousQueue = state.queuedPayloads;\n    state.queuedPayloads = newPayloadQueue();\n    while (previousQueue.size() > 0) {\n        sendWithRetryStrategy(previousQueue.dequeue(), state, sendStrategy, trackType, reportError);\n    }\n}\nfunction shouldRetryRequest(response) {\n    return (response.type !== 'opaque' &&\n        ((response.status === 0 && !navigator.onLine) ||\n            response.status === 408 ||\n            response.status === 429 ||\n            isServerError(response.status)));\n}\nexport function newRetryState() {\n    return {\n        transportStatus: 0 /* TransportStatus.UP */,\n        currentBackoffTime: INITIAL_BACKOFF_TIME,\n        bandwidthMonitor: newBandwidthMonitor(),\n        queuedPayloads: newPayloadQueue(),\n        queueFullReported: false,\n    };\n}\nfunction newPayloadQueue() {\n    var queue = [];\n    return {\n        bytesCount: 0,\n        enqueue: function (payload) {\n            if (this.isFull()) {\n                return;\n            }\n            queue.push(payload);\n            this.bytesCount += payload.bytesCount;\n        },\n        first: function () {\n            return queue[0];\n        },\n        dequeue: function () {\n            var payload = queue.shift();\n            if (payload) {\n                this.bytesCount -= payload.bytesCount;\n            }\n            return payload;\n        },\n        size: function () {\n            return queue.length;\n        },\n        isFull: function () {\n            return this.bytesCount >= MAX_QUEUE_BYTES_COUNT;\n        },\n    };\n}\nfunction newBandwidthMonitor() {\n    return {\n        ongoingRequestCount: 0,\n        ongoingByteCount: 0,\n        canHandle: function (payload) {\n            return (this.ongoingRequestCount === 0 ||\n                (this.ongoingByteCount + payload.bytesCount <= MAX_ONGOING_BYTES_COUNT &&\n                    this.ongoingRequestCount < MAX_ONGOING_REQUESTS));\n        },\n        add: function (payload) {\n            this.ongoingRequestCount += 1;\n            this.ongoingByteCount += payload.bytesCount;\n        },\n        remove: function (payload) {\n            this.ongoingRequestCount -= 1;\n            this.ongoingByteCount -= payload.bytesCount;\n        },\n    };\n}\n//# sourceMappingURL=sendWithRetryStrategy.js.map","import { addTelemetryError } from '../domain/telemetry';\nimport { monitor } from '../tools/monitor';\nimport { addEventListener } from '../browser/addEventListener';\nimport { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy';\nexport function createHttpRequest(configuration, endpointBuilder, bytesLimit, reportError) {\n    var retryState = newRetryState();\n    var sendStrategyForRetry = function (payload, onResponse) {\n        return fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse);\n    };\n    return {\n        send: function (payload) {\n            sendWithRetryStrategy(payload, retryState, sendStrategyForRetry, endpointBuilder.trackType, reportError);\n        },\n        /**\n         * Since fetch keepalive behaves like regular fetch on Firefox,\n         * keep using sendBeaconStrategy on exit\n         */\n        sendOnExit: function (payload) {\n            sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload);\n        },\n    };\n}\nfunction sendBeaconStrategy(configuration, endpointBuilder, bytesLimit, payload) {\n    var canUseBeacon = !!navigator.sendBeacon && payload.bytesCount < bytesLimit;\n    if (canUseBeacon) {\n        try {\n            var beaconUrl = endpointBuilder.build('beacon', payload);\n            var isQueued = navigator.sendBeacon(beaconUrl, payload.data);\n            if (isQueued) {\n                return;\n            }\n        }\n        catch (e) {\n            reportBeaconError(e);\n        }\n    }\n    var xhrUrl = endpointBuilder.build('xhr', payload);\n    sendXHR(configuration, xhrUrl, payload.data);\n}\nvar hasReportedBeaconError = false;\nfunction reportBeaconError(e) {\n    if (!hasReportedBeaconError) {\n        hasReportedBeaconError = true;\n        addTelemetryError(e);\n    }\n}\nexport function fetchKeepAliveStrategy(configuration, endpointBuilder, bytesLimit, payload, onResponse) {\n    var canUseKeepAlive = isKeepAliveSupported() && payload.bytesCount < bytesLimit;\n    if (canUseKeepAlive) {\n        var fetchUrl = endpointBuilder.build('fetch', payload);\n        fetch(fetchUrl, { method: 'POST', body: payload.data, keepalive: true, mode: 'cors' }).then(monitor(function (response) { return onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: response.status, type: response.type }); }), monitor(function () {\n            var xhrUrl = endpointBuilder.build('xhr', payload);\n            // failed to queue the request\n            sendXHR(configuration, xhrUrl, payload.data, onResponse);\n        }));\n    }\n    else {\n        var xhrUrl = endpointBuilder.build('xhr', payload);\n        sendXHR(configuration, xhrUrl, payload.data, onResponse);\n    }\n}\nfunction isKeepAliveSupported() {\n    // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n    try {\n        return window.Request && 'keepalive' in new Request('http://a');\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexport function sendXHR(configuration, url, data, onResponse) {\n    var request = new XMLHttpRequest();\n    request.open('POST', url, true);\n    if (data instanceof Blob) {\n        // When using a Blob instance, IE does not use its 'type' to define the 'Content-Type' header\n        // automatically, so the intake request ends up being rejected with an HTTP status 415\n        // Defining the header manually fixes this issue.\n        request.setRequestHeader('Content-Type', data.type);\n    }\n    addEventListener(configuration, request, 'loadend', function () {\n        onResponse === null || onResponse === void 0 ? void 0 : onResponse({ status: request.status });\n    }, {\n        // prevent multiple onResponse callbacks\n        // if the xhr instance is reused by a third party\n        once: true,\n    });\n    request.send(data);\n}\n//# sourceMappingURL=httpRequest.js.map","import { Observable } from '../tools/observable';\nimport { clearTimeout, setTimeout } from '../tools/timer';\n/**\n * Returns a \"flush controller\", responsible of notifying when flushing a pool of pending data needs\n * to happen. The implementation is designed to support both synchronous and asynchronous usages,\n * but relies on invariants described in each method documentation to keep a coherent state.\n */\nexport function createFlushController(_a) {\n    var messagesLimit = _a.messagesLimit, bytesLimit = _a.bytesLimit, durationLimit = _a.durationLimit, pageExitObservable = _a.pageExitObservable, sessionExpireObservable = _a.sessionExpireObservable;\n    var pageExitSubscription = pageExitObservable.subscribe(function (event) { return flush(event.reason); });\n    var sessionExpireSubscription = sessionExpireObservable.subscribe(function () { return flush('session_expire'); });\n    var flushObservable = new Observable(function () { return function () {\n        pageExitSubscription.unsubscribe();\n        sessionExpireSubscription.unsubscribe();\n    }; });\n    var currentBytesCount = 0;\n    var currentMessagesCount = 0;\n    function flush(flushReason) {\n        if (currentMessagesCount === 0) {\n            return;\n        }\n        var messagesCount = currentMessagesCount;\n        var bytesCount = currentBytesCount;\n        currentMessagesCount = 0;\n        currentBytesCount = 0;\n        cancelDurationLimitTimeout();\n        flushObservable.notify({\n            reason: flushReason,\n            messagesCount: messagesCount,\n            bytesCount: bytesCount,\n        });\n    }\n    var durationLimitTimeoutId;\n    function scheduleDurationLimitTimeout() {\n        if (durationLimitTimeoutId === undefined) {\n            durationLimitTimeoutId = setTimeout(function () {\n                flush('duration_limit');\n            }, durationLimit);\n        }\n    }\n    function cancelDurationLimitTimeout() {\n        clearTimeout(durationLimitTimeoutId);\n        durationLimitTimeoutId = undefined;\n    }\n    return {\n        flushObservable: flushObservable,\n        get messagesCount() {\n            return currentMessagesCount;\n        },\n        /**\n         * Notifies that a message will be added to a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right before adding the message, so no flush\n         * event can happen after `notifyBeforeAddMessage` and before adding the message.\n         *\n         * @param estimatedMessageBytesCount: an estimation of the message bytes count once it is\n         * actually added.\n         */\n        notifyBeforeAddMessage: function (estimatedMessageBytesCount) {\n            if (currentBytesCount + estimatedMessageBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n            // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no\n            // message was added yet and `notifyAfterAddMessage` is called asynchronously, we still want\n            // to notify when a flush is needed (for example on page exit).\n            currentMessagesCount += 1;\n            currentBytesCount += estimatedMessageBytesCount;\n            scheduleDurationLimitTimeout();\n        },\n        /**\n         * Notifies that a message *was* added to a pool of pending messages waiting to be flushed.\n         *\n         * This function can be called asynchronously after the message was added, but in this case it\n         * should not be called if a flush event occurred in between.\n         *\n         * @param messageBytesCountDiff: the difference between the estimated message bytes count and\n         * its actual bytes count once added to the pool.\n         */\n        notifyAfterAddMessage: function (messageBytesCountDiff) {\n            if (messageBytesCountDiff === void 0) { messageBytesCountDiff = 0; }\n            currentBytesCount += messageBytesCountDiff;\n            if (currentMessagesCount >= messagesLimit) {\n                flush('messages_limit');\n            }\n            else if (currentBytesCount >= bytesLimit) {\n                flush('bytes_limit');\n            }\n        },\n        /**\n         * Notifies that a message was removed from a pool of pending messages waiting to be flushed.\n         *\n         * This function needs to be called synchronously, right after removing the message, so no flush\n         * event can happen after removing the message and before `notifyAfterRemoveMessage`.\n         *\n         * @param messageBytesCount: the message bytes count that was added to the pool. Should\n         * correspond to the sum of bytes counts passed to `notifyBeforeAddMessage` and\n         * `notifyAfterAddMessage`.\n         */\n        notifyAfterRemoveMessage: function (messageBytesCount) {\n            currentBytesCount -= messageBytesCount;\n            currentMessagesCount -= 1;\n            if (currentMessagesCount === 0) {\n                cancelDurationLimitTimeout();\n            }\n        },\n    };\n}\n//# sourceMappingURL=flushController.js.map","import { createBatch } from './batch';\nimport { createHttpRequest } from './httpRequest';\nimport { createFlushController } from './flushController';\nexport function startBatchWithReplica(configuration, primary, replica, reportError, pageExitObservable, sessionExpireObservable, batchFactoryImp) {\n    if (batchFactoryImp === void 0) { batchFactoryImp = createBatch; }\n    var primaryBatch = createBatchFromConfig(configuration, primary);\n    var replicaBatch = replica && createBatchFromConfig(configuration, replica);\n    function createBatchFromConfig(configuration, _a) {\n        var endpoint = _a.endpoint, encoder = _a.encoder;\n        return batchFactoryImp({\n            encoder: encoder,\n            request: createHttpRequest(configuration, endpoint, configuration.batchBytesLimit, reportError),\n            flushController: createFlushController({\n                messagesLimit: configuration.batchMessagesLimit,\n                bytesLimit: configuration.batchBytesLimit,\n                durationLimit: configuration.flushTimeout,\n                pageExitObservable: pageExitObservable,\n                sessionExpireObservable: sessionExpireObservable,\n            }),\n            messageBytesLimit: configuration.messageBytesLimit,\n        });\n    }\n    return {\n        flushObservable: primaryBatch.flushController.flushObservable,\n        add: function (message, replicated) {\n            if (replicated === void 0) { replicated = true; }\n            primaryBatch.add(message);\n            if (replicaBatch && replicated) {\n                replicaBatch.add(replica.transformMessage ? replica.transformMessage(message) : message);\n            }\n        },\n        upsert: function (message, key) {\n            primaryBatch.upsert(message, key);\n            if (replicaBatch) {\n                replicaBatch.upsert(replica.transformMessage ? replica.transformMessage(message) : message, key);\n            }\n        },\n        stop: function () {\n            primaryBatch.stop();\n            if (replicaBatch) {\n                replicaBatch.stop();\n            }\n        },\n    };\n}\n//# sourceMappingURL=startBatchWithReplica.js.map","import { computeBytesCount } from './utils/byteUtils';\nexport function createIdentityEncoder() {\n    var output = '';\n    var outputBytesCount = 0;\n    return {\n        isAsync: false,\n        get isEmpty() {\n            return !output;\n        },\n        write: function (data, callback) {\n            var additionalEncodedBytesCount = computeBytesCount(data);\n            outputBytesCount += additionalEncodedBytesCount;\n            output += data;\n            if (callback) {\n                callback(additionalEncodedBytesCount);\n            }\n        },\n        finish: function (callback) {\n            callback(this.finishSync());\n        },\n        finishSync: function () {\n            var result = {\n                output: output,\n                outputBytesCount: outputBytesCount,\n                rawBytesCount: outputBytesCount,\n                pendingData: '',\n            };\n            output = '';\n            outputBytesCount = 0;\n            return result;\n        },\n        estimateEncodedBytesCount: function (data) {\n            return data.length;\n        },\n    };\n}\n//# sourceMappingURL=encoder.js.map","import { startTelemetry, canUseEventBridge, getEventBridge, startBatchWithReplica, createIdentityEncoder, isTelemetryReplicationAllowed, addTelemetryConfiguration, drainPreStartTelemetry, } from '@datadog/browser-core';\nimport { getRUMInternalContext } from './contexts/rumInternalContext';\nimport { serializeLogsConfiguration } from './configuration';\nexport function startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session) {\n    var telemetry = startTelemetry(\"browser-logs-sdk\" /* TelemetryService.LOGS */, configuration);\n    telemetry.setContextProvider(function () {\n        var _a, _b, _c, _d, _e, _f;\n        return ({\n            application: {\n                id: (_a = getRUMInternalContext()) === null || _a === void 0 ? void 0 : _a.application_id,\n            },\n            session: {\n                id: (_b = session.findTrackedSession()) === null || _b === void 0 ? void 0 : _b.id,\n            },\n            view: {\n                id: (_d = (_c = getRUMInternalContext()) === null || _c === void 0 ? void 0 : _c.view) === null || _d === void 0 ? void 0 : _d.id,\n            },\n            action: {\n                id: (_f = (_e = getRUMInternalContext()) === null || _e === void 0 ? void 0 : _e.user_action) === null || _f === void 0 ? void 0 : _f.id,\n            },\n        });\n    });\n    var cleanupTasks = [];\n    if (canUseEventBridge()) {\n        var bridge_1 = getEventBridge();\n        var telemetrySubscription_1 = telemetry.observable.subscribe(function (event) { return bridge_1.send('internal_telemetry', event); });\n        cleanupTasks.push(function () { return telemetrySubscription_1.unsubscribe(); });\n    }\n    else {\n        var telemetryBatch_1 = startBatchWithReplica(configuration, {\n            endpoint: configuration.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, configuration.replica && {\n            endpoint: configuration.replica.rumEndpointBuilder,\n            encoder: createIdentityEncoder(),\n        }, reportError, pageExitObservable, session.expireObservable);\n        cleanupTasks.push(function () { return telemetryBatch_1.stop(); });\n        var telemetrySubscription_2 = telemetry.observable.subscribe(function (event) {\n            return telemetryBatch_1.add(event, isTelemetryReplicationAllowed(configuration));\n        });\n        cleanupTasks.push(function () { return telemetrySubscription_2.unsubscribe(); });\n    }\n    drainPreStartTelemetry();\n    addTelemetryConfiguration(serializeLogsConfiguration(initConfiguration));\n    return {\n        telemetry: telemetry,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n//# sourceMappingURL=logsTelemetry.js.map","import { defineGlobal, getGlobalObject } from '@datadog/browser-core';\nimport { makeLogsPublicApi } from '../boot/logsPublicApi';\nimport { startLogs } from '../boot/startLogs';\nexport { Logger, HandlerType } from '../domain/logger';\nexport { StatusType } from '../domain/logger/isAuthorized';\nexport var datadogLogs = makeLogsPublicApi(startLogs);\ndefineGlobal(getGlobalObject(), 'DD_LOGS', datadogLogs);\n//# sourceMappingURL=main.js.map","export function buildCommonContext(globalContextManager, userContextManager) {\n    return {\n        view: {\n            referrer: document.referrer,\n            url: window.location.href,\n        },\n        context: globalContextManager.getContext(),\n        user: userContextManager.getContext(),\n    };\n}\n//# sourceMappingURL=commonContext.js.map","import { catchUserErrors } from '../tools/catchUserErrors';\nimport { setDebugMode } from '../tools/monitor';\nimport { assign } from '../tools/utils/polyfills';\nimport { display } from '../tools/display';\nexport function makePublicApi(stub) {\n    var publicApi = assign({\n        version: \"5.28.1\",\n        // This API method is intentionally not monitored, since the only thing executed is the\n        // user-provided 'callback'.  All SDK usages executed in the callback should be monitored, and\n        // we don't want to interfere with the user uncaught exceptions.\n        onReady: function (callback) {\n            callback();\n        },\n    }, stub);\n    // Add a \"hidden\" property to set debug mode. We define it that way to hide it\n    // as much as possible but of course it's not a real protection.\n    Object.defineProperty(publicApi, '_setDebug', {\n        get: function () {\n            return setDebugMode;\n        },\n        enumerable: false,\n    });\n    return publicApi;\n}\nexport function defineGlobal(global, name, api) {\n    var existingGlobalVariable = global[name];\n    if (existingGlobalVariable && !existingGlobalVariable.q && existingGlobalVariable.version) {\n        display.warn('SDK is loaded more than once. This is unsupported and might have unexpected behavior.');\n    }\n    global[name] = api;\n    if (existingGlobalVariable && existingGlobalVariable.q) {\n        existingGlobalVariable.q.forEach(function (fn) { return catchUserErrors(fn, 'onReady callback threw an error:')(); });\n    }\n}\n//# sourceMappingURL=init.js.map","import { sendToExtension, createPageExitObservable, willSyntheticsInjectRum, canUseEventBridge, } from '@datadog/browser-core';\nimport { startLogsSessionManager, startLogsSessionManagerStub } from '../domain/logsSessionManager';\nimport { startLogsAssembly } from '../domain/assembly';\nimport { startConsoleCollection } from '../domain/console/consoleCollection';\nimport { startReportCollection } from '../domain/report/reportCollection';\nimport { startNetworkErrorCollection } from '../domain/networkError/networkErrorCollection';\nimport { startRuntimeErrorCollection } from '../domain/runtimeError/runtimeErrorCollection';\nimport { LifeCycle } from '../domain/lifeCycle';\nimport { startLoggerCollection } from '../domain/logger/loggerCollection';\nimport { startLogsBatch } from '../transport/startLogsBatch';\nimport { startLogsBridge } from '../transport/startLogsBridge';\nimport { startInternalContext } from '../domain/contexts/internalContext';\nimport { startReportError } from '../domain/reportError';\nimport { startLogsTelemetry } from '../domain/logsTelemetry';\nexport function startLogs(initConfiguration, configuration, getCommonContext, \n// `startLogs` and its subcomponents assume tracking consent is granted initially and starts\n// collecting logs unconditionally. As such, `startLogs` should be called with a\n// `trackingConsentState` set to \"granted\".\ntrackingConsentState) {\n    var lifeCycle = new LifeCycle();\n    var cleanupTasks = [];\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (log) { return sendToExtension('logs', log); });\n    var reportError = startReportError(lifeCycle);\n    var pageExitObservable = createPageExitObservable(configuration);\n    var session = configuration.sessionStoreStrategyType && !canUseEventBridge() && !willSyntheticsInjectRum()\n        ? startLogsSessionManager(configuration, trackingConsentState)\n        : startLogsSessionManagerStub(configuration);\n    var stopLogsTelemetry = startLogsTelemetry(initConfiguration, configuration, reportError, pageExitObservable, session).stop;\n    cleanupTasks.push(function () { return stopLogsTelemetry(); });\n    startNetworkErrorCollection(configuration, lifeCycle);\n    startRuntimeErrorCollection(configuration, lifeCycle);\n    startConsoleCollection(configuration, lifeCycle);\n    startReportCollection(configuration, lifeCycle);\n    var handleLog = startLoggerCollection(lifeCycle).handleLog;\n    startLogsAssembly(session, configuration, lifeCycle, getCommonContext, reportError);\n    if (!canUseEventBridge()) {\n        var stopLogsBatch_1 = startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session).stop;\n        cleanupTasks.push(function () { return stopLogsBatch_1(); });\n    }\n    else {\n        startLogsBridge(lifeCycle);\n    }\n    var internalContext = startInternalContext(session);\n    return {\n        handleLog: handleLog,\n        getInternalContext: internalContext.get,\n        stop: function () {\n            cleanupTasks.forEach(function (task) { return task(); });\n        },\n    };\n}\n//# sourceMappingURL=startLogs.js.map","import { ErrorSource, addTelemetryDebug } from '@datadog/browser-core';\nimport { StatusType } from './logger/isAuthorized';\nexport function startReportError(lifeCycle) {\n    return function (error) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: error.message,\n                date: error.startClocks.timeStamp,\n                origin: ErrorSource.AGENT,\n                status: StatusType.error,\n            },\n        });\n        addTelemetryDebug('Error reported to customer', { 'error.message': error.message });\n    };\n}\n//# sourceMappingURL=reportError.js.map","import { noop, ErrorSource, trackRuntimeError, Observable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport function startRuntimeErrorCollection(configuration, lifeCycle) {\n    if (!configuration.forwardErrorsToLogs) {\n        return { stop: noop };\n    }\n    var rawErrorObservable = new Observable();\n    var stopRuntimeErrorTracking = trackRuntimeError(rawErrorObservable).stop;\n    var rawErrorSubscription = rawErrorObservable.subscribe(function (rawError) {\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                message: rawError.message,\n                date: rawError.startClocks.timeStamp,\n                error: createErrorFieldFromRawError(rawError),\n                origin: ErrorSource.SOURCE,\n                status: StatusType.error,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            stopRuntimeErrorTracking();\n            rawErrorSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=runtimeErrorCollection.js.map","import { timeStampNow, ErrorSource, getFileFromStackTraceString, initReportObservable } from '@datadog/browser-core';\nimport { StatusType } from '../logger/isAuthorized';\nimport { createErrorFieldFromRawError } from '../createErrorFieldFromRawError';\nexport function startReportCollection(configuration, lifeCycle) {\n    var reportSubscription = initReportObservable(configuration, configuration.forwardReports).subscribe(function (rawError) {\n        var message = rawError.message;\n        var error;\n        var status = rawError.originalError.type === 'deprecation' ? StatusType.warn : StatusType.error;\n        if (status === StatusType.error) {\n            error = createErrorFieldFromRawError(rawError);\n        }\n        else if (rawError.stack) {\n            message += \" Found in \".concat(getFileFromStackTraceString(rawError.stack));\n        }\n        lifeCycle.notify(0 /* LifeCycleEventType.RAW_LOG_COLLECTED */, {\n            rawLogsEvent: {\n                date: timeStampNow(),\n                message: message,\n                origin: ErrorSource.REPORT,\n                error: error,\n                status: status,\n            },\n        });\n    });\n    return {\n        stop: function () {\n            reportSubscription.unsubscribe();\n        },\n    };\n}\n//# sourceMappingURL=reportCollection.js.map","export function startInternalContext(sessionManager) {\n    return {\n        get: function (startTime) {\n            var trackedSession = sessionManager.findTrackedSession(startTime);\n            if (trackedSession) {\n                return {\n                    session_id: trackedSession.id,\n                };\n            }\n        },\n    };\n}\n//# sourceMappingURL=internalContext.js.map","import { getEventBridge } from '@datadog/browser-core';\nexport function startLogsBridge(lifeCycle) {\n    var bridge = getEventBridge();\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        bridge.send('log', serverLogsEvent);\n    });\n}\n//# sourceMappingURL=startLogsBridge.js.map","import { createIdentityEncoder, startBatchWithReplica } from '@datadog/browser-core';\nexport function startLogsBatch(configuration, lifeCycle, reportError, pageExitObservable, session) {\n    var batch = startBatchWithReplica(configuration, {\n        endpoint: configuration.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, configuration.replica && {\n        endpoint: configuration.replica.logsEndpointBuilder,\n        encoder: createIdentityEncoder(),\n    }, reportError, pageExitObservable, session.expireObservable);\n    lifeCycle.subscribe(1 /* LifeCycleEventType.LOG_COLLECTED */, function (serverLogsEvent) {\n        batch.add(serverLogsEvent);\n    });\n    return batch;\n}\n//# sourceMappingURL=startLogsBatch.js.map","\"use strict\";\nvar _global_process, _global_process1;\nmodule.exports = ((_global_process = global.process) == null ? void 0 : _global_process.env) && typeof ((_global_process1 = global.process) == null ? void 0 : _global_process1.env) === \"object\" ? global.process : require(\"next/dist/compiled/process\");\n\n//# sourceMappingURL=process.js.map","(function(){var e={229:function(e){var t=e.exports={};var r;var n;function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}(function(){try{if(typeof setTimeout===\"function\"){r=setTimeout}else{r=defaultSetTimout}}catch(e){r=defaultSetTimout}try{if(typeof clearTimeout===\"function\"){n=clearTimeout}else{n=defaultClearTimeout}}catch(e){n=defaultClearTimeout}})();function runTimeout(e){if(r===setTimeout){return setTimeout(e,0)}if((r===defaultSetTimout||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout){return clearTimeout(e)}if((n===defaultClearTimeout||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var i=[];var o=false;var u;var a=-1;function cleanUpNextTick(){if(!o||!u){return}o=false;if(u.length){i=u.concat(i)}else{a=-1}if(i.length){drainQueue()}}function drainQueue(){if(o){return}var e=runTimeout(cleanUpNextTick);o=true;var t=i.length;while(t){u=i;i=[];while(++a<t){if(u){u[a].run()}}a=-1;t=i.length}u=null;o=false;runClearTimeout(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new Item(e,t));if(i.length===1&&!o){runTimeout(drainQueue)}};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};t.title=\"browser\";t.browser=true;t.env={};t.argv=[];t.version=\"\";t.versions={};function noop(){}t.on=noop;t.addListener=noop;t.once=noop;t.off=noop;t.removeListener=noop;t.removeAllListeners=noop;t.emit=noop;t.prependListener=noop;t.prependOnceListener=noop;t.listeners=function(e){return[]};t.binding=function(e){throw new Error(\"process.binding is not supported\")};t.cwd=function(){return\"/\"};t.chdir=function(e){throw new Error(\"process.chdir is not supported\")};t.umask=function(){return 0}}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var r=__nccwpck_require__(229);module.exports=r})();","var t=[\"Shift\",\"Meta\",\"Alt\",\"Control\"],e=\"object\"==typeof navigator?navigator.platform:\"\",n=/Mac|iPod|iPhone|iPad/.test(e),o=n?\"Meta\":\"Control\",r=\"Win32\"===e?[\"Control\",\"Alt\"]:n?[\"Alt\"]:[];function i(t,e){return\"function\"==typeof t.getModifierState&&(t.getModifierState(e)||r.includes(e)&&t.getModifierState(\"AltGraph\"))}function a(t){return t.trim().split(\" \").map(function(t){var e=t.split(/\\b\\+/),n=e.pop(),r=n.match(/^\\((.+)\\)$/);return r&&(n=new RegExp(\"^\"+r[1]+\"$\")),[e=e.map(function(t){return\"$mod\"===t?o:t}),n]})}function u(e,n){var o=n[0],r=n[1];return!((r instanceof RegExp?!r.test(e.key)&&!r.test(e.code):r.toUpperCase()!==e.key.toUpperCase()&&r!==e.code)||o.find(function(t){return!i(e,t)})||t.find(function(t){return!o.includes(t)&&r!==t&&i(e,t)}))}function c(t,e){var n;void 0===e&&(e={});var o=null!=(n=e.timeout)?n:1e3,r=Object.keys(t).map(function(e){return[a(e),t[e]]}),c=new Map,f=null;return function(t){t instanceof KeyboardEvent&&(r.forEach(function(e){var n=e[0],o=e[1],r=c.get(n)||n;u(t,r[0])?r.length>1?c.set(n,r.slice(1)):(c.delete(n),o(t)):i(t,t.key)||c.delete(n)}),f&&clearTimeout(f),f=setTimeout(c.clear.bind(c),o))}}function f(t,e,n){var o=void 0===n?{}:n,r=o.event,i=void 0===r?\"keydown\":r,a=o.capture,u=c(e,{timeout:o.timeout});return t.addEventListener(i,u,a),function(){t.removeEventListener(i,u,a)}}export{c as createKeybindingsHandler,u as matchKeyBindingPress,a as parseKeybinding,f as tinykeys};\n//# sourceMappingURL=tinykeys.module.js.map\n","import * as React from 'react';\nimport { useClearPinButton } from '../../hooks';\n\n/** @public */\nexport interface ClearPinButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * The `ClearPinButton` is a basic html button with the added ability to signal\n * the `LayoutContext` that it should display the grid view again.\n * @remarks\n * This component works only inside a `LayoutContext`.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <ClearPinButton>Back to grid view</ClearPinButton>\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const ClearPinButton: (\n  props: ClearPinButtonProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, ClearPinButtonProps>(\n  function ClearPinButton(props: ClearPinButtonProps, ref) {\n    const { buttonProps } = useClearPinButton(props);\n    return (\n      <button ref={ref} {...buttonProps}>\n        {props.children}\n      </button>\n    );\n  },\n);\n","import * as React from 'react';\nimport { useChatToggle } from '../../hooks';\n\n/** @public */\nexport interface ChatToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * The `ChatToggle` component is a button that toggles the visibility of the `Chat` component.\n * @remarks\n * For the component to have any effect it has to live inside a `LayoutContext` context.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <ToggleChat />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const ChatToggle: (\n  props: ChatToggleProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, ChatToggleProps>(\n  function ChatToggle(props: ChatToggleProps, ref) {\n    const { mergedProps } = useChatToggle({ props });\n\n    return (\n      <button ref={ref} {...mergedProps}>\n        {props.children}\n      </button>\n    );\n  },\n);\n","import * as React from 'react';\nimport { useDisconnectButton } from '../../hooks';\n\n/** @public */\nexport interface DisconnectButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  stopTracks?: boolean;\n}\n\n/**\n * The `DisconnectButton` is a basic html button with the added ability to disconnect from a LiveKit room.\n * Normally this is the big red button that allows end users to leave the video or audio call.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <DisconnectButton>Leave room</DisconnectButton>\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const DisconnectButton: (\n  props: DisconnectButtonProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, DisconnectButtonProps>(\n  function DisconnectButton(props: DisconnectButtonProps, ref) {\n    const { buttonProps } = useDisconnectButton(props);\n    return (\n      <button ref={ref} {...buttonProps}>\n        {props.children}\n      </button>\n    );\n  },\n);\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgCameraDisabledIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <path d=\"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" />\n    <path d=\"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" />\n  </svg>\n);\nexport default SvgCameraDisabledIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgCameraIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <path d=\"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" />\n  </svg>\n);\nexport default SvgCameraIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgChatCloseIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} viewBox=\"0 0 24 24\" {...props}>\n    <path\n      fill=\"#FFF\"\n      d=\"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n    />\n  </svg>\n);\nexport default SvgChatCloseIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgChatIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={18} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgChatIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgChevron = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentcolor\"\n      fillRule=\"evenodd\"\n      d=\"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgChevron;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgFocusToggleIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}>\n      <path d=\"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" />\n    </g>\n  </svg>\n);\nexport default SvgFocusToggleIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgGearIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentcolor\"\n      fillRule=\"evenodd\"\n      d=\"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgGearIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgLeaveIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgLeaveIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgLockLockedIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentcolor\"\n      fillRule=\"evenodd\"\n      d=\"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgLockLockedIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgMicDisabledIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <path d=\"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" />\n    <path d=\"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" />\n  </svg>\n);\nexport default SvgMicDisabledIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgMicIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <path\n      fillRule=\"evenodd\"\n      d=\"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\"\n      clipRule=\"evenodd\"\n    />\n    <path d=\"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" />\n  </svg>\n);\nexport default SvgMicIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgQualityExcellentIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n  </svg>\n);\nexport default SvgQualityExcellentIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgQualityGoodIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <g opacity={0.25}>\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityGoodIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgQualityPoorIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <g opacity={0.25}>\n      <path d=\"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityPoorIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgQualityUnknownIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <g opacity={0.25}>\n      <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" />\n      <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityUnknownIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgScreenShareIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={20} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgScreenShareIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgScreenShareStopIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={20} height={16} fill=\"none\" {...props}>\n    <g fill=\"currentColor\">\n      <path d=\"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" />\n      <path\n        fillRule=\"evenodd\"\n        d=\"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\"\n        clipRule=\"evenodd\"\n      />\n    </g>\n  </svg>\n);\nexport default SvgScreenShareStopIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgSpinnerIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\"\n      clipRule=\"evenodd\"\n      opacity={0.7}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\"\n      clipRule=\"evenodd\"\n      opacity={0.6}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\"\n      clipRule=\"evenodd\"\n      opacity={0.5}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\"\n      clipRule=\"evenodd\"\n      opacity={0.4}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\"\n      clipRule=\"evenodd\"\n      opacity={0.9}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\"\n      clipRule=\"evenodd\"\n      opacity={0.3}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\"\n      clipRule=\"evenodd\"\n      opacity={0.8}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\"\n      clipRule=\"evenodd\"\n      opacity={0.2}\n    />\n  </svg>\n);\nexport default SvgSpinnerIcon;\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgUnfocusToggleIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}>\n      <path d=\"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" />\n    </g>\n  </svg>\n);\nexport default SvgUnfocusToggleIcon;\n","import * as React from 'react';\nimport { LayoutContext, useMaybeTrackRefContext } from '../../context';\nimport { FocusToggleIcon, UnfocusToggleIcon } from '../../assets/icons';\nimport { useFocusToggle } from '../../hooks';\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\n\n/** @public */\nexport interface FocusToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  trackRef?: TrackReferenceOrPlaceholder;\n}\n\n/**\n * The `FocusToggle` puts the `ParticipantTile` in focus or removes it from focus.\n * @remarks\n * This component needs to live inside `LayoutContext` to work properly.\n *\n * @example\n * ```tsx\n * <ParticipantTile>\n *   <FocusToggle />\n * </ParticipantTile>\n * ```\n * @public\n */\nexport const FocusToggle: (\n  props: FocusToggleProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, FocusToggleProps>(\n  function FocusToggle({ trackRef, ...props }: FocusToggleProps, ref) {\n    const trackRefFromContext = useMaybeTrackRefContext();\n\n    const { mergedProps, inFocus } = useFocusToggle({\n      trackRef: trackRef ?? trackRefFromContext,\n      props,\n    });\n\n    return (\n      <LayoutContext.Consumer>\n        {(layoutContext) =>\n          layoutContext !== undefined && (\n            <button ref={ref} {...mergedProps}>\n              {props.children ? (\n                props.children\n              ) : inFocus ? (\n                <UnfocusToggleIcon />\n              ) : (\n                <FocusToggleIcon />\n              )}\n            </button>\n          )\n        }\n      </LayoutContext.Consumer>\n    );\n  },\n);\n","import * as React from 'react';\nimport { mergeProps as mergePropsReactAria } from './mergeProps';\nimport { log } from '@livekit/components-core';\nimport clsx from 'clsx';\n\n/** @internal */\nexport function isProp<U extends HTMLElement, T extends React.HTMLAttributes<U>>(\n  prop: T | undefined,\n): prop is T {\n  return prop !== undefined;\n}\n\n/** @internal */\nexport function mergeProps<\n  U extends HTMLElement,\n  T extends Array<React.HTMLAttributes<U> | undefined>,\n>(...props: T) {\n  return mergePropsReactAria(...props.filter(isProp));\n}\n\n/** @internal */\nexport function cloneSingleChild(\n  children: React.ReactNode | React.ReactNode[],\n  props?: Record<string, any>,\n  key?: any,\n) {\n  return React.Children.map(children, (child) => {\n    // Checking isValidElement is the safe way and avoids a typescript\n    // error too.\n    if (React.isValidElement(child) && React.Children.only(children)) {\n      if (child.props.class) {\n        // make sure we retain classnames of both passed props and child\n        props ??= {};\n        props.class = clsx(child.props.class, props.class);\n        props.style = { ...child.props.style, ...props.style };\n      }\n      return React.cloneElement(child, { ...props, key });\n    }\n    return child;\n  });\n}\n\n/**\n * @internal\n */\nexport function warnAboutMissingStyles(el?: HTMLElement) {\n  if (\n    typeof window !== 'undefined' &&\n    typeof process !== 'undefined' &&\n    // eslint-disable-next-line turbo/no-undeclared-env-vars\n    (process?.env?.NODE_ENV === 'dev' ||\n      // eslint-disable-next-line turbo/no-undeclared-env-vars\n      process?.env?.NODE_ENV === 'development')\n  ) {\n    const target = el ?? document.querySelector('.lk-room-container');\n    if (target && !getComputedStyle(target).getPropertyValue('--lk-has-imported-styles')) {\n      log.warn(\n        \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\",\n      );\n    }\n  }\n}\n","import * as React from 'react';\nimport { useMaybeRoomContext } from '../../context';\nimport { mergeProps } from '../../utils';\nimport { RoomEvent, type LocalAudioTrack, type LocalVideoTrack } from 'livekit-client';\nimport { useMediaDeviceSelect } from '../../hooks';\n\n/** @public */\nexport interface MediaDeviceSelectProps\n  extends Omit<React.HTMLAttributes<HTMLUListElement>, 'onError'> {\n  kind: MediaDeviceKind;\n  onActiveDeviceChange?: (deviceId: string) => void;\n  onDeviceListChange?: (devices: MediaDeviceInfo[]) => void;\n  onDeviceSelectError?: (e: Error) => void;\n  initialSelection?: string;\n  /** will force the browser to only return the specified device\n   * will call `onDeviceSelectError` with the error in case this fails\n   */\n  exactMatch?: boolean;\n  track?: LocalAudioTrack | LocalVideoTrack;\n  /**\n   * this will call getUserMedia if the permissions are not yet given to enumerate the devices with device labels.\n   * in some browsers multiple calls to getUserMedia result in multiple permission prompts.\n   * It's generally advised only flip this to true, once a (preview) track has been acquired successfully with the\n   * appropriate permissions.\n   *\n   * @see {@link MediaDeviceMenu}\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices | MDN enumerateDevices}\n   */\n  requestPermissions?: boolean;\n  onError?: (e: Error) => void;\n}\n\n/**\n * The `MediaDeviceSelect` list all media devices of one kind.\n * Clicking on one of the listed devices make it the active media device.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <MediaDeviceSelect kind='audioinput' />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const MediaDeviceSelect: (\n  props: MediaDeviceSelectProps & React.RefAttributes<HTMLUListElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLUListElement, MediaDeviceSelectProps>(\n  function MediaDeviceSelect(\n    {\n      kind,\n      initialSelection,\n      onActiveDeviceChange,\n      onDeviceListChange,\n      onDeviceSelectError,\n      exactMatch,\n      track,\n      requestPermissions,\n      onError,\n      ...props\n    }: MediaDeviceSelectProps,\n    ref,\n  ) {\n    const room = useMaybeRoomContext();\n    const handleError = React.useCallback(\n      (e: Error) => {\n        if (room) {\n          // awkwardly emit the event from outside of the room, as we don't have other means to raise a MediaDeviceError\n          room.emit(RoomEvent.MediaDevicesError, e);\n        }\n        onError?.(e);\n      },\n      [room, onError],\n    );\n    const { devices, activeDeviceId, setActiveMediaDevice, className } = useMediaDeviceSelect({\n      kind,\n      room,\n      track,\n      requestPermissions,\n      onError: handleError,\n    });\n    React.useEffect(() => {\n      if (initialSelection !== undefined) {\n        setActiveMediaDevice(initialSelection);\n      }\n    }, [setActiveMediaDevice]);\n\n    React.useEffect(() => {\n      if (typeof onDeviceListChange === 'function') {\n        onDeviceListChange(devices);\n      }\n    }, [onDeviceListChange, devices]);\n\n    React.useEffect(() => {\n      if (activeDeviceId && activeDeviceId !== '') {\n        onActiveDeviceChange?.(activeDeviceId);\n      }\n    }, [activeDeviceId]);\n\n    const handleActiveDeviceChange = async (deviceId: string) => {\n      try {\n        await setActiveMediaDevice(deviceId, { exact: exactMatch });\n      } catch (e) {\n        if (e instanceof Error) {\n          onDeviceSelectError?.(e);\n        } else {\n          throw e;\n        }\n      }\n    };\n    // Merge Props\n    const mergedProps = React.useMemo(\n      () => mergeProps(props, { className }, { className: 'lk-list' }),\n      [className, props],\n    );\n\n    function isActive(deviceId: string, activeDeviceId: string, index: number) {\n      return deviceId === activeDeviceId || (index === 0 && activeDeviceId === 'default');\n    }\n\n    return (\n      <ul ref={ref} {...mergedProps}>\n        {devices.map((device, index) => (\n          <li\n            key={device.deviceId}\n            id={device.deviceId}\n            data-lk-active={isActive(device.deviceId, activeDeviceId, index)}\n            aria-selected={isActive(device.deviceId, activeDeviceId, index)}\n            role=\"option\"\n          >\n            <button className=\"lk-button\" onClick={() => handleActiveDeviceChange(device.deviceId)}>\n              {device.label}\n            </button>\n          </li>\n        ))}\n      </ul>\n    );\n  },\n);\n","import * as React from 'react';\nimport { useRoomContext } from '../../context';\nimport { useStartAudio, useStartVideo } from '../../hooks';\n\n/** @public */\nexport interface AllowMediaPlaybackProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  label?: string;\n}\n\n/**\n * The `StartMediaButton` component is only visible when the browser blocks media playback. This is due to some browser implemented autoplay policies.\n * To start media playback, the user must perform a user-initiated event such as clicking this button.\n * As soon as media playback starts, the button hides itself again.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <StartMediaButton label=\"Click to allow media playback\" />\n * </LiveKitRoom>\n * ```\n *\n * @see Autoplay policy on MDN web docs: {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Best_practices#autoplay_policy}\n * @public\n */\nexport const StartMediaButton: (\n  props: AllowMediaPlaybackProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, AllowMediaPlaybackProps>(\n  function StartMediaButton({ label, ...props }: AllowMediaPlaybackProps, ref) {\n    const room = useRoomContext();\n    const { mergedProps: audioProps, canPlayAudio } = useStartAudio({ room, props });\n    const { mergedProps, canPlayVideo } = useStartVideo({ room, props: audioProps });\n    const { style, ...restProps } = mergedProps;\n    style.display = canPlayAudio && canPlayVideo ? 'none' : 'block';\n\n    return (\n      <button ref={ref} style={style} {...restProps}>\n        {label ?? `Start ${!canPlayAudio ? 'Audio' : 'Video'}`}\n      </button>\n    );\n  },\n);\n","import * as React from 'react';\nimport { ConnectionQuality, Track } from 'livekit-client';\n\nimport {\n  MicIcon,\n  MicDisabledIcon,\n  CameraIcon,\n  CameraDisabledIcon,\n  QualityUnknownIcon,\n  QualityExcellentIcon,\n  QualityGoodIcon,\n  QualityPoorIcon,\n  ScreenShareIcon,\n  ScreenShareStopIcon,\n} from './index';\n\n/**\n * @internal\n */\nexport function getSourceIcon(source: Track.Source, enabled: boolean) {\n  switch (source) {\n    case Track.Source.Microphone:\n      return enabled ? <MicIcon /> : <MicDisabledIcon />;\n    case Track.Source.Camera:\n      return enabled ? <CameraIcon /> : <CameraDisabledIcon />;\n    case Track.Source.ScreenShare:\n      return enabled ? <ScreenShareStopIcon /> : <ScreenShareIcon />;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * @internal\n */\nexport function getConnectionQualityIcon(quality: ConnectionQuality) {\n  switch (quality) {\n    case ConnectionQuality.Excellent:\n      return <QualityExcellentIcon />;\n    case ConnectionQuality.Good:\n      return <QualityGoodIcon />;\n    case ConnectionQuality.Poor:\n      return <QualityPoorIcon />;\n    default:\n      return <QualityUnknownIcon />;\n  }\n}\n","import type { CaptureOptionsBySource, ToggleSource } from '@livekit/components-core';\nimport * as React from 'react';\nimport { getSourceIcon } from '../../assets/icons/util';\nimport { useTrackToggle } from '../../hooks';\nimport { TrackPublishOptions } from 'livekit-client';\n\n/** @public */\nexport interface TrackToggleProps<T extends ToggleSource>\n  extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'onChange'> {\n  source: T;\n  showIcon?: boolean;\n  initialState?: boolean;\n  /**\n   * Function that is called when the enabled state of the toggle changes.\n   * The second function argument `isUserInitiated` is `true` if the change was initiated by a user interaction, such as a click.\n   */\n  onChange?: (enabled: boolean, isUserInitiated: boolean) => void;\n  captureOptions?: CaptureOptionsBySource<T>;\n  publishOptions?: TrackPublishOptions;\n  onDeviceError?: (error: Error) => void;\n}\n\n/**\n * With the `TrackToggle` component it is possible to mute and unmute your camera and microphone.\n * The component uses an html button element under the hood so you can treat it like a button.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <TrackToggle source={Track.Source.Microphone} />\n *   <TrackToggle source={Track.Source.Camera} />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const TrackToggle: <T extends ToggleSource>(\n  props: TrackToggleProps<T> & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef(function TrackToggle<\n  T extends ToggleSource,\n>({ showIcon, ...props }: TrackToggleProps<T>, ref: React.ForwardedRef<HTMLButtonElement>) {\n  const { buttonProps, enabled } = useTrackToggle(props);\n  return (\n    <button ref={ref} {...buttonProps}>\n      {(showIcon ?? true) && getSourceIcon(props.source, enabled)}\n      {props.children}\n    </button>\n  );\n});\n","import * as React from 'react';\nimport { mergeProps } from '../../utils';\nimport { getConnectionQualityIcon } from '../../assets/icons/util';\nimport type { ConnectionQualityIndicatorOptions } from '../../hooks';\nimport { useConnectionQualityIndicator } from '../../hooks';\n\n/** @public */\nexport interface ConnectionQualityIndicatorProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    ConnectionQualityIndicatorOptions {}\n\n/**\n * The `ConnectionQualityIndicator` shows the individual connection quality of a participant.\n *\n * @example\n * ```tsx\n * <ConnectionQualityIndicator />\n * ```\n * @public\n */\nexport const ConnectionQualityIndicator: (\n  props: ConnectionQualityIndicatorProps & React.RefAttributes<HTMLDivElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<\n  HTMLDivElement,\n  ConnectionQualityIndicatorProps\n>(function ConnectionQualityIndicator(props: ConnectionQualityIndicatorProps, ref) {\n  const { className, quality } = useConnectionQualityIndicator(props);\n  const elementProps = React.useMemo(() => {\n    return { ...mergeProps(props, { className: className as string }), 'data-lk-quality': quality };\n  }, [quality, props, className]);\n  return (\n    <div ref={ref} {...elementProps}>\n      {props.children ?? getConnectionQualityIcon(quality)}\n    </div>\n  );\n});\n","import { setupParticipantName } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useEnsureParticipant } from '../../context';\nimport { useObservableState } from '../../hooks/internal/useObservableState';\nimport { mergeProps } from '../../utils';\nimport type { UseParticipantInfoOptions } from '../../hooks';\n\n/** @public */\nexport interface ParticipantNameProps\n  extends React.HTMLAttributes<HTMLSpanElement>,\n    UseParticipantInfoOptions {}\n\n/**\n * The `ParticipantName` component displays the name of the participant as a string within an HTML span element.\n * If no participant name is undefined the participant identity string is displayed.\n *\n * @example\n * ```tsx\n * <ParticipantName />\n * ```\n * @public\n */\nexport const ParticipantName: (\n  props: ParticipantNameProps & React.RefAttributes<HTMLSpanElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLSpanElement, ParticipantNameProps>(\n  function ParticipantName({ participant, ...props }: ParticipantNameProps, ref) {\n    const p = useEnsureParticipant(participant);\n\n    const { className, infoObserver } = React.useMemo(() => {\n      return setupParticipantName(p);\n    }, [p]);\n\n    const { identity, name } = useObservableState(infoObserver, {\n      name: p.name,\n      identity: p.identity,\n      metadata: p.metadata,\n    });\n\n    const mergedProps = React.useMemo(() => {\n      return mergeProps(props, { className, 'data-lk-participant-name': name });\n    }, [props, className, name]);\n\n    return (\n      <span ref={ref} {...mergedProps}>\n        {name !== '' ? name : identity}\n        {props.children}\n      </span>\n    );\n  },\n);\n","import * as React from 'react';\nimport { mergeProps } from '../../utils';\nimport { getSourceIcon } from '../../assets/icons/util';\nimport { useTrackMutedIndicator } from '../../hooks';\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\n\n/** @public */\nexport interface TrackMutedIndicatorProps extends React.HTMLAttributes<HTMLDivElement> {\n  trackRef: TrackReferenceOrPlaceholder;\n  show?: 'always' | 'muted' | 'unmuted';\n}\n\n/**\n * The `TrackMutedIndicator` shows whether the participant's camera or microphone is muted or not.\n * By default, a muted/unmuted icon is displayed for a camera, microphone, and screen sharing track.\n *\n * @example\n * ```tsx\n * <TrackMutedIndicator trackRef={trackRef} />\n * ```\n * @public\n */\nexport const TrackMutedIndicator: (\n  props: TrackMutedIndicatorProps & React.RefAttributes<HTMLDivElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLDivElement, TrackMutedIndicatorProps>(\n  function TrackMutedIndicator(\n    { trackRef, show = 'always', ...props }: TrackMutedIndicatorProps,\n    ref,\n  ) {\n    const { className, isMuted } = useTrackMutedIndicator(trackRef);\n\n    const showIndicator =\n      show === 'always' || (show === 'muted' && isMuted) || (show === 'unmuted' && !isMuted);\n\n    const htmlProps = React.useMemo(\n      () =>\n        mergeProps(props, {\n          className,\n        }),\n      [className, props],\n    );\n\n    if (!showIndicator) {\n      return null;\n    }\n\n    return (\n      <div ref={ref} {...htmlProps} data-lk-muted={isMuted}>\n        {props.children ?? getSourceIcon(trackRef.source, !isMuted)}\n      </div>\n    );\n  },\n);\n","/**\n * WARNING: This file was auto-generated by svgr. Do not edit.\n */\nimport * as React from 'react';\nimport type { SVGProps } from 'react';\n/**\n * @internal\n */\nconst SvgParticipantPlaceholder = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={320}\n    height={320}\n    viewBox=\"0 0 320 320\"\n    preserveAspectRatio=\"xMidYMid meet\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\"\n      fill=\"white\"\n      fillOpacity={0.25}\n    />\n    <path\n      d=\"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\"\n      fill=\"white\"\n      fillOpacity={0.25}\n    />\n  </svg>\n);\nexport default SvgParticipantPlaceholder;\n","import type { TrackIdentifier } from '@livekit/components-core';\nimport { isTrackReference } from '@livekit/components-core';\nimport { setupMediaTrack, log, isLocal, getTrackByIdentifier } from '@livekit/components-core';\nimport * as React from 'react';\nimport { mergeProps } from '../utils';\n\n/** @public */\nexport interface UseMediaTrackOptions {\n  element?: React.RefObject<HTMLMediaElement> | null;\n  props?: React.HTMLAttributes<HTMLVideoElement | HTMLAudioElement>;\n}\n\n/**\n * @internal\n */\nexport function useMediaTrackBySourceOrName(\n  observerOptions: TrackIdentifier,\n  options: UseMediaTrackOptions = {},\n) {\n  const [publication, setPublication] = React.useState(getTrackByIdentifier(observerOptions));\n\n  const [isMuted, setMuted] = React.useState(publication?.isMuted);\n  const [isSubscribed, setSubscribed] = React.useState(publication?.isSubscribed);\n\n  const [track, setTrack] = React.useState(publication?.track);\n  const [orientation, setOrientation] = React.useState<'landscape' | 'portrait'>('landscape');\n  const previousElement = React.useRef<HTMLMediaElement | undefined | null>();\n\n  const { className, trackObserver } = React.useMemo(() => {\n    return setupMediaTrack(observerOptions);\n  }, [\n    observerOptions.participant.sid ?? observerOptions.participant.identity,\n    observerOptions.source,\n    isTrackReference(observerOptions) && observerOptions.publication.trackSid,\n  ]);\n\n  React.useEffect(() => {\n    const subscription = trackObserver.subscribe((publication) => {\n      log.debug('update track', publication);\n      setPublication(publication);\n      setMuted(publication?.isMuted);\n      setSubscribed(publication?.isSubscribed);\n      setTrack(publication?.track);\n    });\n    return () => subscription?.unsubscribe();\n  }, [trackObserver]);\n\n  React.useEffect(() => {\n    if (track) {\n      if (previousElement.current) {\n        track.detach(previousElement.current);\n      }\n      if (\n        options.element?.current &&\n        !(isLocal(observerOptions.participant) && track?.kind === 'audio')\n      ) {\n        track.attach(options.element.current);\n      }\n    }\n    previousElement.current = options.element?.current;\n    return () => {\n      if (previousElement.current) {\n        track?.detach(previousElement.current);\n      }\n    };\n  }, [track, options.element]);\n\n  React.useEffect(() => {\n    // Set the orientation of the video track.\n    // TODO: This does not handle changes in orientation after a track got published (e.g when rotating a phone camera from portrait to landscape).\n    if (\n      typeof publication?.dimensions?.width === 'number' &&\n      typeof publication?.dimensions?.height === 'number'\n    ) {\n      const orientation_ =\n        publication.dimensions.width > publication.dimensions.height ? 'landscape' : 'portrait';\n      setOrientation(orientation_);\n    }\n  }, [publication]);\n\n  return {\n    publication,\n    isMuted,\n    isSubscribed,\n    track,\n    elementProps: mergeProps(options.props, {\n      className,\n      'data-lk-local-participant': observerOptions.participant.isLocal,\n      'data-lk-source': publication?.source,\n      ...(publication?.kind === 'video' && { 'data-lk-orientation': orientation }),\n    }),\n  };\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import { useState, useCallback, useLayoutEffect, useEffect, useRef, useMemo } from 'react';\nimport debounce from 'lodash.debounce';\n\n// src/useBoolean/useBoolean.ts\nfunction useBoolean(defaultValue = false) {\n  if (typeof defaultValue !== \"boolean\") {\n    throw new Error(\"defaultValue must be `true` or `false`\");\n  }\n  const [value, setValue] = useState(defaultValue);\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return { value, setValue, setTrue, setFalse, toggle };\n}\nvar useIsomorphicLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\n// src/useEventListener/useEventListener.ts\nfunction useEventListener(eventName, handler, element, options) {\n  const savedHandler = useRef(handler);\n  useIsomorphicLayoutEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n  useEffect(() => {\n    const targetElement = (element == null ? void 0 : element.current) ?? window;\n    if (!(targetElement && targetElement.addEventListener))\n      return;\n    const listener = (event) => {\n      savedHandler.current(event);\n    };\n    targetElement.addEventListener(eventName, listener, options);\n    return () => {\n      targetElement.removeEventListener(eventName, listener, options);\n    };\n  }, [eventName, element, options]);\n}\n\n// src/useClickAnyWhere/useClickAnyWhere.ts\nfunction useClickAnyWhere(handler) {\n  useEventListener(\"click\", (event) => {\n    handler(event);\n  });\n}\nfunction useCopyToClipboard() {\n  const [copiedText, setCopiedText] = useState(null);\n  const copy = useCallback(async (text) => {\n    if (!(navigator == null ? void 0 : navigator.clipboard)) {\n      console.warn(\"Clipboard not supported\");\n      return false;\n    }\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn(\"Copy failed\", error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n  return [copiedText, copy];\n}\nfunction useCounter(initialValue) {\n  const [count, setCount] = useState(initialValue ?? 0);\n  const increment = useCallback(() => {\n    setCount((x) => x + 1);\n  }, []);\n  const decrement = useCallback(() => {\n    setCount((x) => x - 1);\n  }, []);\n  const reset = useCallback(() => {\n    setCount(initialValue ?? 0);\n  }, [initialValue]);\n  return {\n    count,\n    increment,\n    decrement,\n    reset,\n    setCount\n  };\n}\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (delay === null) {\n      return;\n    }\n    const id = setInterval(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearInterval(id);\n    };\n  }, [delay]);\n}\n\n// src/useCountdown/useCountdown.ts\nfunction useCountdown({\n  countStart,\n  countStop = 0,\n  intervalMs = 1e3,\n  isIncrement = false\n}) {\n  const {\n    count,\n    increment,\n    decrement,\n    reset: resetCounter\n  } = useCounter(countStart);\n  const {\n    value: isCountdownRunning,\n    setTrue: startCountdown,\n    setFalse: stopCountdown\n  } = useBoolean(false);\n  const resetCountdown = useCallback(() => {\n    stopCountdown();\n    resetCounter();\n  }, [stopCountdown, resetCounter]);\n  const countdownCallback = useCallback(() => {\n    if (count === countStop) {\n      stopCountdown();\n      return;\n    }\n    if (isIncrement) {\n      increment();\n    } else {\n      decrement();\n    }\n  }, [count, countStop, decrement, increment, isIncrement, stopCountdown]);\n  useInterval(countdownCallback, isCountdownRunning ? intervalMs : null);\n  return [count, { startCountdown, stopCountdown, resetCountdown }];\n}\nfunction useEventCallback(fn) {\n  const ref = useRef(() => {\n    throw new Error(\"Cannot call an event handler while rendering.\");\n  });\n  useIsomorphicLayoutEffect(() => {\n    ref.current = fn;\n  }, [fn]);\n  return useCallback((...args) => {\n    var _a;\n    return (_a = ref.current) == null ? void 0 : _a.call(ref, ...args);\n  }, [ref]);\n}\n\n// src/useLocalStorage/useLocalStorage.ts\nvar IS_SERVER = typeof window === \"undefined\";\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER) {\n      console.warn(\n        `Tried setting localStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.localStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"local-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting localStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  const removeValue = useEventCallback(() => {\n    if (IS_SERVER) {\n      console.warn(\n        `Tried removing localStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n    window.localStorage.removeItem(key);\n    setStoredValue(defaultValue);\n    window.dispatchEvent(new StorageEvent(\"local-storage\", { key }));\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return [storedValue, setValue, removeValue];\n}\nvar IS_SERVER2 = typeof window === \"undefined\";\nfunction useMediaQuery(query, {\n  defaultValue = false,\n  initializeWithValue = true\n} = {}) {\n  const getMatches = (query2) => {\n    if (IS_SERVER2) {\n      return defaultValue;\n    }\n    return window.matchMedia(query2).matches;\n  };\n  const [matches, setMatches] = useState(() => {\n    if (initializeWithValue) {\n      return getMatches(query);\n    }\n    return defaultValue;\n  });\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n  useIsomorphicLayoutEffect(() => {\n    const matchMedia = window.matchMedia(query);\n    handleChange();\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener(\"change\", handleChange);\n    }\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [query]);\n  return matches;\n}\n\n// src/useDarkMode/useDarkMode.ts\nvar COLOR_SCHEME_QUERY = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY = \"usehooks-ts-dark-mode\";\nfunction useDarkMode(options = {}) {\n  const {\n    defaultValue,\n    localStorageKey = LOCAL_STORAGE_KEY,\n    initializeWithValue = true\n  } = options;\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY, {\n    initializeWithValue,\n    defaultValue\n  });\n  const [isDarkMode, setDarkMode] = useLocalStorage(\n    localStorageKey,\n    defaultValue ?? isDarkOS ?? false,\n    { initializeWithValue }\n  );\n  useIsomorphicLayoutEffect(() => {\n    if (isDarkOS !== isDarkMode) {\n      setDarkMode(isDarkOS);\n    }\n  }, [isDarkOS]);\n  return {\n    isDarkMode,\n    toggle: () => {\n      setDarkMode((prev) => !prev);\n    },\n    enable: () => {\n      setDarkMode(true);\n    },\n    disable: () => {\n      setDarkMode(false);\n    },\n    set: (value) => {\n      setDarkMode(value);\n    }\n  };\n}\nfunction useUnmount(func) {\n  const funcRef = useRef(func);\n  funcRef.current = func;\n  useEffect(\n    () => () => {\n      funcRef.current();\n    },\n    []\n  );\n}\n\n// src/useDebounceCallback/useDebounceCallback.ts\nfunction useDebounceCallback(func, delay = 500, options) {\n  const debouncedFunc = useRef();\n  useUnmount(() => {\n    if (debouncedFunc.current) {\n      debouncedFunc.current.cancel();\n    }\n  });\n  const debounced = useMemo(() => {\n    const debouncedFuncInstance = debounce(func, delay, options);\n    const wrappedFunc = (...args) => {\n      return debouncedFuncInstance(...args);\n    };\n    wrappedFunc.cancel = () => {\n      debouncedFuncInstance.cancel();\n    };\n    wrappedFunc.isPending = () => {\n      return !!debouncedFunc.current;\n    };\n    wrappedFunc.flush = () => {\n      return debouncedFuncInstance.flush();\n    };\n    return wrappedFunc;\n  }, [func, delay, options]);\n  useEffect(() => {\n    debouncedFunc.current = debounce(func, delay, options);\n  }, [func, delay, options]);\n  return debounced;\n}\nfunction useDebounceValue(initialValue, delay, options) {\n  const eq = (options == null ? void 0 : options.equalityFn) ?? ((left, right) => left === right);\n  const unwrappedInitialValue = initialValue instanceof Function ? initialValue() : initialValue;\n  const [debouncedValue, setDebouncedValue] = useState(unwrappedInitialValue);\n  const previousValueRef = useRef(unwrappedInitialValue);\n  const updateDebouncedValue = useDebounceCallback(\n    setDebouncedValue,\n    delay,\n    options\n  );\n  if (!eq(previousValueRef.current, unwrappedInitialValue)) {\n    updateDebouncedValue(unwrappedInitialValue);\n    previousValueRef.current = unwrappedInitialValue;\n  }\n  return [debouncedValue, updateDebouncedValue];\n}\nfunction useDocumentTitle(title, options = {}) {\n  const { preserveTitleOnUnmount = true } = options;\n  const defaultTitle = useRef(null);\n  useIsomorphicLayoutEffect(() => {\n    defaultTitle.current = window.document.title;\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    window.document.title = title;\n  }, [title]);\n  useUnmount(() => {\n    if (!preserveTitleOnUnmount && defaultTitle.current) {\n      window.document.title = defaultTitle.current;\n    }\n  });\n}\nfunction useHover(elementRef) {\n  const [value, setValue] = useState(false);\n  const handleMouseEnter = () => {\n    setValue(true);\n  };\n  const handleMouseLeave = () => {\n    setValue(false);\n  };\n  useEventListener(\"mouseenter\", handleMouseEnter, elementRef);\n  useEventListener(\"mouseleave\", handleMouseLeave, elementRef);\n  return value;\n}\nfunction useIntersectionObserver({\n  threshold = 0,\n  root = null,\n  rootMargin = \"0%\",\n  freezeOnceVisible = false,\n  initialIsIntersecting = false,\n  onChange\n} = {}) {\n  var _a;\n  const [ref, setRef] = useState(null);\n  const [state, setState] = useState(() => ({\n    isIntersecting: initialIsIntersecting,\n    entry: void 0\n  }));\n  const callbackRef = useRef();\n  callbackRef.current = onChange;\n  const frozen = ((_a = state.entry) == null ? void 0 : _a.isIntersecting) && freezeOnceVisible;\n  useEffect(() => {\n    if (!ref)\n      return;\n    if (!(\"IntersectionObserver\" in window))\n      return;\n    if (frozen)\n      return;\n    let unobserve;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const thresholds = Array.isArray(observer.thresholds) ? observer.thresholds : [observer.thresholds];\n        entries.forEach((entry) => {\n          const isIntersecting = entry.isIntersecting && thresholds.some((threshold2) => entry.intersectionRatio >= threshold2);\n          setState({ isIntersecting, entry });\n          if (callbackRef.current) {\n            callbackRef.current(isIntersecting, entry);\n          }\n          if (isIntersecting && freezeOnceVisible && unobserve) {\n            unobserve();\n            unobserve = void 0;\n          }\n        });\n      },\n      { threshold, root, rootMargin }\n    );\n    observer.observe(ref);\n    return () => {\n      observer.disconnect();\n    };\n  }, [\n    ref,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(threshold),\n    root,\n    rootMargin,\n    frozen,\n    freezeOnceVisible\n  ]);\n  const prevRef = useRef(null);\n  useEffect(() => {\n    var _a2;\n    if (!ref && ((_a2 = state.entry) == null ? void 0 : _a2.target) && !freezeOnceVisible && !frozen && prevRef.current !== state.entry.target) {\n      prevRef.current = state.entry.target;\n      setState({ isIntersecting: initialIsIntersecting, entry: void 0 });\n    }\n  }, [ref, state.entry, freezeOnceVisible, frozen, initialIsIntersecting]);\n  const result = [\n    setRef,\n    !!state.isIntersecting,\n    state.entry\n  ];\n  result.ref = result[0];\n  result.isIntersecting = result[1];\n  result.entry = result[2];\n  return result;\n}\nfunction useIsClient() {\n  const [isClient, setClient] = useState(false);\n  useEffect(() => {\n    setClient(true);\n  }, []);\n  return isClient;\n}\nfunction useIsMounted() {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return useCallback(() => isMounted.current, []);\n}\nfunction useMap(initialState = /* @__PURE__ */ new Map()) {\n  const [map, setMap] = useState(new Map(initialState));\n  const actions = {\n    set: useCallback((key, value) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.set(key, value);\n        return copy;\n      });\n    }, []),\n    setAll: useCallback((entries) => {\n      setMap(() => new Map(entries));\n    }, []),\n    remove: useCallback((key) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.delete(key);\n        return copy;\n      });\n    }, []),\n    reset: useCallback(() => {\n      setMap(() => /* @__PURE__ */ new Map());\n    }, [])\n  };\n  return [map, actions];\n}\n\n// src/useOnClickOutside/useOnClickOutside.ts\nfunction useOnClickOutside(ref, handler, eventType = \"mousedown\", eventListenerOptions = {}) {\n  useEventListener(\n    eventType,\n    (event) => {\n      const target = event.target;\n      if (!target || !target.isConnected) {\n        return;\n      }\n      const isOutside = Array.isArray(ref) ? ref.filter((r) => Boolean(r.current)).every((r) => r.current && !r.current.contains(target)) : ref.current && !ref.current.contains(target);\n      if (isOutside) {\n        handler(event);\n      }\n    },\n    void 0,\n    eventListenerOptions\n  );\n}\nvar IS_SERVER3 = typeof window === \"undefined\";\nfunction useReadLocalStorage(key, options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER3) {\n    initializeWithValue = false;\n  }\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return null;\n      }\n      return parsed;\n    },\n    [options]\n  );\n  const readValue = useCallback(() => {\n    if (IS_SERVER3) {\n      return null;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : null;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return null;\n    }\n  }, [key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return void 0;\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return storedValue;\n}\nvar initialSize = {\n  width: void 0,\n  height: void 0\n};\nfunction useResizeObserver(options) {\n  const { ref, box = \"content-box\" } = options;\n  const [{ width, height }, setSize] = useState(initialSize);\n  const isMounted = useIsMounted();\n  const previousSize = useRef({ ...initialSize });\n  const onResize = useRef(void 0);\n  onResize.current = options.onResize;\n  useEffect(() => {\n    if (!ref.current)\n      return;\n    if (typeof window === \"undefined\" || !(\"ResizeObserver\" in window))\n      return;\n    const observer = new ResizeObserver(([entry]) => {\n      const boxProp = box === \"border-box\" ? \"borderBoxSize\" : box === \"device-pixel-content-box\" ? \"devicePixelContentBoxSize\" : \"contentBoxSize\";\n      const newWidth = extractSize(entry, boxProp, \"inlineSize\");\n      const newHeight = extractSize(entry, boxProp, \"blockSize\");\n      const hasChanged = previousSize.current.width !== newWidth || previousSize.current.height !== newHeight;\n      if (hasChanged) {\n        const newSize = { width: newWidth, height: newHeight };\n        previousSize.current.width = newWidth;\n        previousSize.current.height = newHeight;\n        if (onResize.current) {\n          onResize.current(newSize);\n        } else {\n          if (isMounted()) {\n            setSize(newSize);\n          }\n        }\n      }\n    });\n    observer.observe(ref.current, { box });\n    return () => {\n      observer.disconnect();\n    };\n  }, [box, ref, isMounted]);\n  return { width, height };\n}\nfunction extractSize(entry, box, sizeType) {\n  if (!entry[box]) {\n    if (box === \"contentBoxSize\") {\n      return entry.contentRect[sizeType === \"inlineSize\" ? \"width\" : \"height\"];\n    }\n    return void 0;\n  }\n  return Array.isArray(entry[box]) ? entry[box][0][sizeType] : (\n    // @ts-ignore Support Firefox's non-standard behavior\n    entry[box][sizeType]\n  );\n}\nvar IS_SERVER4 = typeof window === \"undefined\";\nfunction useScreen(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER4) {\n    initializeWithValue = false;\n  }\n  const readScreen = () => {\n    if (IS_SERVER4) {\n      return void 0;\n    }\n    return window.screen;\n  };\n  const [screen, setScreen] = useState(() => {\n    if (initializeWithValue) {\n      return readScreen();\n    }\n    return void 0;\n  });\n  const debouncedSetScreen = useDebounceCallback(\n    setScreen,\n    options.debounceDelay\n  );\n  function handleSize() {\n    const newScreen = readScreen();\n    const setSize = options.debounceDelay ? debouncedSetScreen : setScreen;\n    if (newScreen) {\n      const {\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      } = newScreen;\n      setSize({\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      });\n    }\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return screen;\n}\nvar cachedScriptStatuses = /* @__PURE__ */ new Map();\nfunction getScriptNode(src) {\n  const node = document.querySelector(\n    `script[src=\"${src}\"]`\n  );\n  const status = node == null ? void 0 : node.getAttribute(\"data-status\");\n  return {\n    node,\n    status\n  };\n}\nfunction useScript(src, options) {\n  const [status, setStatus] = useState(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return \"idle\";\n    }\n    if (typeof window === \"undefined\") {\n      return \"loading\";\n    }\n    return cachedScriptStatuses.get(src) ?? \"loading\";\n  });\n  useEffect(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return;\n    }\n    const cachedScriptStatus = cachedScriptStatuses.get(src);\n    if (cachedScriptStatus === \"ready\" || cachedScriptStatus === \"error\") {\n      setStatus(cachedScriptStatus);\n      return;\n    }\n    const script = getScriptNode(src);\n    let scriptNode = script.node;\n    if (!scriptNode) {\n      scriptNode = document.createElement(\"script\");\n      scriptNode.src = src;\n      scriptNode.async = true;\n      if (options == null ? void 0 : options.id) {\n        scriptNode.id = options.id;\n      }\n      scriptNode.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(scriptNode);\n      const setAttributeFromEvent = (event) => {\n        const scriptStatus = event.type === \"load\" ? \"ready\" : \"error\";\n        scriptNode == null ? void 0 : scriptNode.setAttribute(\"data-status\", scriptStatus);\n      };\n      scriptNode.addEventListener(\"load\", setAttributeFromEvent);\n      scriptNode.addEventListener(\"error\", setAttributeFromEvent);\n    } else {\n      setStatus(script.status ?? cachedScriptStatus ?? \"loading\");\n    }\n    const setStateFromEvent = (event) => {\n      const newStatus = event.type === \"load\" ? \"ready\" : \"error\";\n      setStatus(newStatus);\n      cachedScriptStatuses.set(src, newStatus);\n    };\n    scriptNode.addEventListener(\"load\", setStateFromEvent);\n    scriptNode.addEventListener(\"error\", setStateFromEvent);\n    return () => {\n      if (scriptNode) {\n        scriptNode.removeEventListener(\"load\", setStateFromEvent);\n        scriptNode.removeEventListener(\"error\", setStateFromEvent);\n      }\n      if (scriptNode && (options == null ? void 0 : options.removeOnUnmount)) {\n        scriptNode.remove();\n        cachedScriptStatuses.delete(src);\n      }\n    };\n  }, [src, options == null ? void 0 : options.shouldPreventLoad, options == null ? void 0 : options.removeOnUnmount, options == null ? void 0 : options.id]);\n  return status;\n}\nvar IS_SERVER5 = typeof window === \"undefined\";\nfunction useScrollLock(options = {}) {\n  const { autoLock = true, lockTarget, widthReflow = true } = options;\n  const [isLocked, setIsLocked] = useState(false);\n  const target = useRef(null);\n  const originalStyle = useRef(null);\n  const lock = () => {\n    if (target.current) {\n      const { overflow, paddingRight } = target.current.style;\n      originalStyle.current = { overflow, paddingRight };\n      if (widthReflow) {\n        const offsetWidth = target.current === document.body ? window.innerWidth : target.current.offsetWidth;\n        const currentPaddingRight = parseInt(window.getComputedStyle(target.current).paddingRight, 10) || 0;\n        const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n        target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n      }\n      target.current.style.overflow = \"hidden\";\n      setIsLocked(true);\n    }\n  };\n  const unlock = () => {\n    if (target.current && originalStyle.current) {\n      target.current.style.overflow = originalStyle.current.overflow;\n      if (widthReflow) {\n        target.current.style.paddingRight = originalStyle.current.paddingRight;\n      }\n    }\n    setIsLocked(false);\n  };\n  useIsomorphicLayoutEffect(() => {\n    if (IS_SERVER5)\n      return;\n    if (lockTarget) {\n      target.current = typeof lockTarget === \"string\" ? document.querySelector(lockTarget) : lockTarget;\n    }\n    if (!target.current) {\n      target.current = document.body;\n    }\n    if (autoLock) {\n      lock();\n    }\n    return () => {\n      unlock();\n    };\n  }, [autoLock, lockTarget, widthReflow]);\n  return { isLocked, lock, unlock };\n}\nvar IS_SERVER6 = typeof window === \"undefined\";\nfunction useSessionStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER6) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.sessionStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading sessionStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER6) {\n      console.warn(\n        `Tried setting sessionStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.sessionStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"session-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting sessionStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  const removeValue = useEventCallback(() => {\n    if (IS_SERVER6) {\n      console.warn(\n        `Tried removing sessionStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n    window.sessionStorage.removeItem(key);\n    setStoredValue(defaultValue);\n    window.dispatchEvent(new StorageEvent(\"session-storage\", { key }));\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"session-storage\", handleStorageChange);\n  return [storedValue, setValue, removeValue];\n}\nfunction useStep(maxStep) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const canGoToNextStep = currentStep + 1 <= maxStep;\n  const canGoToPrevStep = currentStep - 1 > 0;\n  const setStep = useCallback(\n    (step) => {\n      const newStep = step instanceof Function ? step(currentStep) : step;\n      if (newStep >= 1 && newStep <= maxStep) {\n        setCurrentStep(newStep);\n        return;\n      }\n      throw new Error(\"Step not valid\");\n    },\n    [maxStep, currentStep]\n  );\n  const goToNextStep = useCallback(() => {\n    if (canGoToNextStep) {\n      setCurrentStep((step) => step + 1);\n    }\n  }, [canGoToNextStep]);\n  const goToPrevStep = useCallback(() => {\n    if (canGoToPrevStep) {\n      setCurrentStep((step) => step - 1);\n    }\n  }, [canGoToPrevStep]);\n  const reset = useCallback(() => {\n    setCurrentStep(1);\n  }, []);\n  return [\n    currentStep,\n    {\n      goToNextStep,\n      goToPrevStep,\n      canGoToNextStep,\n      canGoToPrevStep,\n      setStep,\n      reset\n    }\n  ];\n}\n\n// src/useTernaryDarkMode/useTernaryDarkMode.ts\nvar COLOR_SCHEME_QUERY2 = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY2 = \"usehooks-ts-ternary-dark-mode\";\nfunction useTernaryDarkMode({\n  defaultValue = \"system\",\n  localStorageKey = LOCAL_STORAGE_KEY2,\n  initializeWithValue = true\n} = {}) {\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY2, { initializeWithValue });\n  const [mode, setMode] = useLocalStorage(localStorageKey, defaultValue, {\n    initializeWithValue\n  });\n  const isDarkMode = mode === \"dark\" || mode === \"system\" && isDarkOS;\n  const toggleTernaryDarkMode = () => {\n    const modes = [\"light\", \"system\", \"dark\"];\n    setMode((prevMode) => {\n      const nextIndex = (modes.indexOf(prevMode) + 1) % modes.length;\n      return modes[nextIndex];\n    });\n  };\n  return {\n    isDarkMode,\n    ternaryDarkMode: mode,\n    setTernaryDarkMode: setMode,\n    toggleTernaryDarkMode\n  };\n}\nfunction useTimeout(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (!delay && delay !== 0) {\n      return;\n    }\n    const id = setTimeout(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [delay]);\n}\nfunction useToggle(defaultValue) {\n  const [value, setValue] = useState(!!defaultValue);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return [value, toggle, setValue];\n}\nvar IS_SERVER7 = typeof window === \"undefined\";\nfunction useWindowSize(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER7) {\n    initializeWithValue = false;\n  }\n  const [windowSize, setWindowSize] = useState(() => {\n    if (initializeWithValue) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    }\n    return {\n      width: void 0,\n      height: void 0\n    };\n  });\n  const debouncedSetWindowSize = useDebounceCallback(\n    setWindowSize,\n    options.debounceDelay\n  );\n  function handleSize() {\n    const setSize = options.debounceDelay ? debouncedSetWindowSize : setWindowSize;\n    setSize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return windowSize;\n}\n\nexport { useBoolean, useClickAnyWhere, useCopyToClipboard, useCountdown, useCounter, useDarkMode, useDebounceCallback, useDebounceValue, useDocumentTitle, useEventCallback, useEventListener, useHover, useIntersectionObserver, useInterval, useIsClient, useIsMounted, useIsomorphicLayoutEffect, useLocalStorage, useMap, useMediaQuery, useOnClickOutside, useReadLocalStorage, useResizeObserver, useScreen, useScript, useScrollLock, useSessionStorage, useStep, useTernaryDarkMode, useTimeout, useToggle, useUnmount, useWindowSize };\n","import { RemoteTrackPublication } from 'livekit-client';\nimport * as React from 'react';\nimport { useMediaTrackBySourceOrName } from '../../hooks/useMediaTrackBySourceOrName';\nimport type { ParticipantClickEvent, TrackReference } from '@livekit/components-core';\nimport { useEnsureTrackRef } from '../../context';\nimport * as useHooks from 'usehooks-ts';\n\n/** @public */\nexport interface VideoTrackProps extends React.VideoHTMLAttributes<HTMLVideoElement> {\n  /** The track reference of the track to render. */\n  trackRef?: TrackReference;\n  onTrackClick?: (evt: ParticipantClickEvent) => void;\n  onSubscriptionStatusChanged?: (subscribed: boolean) => void;\n  manageSubscription?: boolean;\n}\n\n/**\n * The `VideoTrack` component is responsible for rendering participant video tracks like `camera` and `screen_share`.\n * This component must have access to the participant's context, or alternatively pass it a `Participant` as a property.\n *\n * @example\n * ```tsx\n * <VideoTrack trackRef={trackRef} />\n * ```\n * @see {@link @livekit/components-react#ParticipantTile |ParticipantTile}\n * @public\n */\nexport const VideoTrack: (\n  props: VideoTrackProps & React.RefAttributes<HTMLVideoElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLVideoElement, VideoTrackProps>(\n  function VideoTrack(\n    {\n      onTrackClick,\n      onClick,\n      onSubscriptionStatusChanged,\n      trackRef,\n      manageSubscription,\n      ...props\n    }: VideoTrackProps,\n    ref,\n  ) {\n    const trackReference = useEnsureTrackRef(trackRef);\n\n    const mediaEl = React.useRef<HTMLVideoElement>(null);\n    React.useImperativeHandle(ref, () => mediaEl.current as HTMLVideoElement);\n\n    const intersectionEntry = useHooks.useIntersectionObserver({ root: mediaEl.current });\n\n    const [debouncedIntersectionEntry] = useHooks.useDebounceValue(intersectionEntry, 3000);\n\n    React.useEffect(() => {\n      if (\n        manageSubscription &&\n        trackReference.publication instanceof RemoteTrackPublication &&\n        debouncedIntersectionEntry?.isIntersecting === false &&\n        intersectionEntry?.isIntersecting === false\n      ) {\n        trackReference.publication.setSubscribed(false);\n      }\n    }, [debouncedIntersectionEntry, trackReference, manageSubscription]);\n\n    React.useEffect(() => {\n      if (\n        manageSubscription &&\n        trackReference.publication instanceof RemoteTrackPublication &&\n        intersectionEntry?.isIntersecting === true\n      ) {\n        trackReference.publication.setSubscribed(true);\n      }\n    }, [intersectionEntry, trackReference, manageSubscription]);\n\n    const {\n      elementProps,\n      publication: pub,\n      isSubscribed,\n    } = useMediaTrackBySourceOrName(trackReference, {\n      element: mediaEl,\n      props,\n    });\n\n    React.useEffect(() => {\n      onSubscriptionStatusChanged?.(!!isSubscribed);\n    }, [isSubscribed, onSubscriptionStatusChanged]);\n\n    const clickHandler = (evt: React.MouseEvent<HTMLVideoElement, MouseEvent>) => {\n      onClick?.(evt);\n      onTrackClick?.({ participant: trackReference?.participant, track: pub });\n    };\n\n    return <video ref={mediaEl} {...elementProps} muted={true} onClick={clickHandler}></video>;\n  },\n);\n","import * as React from 'react';\nimport { useMediaTrackBySourceOrName } from '../../hooks/useMediaTrackBySourceOrName';\nimport type { TrackReference } from '@livekit/components-core';\nimport { log } from '@livekit/components-core';\nimport { RemoteAudioTrack, RemoteTrackPublication } from 'livekit-client';\nimport { useEnsureTrackRef } from '../../context';\n\n/** @public */\nexport interface AudioTrackProps extends React.AudioHTMLAttributes<HTMLAudioElement> {\n  /** The track reference of the track from which the audio is to be rendered. */\n  trackRef?: TrackReference;\n\n  onSubscriptionStatusChanged?: (subscribed: boolean) => void;\n  /** Sets the volume of the audio track. By default, the range is between `0.0` and `1.0`. */\n  volume?: number;\n  /**\n   * Mutes the audio track if set to `true`.\n   * @remarks\n   * If set to `true`, the server will stop sending audio track data to the client.\n   * @alpha\n   */\n  muted?: boolean;\n}\n\n/**\n * The AudioTrack component is responsible for rendering participant audio tracks.\n * This component must have access to the participant's context, or alternatively pass it a `Participant` as a property.\n *\n * @example\n * ```tsx\n *   <ParticipantTile>\n *     <AudioTrack trackRef={trackRef} />\n *   </ParticipantTile>\n * ```\n *\n * @see `ParticipantTile` component\n * @public\n */\nexport const AudioTrack: (\n  props: AudioTrackProps & React.RefAttributes<HTMLAudioElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLAudioElement, AudioTrackProps>(\n  function AudioTrack(\n    { trackRef, onSubscriptionStatusChanged, volume, muted, ...props }: AudioTrackProps,\n    ref,\n  ) {\n    const trackReference = useEnsureTrackRef(trackRef);\n\n    const mediaEl = React.useRef<HTMLAudioElement>(null);\n    React.useImperativeHandle(ref, () => mediaEl.current as HTMLAudioElement);\n\n    const {\n      elementProps,\n      isSubscribed,\n      track,\n      publication: pub,\n    } = useMediaTrackBySourceOrName(trackReference, {\n      element: mediaEl,\n      props,\n    });\n\n    React.useEffect(() => {\n      onSubscriptionStatusChanged?.(!!isSubscribed);\n    }, [isSubscribed, onSubscriptionStatusChanged]);\n\n    React.useEffect(() => {\n      if (track === undefined || volume === undefined) {\n        return;\n      }\n      if (track instanceof RemoteAudioTrack) {\n        track.setVolume(volume);\n      } else {\n        log.warn('Volume can only be set on remote audio tracks.');\n      }\n    }, [volume, track]);\n\n    React.useEffect(() => {\n      if (pub === undefined || muted === undefined) {\n        return;\n      }\n      if (pub instanceof RemoteTrackPublication) {\n        pub.setEnabled(!muted);\n      } else {\n        log.warn('Can only call setEnabled on remote track publications.');\n      }\n    }, [muted, pub, track]);\n\n    return <audio ref={mediaEl} {...elementProps} />;\n  },\n);\n","import * as React from 'react';\nimport type { Participant } from 'livekit-client';\nimport { Track } from 'livekit-client';\nimport type { ParticipantClickEvent, TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { isTrackReference, isTrackReferencePinned } from '@livekit/components-core';\nimport { ConnectionQualityIndicator } from './ConnectionQualityIndicator';\nimport { ParticipantName } from './ParticipantName';\nimport { TrackMutedIndicator } from './TrackMutedIndicator';\nimport {\n  ParticipantContext,\n  TrackRefContext,\n  useEnsureTrackRef,\n  useFeatureContext,\n  useMaybeLayoutContext,\n  useMaybeParticipantContext,\n  useMaybeTrackRefContext,\n} from '../../context';\nimport { FocusToggle } from '../controls/FocusToggle';\nimport { ParticipantPlaceholder } from '../../assets/images';\nimport { LockLockedIcon, ScreenShareIcon } from '../../assets/icons';\nimport { VideoTrack } from './VideoTrack';\nimport { AudioTrack } from './AudioTrack';\nimport { useParticipantTile } from '../../hooks';\nimport { useIsEncrypted } from '../../hooks/useIsEncrypted';\n\n/**\n * The `ParticipantContextIfNeeded` component only creates a `ParticipantContext`\n * if there is no `ParticipantContext` already.\n * @example\n * ```tsx\n * <ParticipantContextIfNeeded participant={trackReference.participant}>\n *  ...\n * </ParticipantContextIfNeeded>\n * ```\n * @public\n */\nexport function ParticipantContextIfNeeded(\n  props: React.PropsWithChildren<{\n    participant?: Participant;\n  }>,\n) {\n  const hasContext = !!useMaybeParticipantContext();\n  return props.participant && !hasContext ? (\n    <ParticipantContext.Provider value={props.participant}>\n      {props.children}\n    </ParticipantContext.Provider>\n  ) : (\n    <>{props.children}</>\n  );\n}\n\n/**\n * Only create a `TrackRefContext` if there is no `TrackRefContext` already.\n * @internal\n */\nexport function TrackRefContextIfNeeded(\n  props: React.PropsWithChildren<{\n    trackRef?: TrackReferenceOrPlaceholder;\n  }>,\n) {\n  const hasContext = !!useMaybeTrackRefContext();\n  return props.trackRef && !hasContext ? (\n    <TrackRefContext.Provider value={props.trackRef}>{props.children}</TrackRefContext.Provider>\n  ) : (\n    <>{props.children}</>\n  );\n}\n\n/** @public */\nexport interface ParticipantTileProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** The track reference to display. */\n  trackRef?: TrackReferenceOrPlaceholder;\n  disableSpeakingIndicator?: boolean;\n\n  onParticipantClick?: (event: ParticipantClickEvent) => void;\n}\n\n/**\n * The `ParticipantTile` component is the base utility wrapper for displaying a visual representation of a participant.\n * This component can be used as a child of the `TrackLoop` component or by passing a track reference as property.\n *\n * @example Using the `ParticipantTile` component with a track reference:\n * ```tsx\n * <ParticipantTile trackRef={trackRef} />\n * ```\n * @example Using the `ParticipantTile` component as a child of the `TrackLoop` component:\n * ```tsx\n * <TrackLoop>\n *  <ParticipantTile />\n * </TrackLoop>\n * ```\n * @public\n */\nexport const ParticipantTile: (\n  props: ParticipantTileProps & React.RefAttributes<HTMLDivElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLDivElement, ParticipantTileProps>(\n  function ParticipantTile(\n    {\n      trackRef,\n      children,\n      onParticipantClick,\n      disableSpeakingIndicator,\n      ...htmlProps\n    }: ParticipantTileProps,\n    ref,\n  ) {\n    const trackReference = useEnsureTrackRef(trackRef);\n\n    const { elementProps } = useParticipantTile<HTMLDivElement>({\n      htmlProps,\n      disableSpeakingIndicator,\n      onParticipantClick,\n      trackRef: trackReference,\n    });\n    const isEncrypted = useIsEncrypted(trackReference.participant);\n    const layoutContext = useMaybeLayoutContext();\n\n    const autoManageSubscription = useFeatureContext()?.autoSubscription;\n\n    const handleSubscribe = React.useCallback(\n      (subscribed: boolean) => {\n        if (\n          trackReference.source &&\n          !subscribed &&\n          layoutContext &&\n          layoutContext.pin.dispatch &&\n          isTrackReferencePinned(trackReference, layoutContext.pin.state)\n        ) {\n          layoutContext.pin.dispatch({ msg: 'clear_pin' });\n        }\n      },\n      [trackReference, layoutContext],\n    );\n\n    return (\n      <div ref={ref} style={{ position: 'relative' }} {...elementProps}>\n        <TrackRefContextIfNeeded trackRef={trackReference}>\n          <ParticipantContextIfNeeded participant={trackReference.participant}>\n            {children ?? (\n              <>\n                {isTrackReference(trackReference) &&\n                (trackReference.publication?.kind === 'video' ||\n                  trackReference.source === Track.Source.Camera ||\n                  trackReference.source === Track.Source.ScreenShare) ? (\n                  <VideoTrack\n                    trackRef={trackReference}\n                    onSubscriptionStatusChanged={handleSubscribe}\n                    manageSubscription={autoManageSubscription}\n                  />\n                ) : (\n                  isTrackReference(trackReference) && (\n                    <AudioTrack\n                      trackRef={trackReference}\n                      onSubscriptionStatusChanged={handleSubscribe}\n                    />\n                  )\n                )}\n                <div className=\"lk-participant-placeholder\">\n                  <ParticipantPlaceholder />\n                </div>\n                <div className=\"lk-participant-metadata\">\n                  <div className=\"lk-participant-metadata-item\">\n                    {trackReference.source === Track.Source.Camera ? (\n                      <>\n                        {isEncrypted && <LockLockedIcon style={{ marginRight: '0.25rem' }} />}\n                        <TrackMutedIndicator\n                          trackRef={{\n                            participant: trackReference.participant,\n                            source: Track.Source.Microphone,\n                          }}\n                          show={'muted'}\n                        ></TrackMutedIndicator>\n                        <ParticipantName />\n                      </>\n                    ) : (\n                      <>\n                        <ScreenShareIcon style={{ marginRight: '0.25rem' }} />\n                        <ParticipantName>&apos;s screen</ParticipantName>\n                      </>\n                    )}\n                  </div>\n                  <ConnectionQualityIndicator className=\"lk-participant-metadata-item\" />\n                </div>\n              </>\n            )}\n            <FocusToggle trackRef={trackReference} />\n          </ParticipantContextIfNeeded>\n        </TrackRefContextIfNeeded>\n      </div>\n    );\n  },\n);\n","import * as React from 'react';\nimport { mergeProps } from '../../utils';\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { ParticipantTile } from '../participant/ParticipantTile';\nimport type { ParticipantClickEvent } from '@livekit/components-core';\n\n/** @public */\nexport interface FocusLayoutContainerProps extends React.HTMLAttributes<HTMLDivElement> {}\n\n/**\n * The `FocusLayoutContainer` is a layout component that expects two children:\n * A small side component: In a video conference, this is usually a carousel of participants\n * who are not in focus. And a larger main component to display the focused participant.\n * For example, with the `FocusLayout` component.\n *  @public\n */\nexport function FocusLayoutContainer(props: FocusLayoutContainerProps) {\n  const elementProps = mergeProps(props, { className: 'lk-focus-layout' });\n\n  return <div {...elementProps}>{props.children}</div>;\n}\n\n/** @public */\nexport interface FocusLayoutProps extends React.HTMLAttributes<HTMLElement> {\n  /** The track to display in the focus layout. */\n  trackRef?: TrackReferenceOrPlaceholder;\n\n  onParticipantClick?: (evt: ParticipantClickEvent) => void;\n}\n\n/**\n * The `FocusLayout` component is just a light wrapper around the `ParticipantTile` to display a single participant.\n * @public\n */\nexport function FocusLayout({ trackRef, ...htmlProps }: FocusLayoutProps) {\n  return <ParticipantTile trackRef={trackRef} {...htmlProps} />;\n}\n","import type { TrackReference, TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport * as React from 'react';\nimport { TrackRefContext } from '../context/track-reference-context';\nimport { cloneSingleChild } from '../utils';\nimport { getTrackReferenceId } from '@livekit/components-core';\n\n/** @public */\nexport interface TrackLoopProps {\n  /** Track references to loop over. You can the use `useTracks()` hook to get TrackReferences. */\n  tracks: TrackReference[] | TrackReferenceOrPlaceholder[];\n  /** The template component to be used in the loop. */\n  children: React.ReactNode;\n}\n\n/**\n * The `TrackLoop` component loops over tracks. It is for example a easy way to loop over all participant camera and screen share tracks.\n * `TrackLoop` creates a `TrackRefContext` for each track that you can use to e.g. render the track.\n *\n * @example\n * ```tsx\n * const trackRefs = useTracks([Track.Source.Camera]);\n * <TrackLoop tracks={trackRefs} >\n *  <TrackRefContext.Consumer>\n *    {(trackRef) => trackRef && <VideoTrack trackRef={trackRef}/>}\n *  </TrackRefContext.Consumer>\n * </TrackLoop>\n * ```\n * @public\n */\nexport function TrackLoop({ tracks, ...props }: TrackLoopProps) {\n  return (\n    <>\n      {tracks.map((trackReference) => {\n        return (\n          <TrackRefContext.Provider\n            value={trackReference}\n            key={getTrackReferenceId(trackReference)}\n          >\n            {cloneSingleChild(props.children)}\n          </TrackRefContext.Provider>\n        );\n      })}\n    </>\n  );\n}\n","import * as React from 'react';\nimport SvgChevron from '../../assets/icons/Chevron';\nimport type { usePagination } from '../../hooks';\nimport { createInteractingObservable } from '@livekit/components-core';\n\nexport interface PaginationControlProps\n  extends Pick<\n    ReturnType<typeof usePagination>,\n    'totalPageCount' | 'nextPage' | 'prevPage' | 'currentPage'\n  > {\n  /** Reference to an HTML element that holds the pages, while interacting (`mouseover`)\n   *  with it, the pagination controls will appear for a while. */\n  pagesContainer?: React.RefObject<HTMLElement>;\n}\n\nexport function PaginationControl({\n  totalPageCount,\n  nextPage,\n  prevPage,\n  currentPage,\n  pagesContainer: connectedElement,\n}: PaginationControlProps) {\n  const [interactive, setInteractive] = React.useState(false);\n  React.useEffect(() => {\n    let subscription:\n      | ReturnType<ReturnType<typeof createInteractingObservable>['subscribe']>\n      | undefined;\n    if (connectedElement) {\n      subscription = createInteractingObservable(connectedElement.current, 2000).subscribe(\n        setInteractive,\n      );\n    }\n    return () => {\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n    };\n  }, [connectedElement]);\n\n  return (\n    <div className=\"lk-pagination-control\" data-lk-user-interaction={interactive}>\n      <button className=\"lk-button\" onClick={prevPage}>\n        <SvgChevron />\n      </button>\n      <span className=\"lk-pagination-count\">{`${currentPage} of ${totalPageCount}`}</span>\n      <button className=\"lk-button\" onClick={nextPage}>\n        <SvgChevron />\n      </button>\n    </div>\n  );\n}\n","import * as React from 'react';\n\nexport interface PaginationIndicatorProps {\n  totalPageCount: number;\n  currentPage: number;\n}\n\nexport const PaginationIndicator: (\n  props: PaginationIndicatorProps & React.RefAttributes<HTMLDivElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLDivElement, PaginationIndicatorProps>(\n  function PaginationIndicator({ totalPageCount, currentPage }: PaginationIndicatorProps, ref) {\n    const bubbles = new Array(totalPageCount).fill('').map((_, index) => {\n      if (index + 1 === currentPage) {\n        return <span data-lk-active key={index} />;\n      } else {\n        return <span key={index} />;\n      }\n    });\n\n    return (\n      <div ref={ref} className=\"lk-pagination-indicator\">\n        {bubbles}\n      </div>\n    );\n  },\n);\n","import * as React from 'react';\nimport type { UseParticipantsOptions } from '../../hooks';\nimport { useGridLayout, usePagination, useSwipe } from '../../hooks';\nimport { mergeProps } from '../../utils';\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { TrackLoop } from '../TrackLoop';\nimport { PaginationControl } from '../controls/PaginationControl';\nimport { PaginationIndicator } from '../controls/PaginationIndicator';\n\n/** @public */\nexport interface GridLayoutProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    Pick<UseParticipantsOptions, 'updateOnlyOn'> {\n  children: React.ReactNode;\n  tracks: TrackReferenceOrPlaceholder[];\n}\n\n/**\n * The `GridLayout` component displays the nested participants in a grid where every participants has the same size.\n * It also supports pagination if there are more participants than the grid can display.\n * @remarks\n * To ensure visual stability when tiles are reordered due to track updates,\n * the component uses the `useVisualStableUpdate` hook.\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <GridLayout tracks={tracks}>\n *     <ParticipantTile />\n *   </GridLayout>\n * <LiveKitRoom>\n * ```\n * @public\n */\nexport function GridLayout({ tracks, ...props }: GridLayoutProps) {\n  const gridEl = React.createRef<HTMLDivElement>();\n\n  const elementProps = React.useMemo(\n    () => mergeProps(props, { className: 'lk-grid-layout' }),\n    [props],\n  );\n  const { layout } = useGridLayout(gridEl, tracks.length);\n  const pagination = usePagination(layout.maxTiles, tracks);\n\n  useSwipe(gridEl, {\n    onLeftSwipe: pagination.nextPage,\n    onRightSwipe: pagination.prevPage,\n  });\n\n  return (\n    <div ref={gridEl} data-lk-pagination={pagination.totalPageCount > 1} {...elementProps}>\n      <TrackLoop tracks={pagination.tracks}>{props.children}</TrackLoop>\n      {tracks.length > layout.maxTiles && (\n        <>\n          <PaginationIndicator\n            totalPageCount={pagination.totalPageCount}\n            currentPage={pagination.currentPage}\n          />\n          <PaginationControl pagesContainer={gridEl} {...pagination} />\n        </>\n      )}\n    </div>\n  );\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { getScrollBarWidth } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useSize } from '../../hooks/internal';\nimport { useVisualStableUpdate } from '../../hooks';\nimport { TrackLoop } from '../TrackLoop';\n\nconst MIN_HEIGHT = 130;\nconst MIN_WIDTH = 140;\nconst MIN_VISIBLE_TILES = 1;\nconst ASPECT_RATIO = 16 / 10;\nconst ASPECT_RATIO_INVERT = (1 - ASPECT_RATIO) * -1;\n\n/** @public */\nexport interface CarouselLayoutProps extends React.HTMLAttributes<HTMLMediaElement> {\n  tracks: TrackReferenceOrPlaceholder[];\n  children: React.ReactNode;\n  /** Place the tiles vertically or horizontally next to each other.\n   * If undefined orientation is guessed by the dimensions of the container. */\n  orientation?: 'vertical' | 'horizontal';\n}\n\n/**\n * The `CarouselLayout` component displays a list of tracks in a scroll container.\n * It will display as many tiles as possible and overflow the rest.\n * @remarks\n * To ensure visual stability when tiles are reordered due to track updates,\n * the component uses the `useVisualStableUpdate` hook.\n * @example\n * ```tsx\n * const tracks = useTracks([Track.Source.Camera]);\n * <CarouselLayout tracks={tracks}>\n *   <ParticipantTile />\n * </CarouselLayout>\n * ```\n * @public\n */\nexport function CarouselLayout({ tracks, orientation, ...props }: CarouselLayoutProps) {\n  const asideEl = React.useRef<HTMLDivElement>(null);\n  const [prevTiles, setPrevTiles] = React.useState(0);\n  const { width, height } = useSize(asideEl);\n  const carouselOrientation = orientation\n    ? orientation\n    : height >= width\n      ? 'vertical'\n      : 'horizontal';\n\n  const tileSpan =\n    carouselOrientation === 'vertical'\n      ? Math.max(width * ASPECT_RATIO_INVERT, MIN_HEIGHT)\n      : Math.max(height * ASPECT_RATIO, MIN_WIDTH);\n  const scrollBarWidth = getScrollBarWidth();\n\n  const tilesThatFit =\n    carouselOrientation === 'vertical'\n      ? Math.max((height - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES)\n      : Math.max((width - scrollBarWidth) / tileSpan, MIN_VISIBLE_TILES);\n\n  let maxVisibleTiles = Math.round(tilesThatFit);\n  if (Math.abs(tilesThatFit - prevTiles) < 0.5) {\n    maxVisibleTiles = Math.round(prevTiles);\n  } else if (prevTiles !== tilesThatFit) {\n    setPrevTiles(tilesThatFit);\n  }\n\n  const sortedTiles = useVisualStableUpdate(tracks, maxVisibleTiles);\n\n  React.useLayoutEffect(() => {\n    if (asideEl.current) {\n      asideEl.current.dataset.lkOrientation = carouselOrientation;\n      asideEl.current.style.setProperty('--lk-max-visible-tiles', maxVisibleTiles.toString());\n    }\n  }, [maxVisibleTiles, carouselOrientation]);\n\n  return (\n    <aside key={carouselOrientation} className=\"lk-carousel\" ref={asideEl} {...props}>\n      <TrackLoop tracks={sortedTiles}>{props.children}</TrackLoop>\n    </aside>\n  );\n}\n","import type { PinState, WidgetState } from '@livekit/components-core';\nimport { log } from '@livekit/components-core';\nimport * as React from 'react';\nimport type { LayoutContextType } from '../../context';\nimport { LayoutContext, useEnsureCreateLayoutContext } from '../../context';\n\n/** @alpha */\nexport interface LayoutContextProviderProps {\n  value?: LayoutContextType;\n  onPinChange?: (state: PinState) => void;\n  onWidgetChange?: (state: WidgetState) => void;\n}\n\n/** @alpha */\nexport function LayoutContextProvider({\n  value,\n  onPinChange,\n  onWidgetChange,\n  children,\n}: React.PropsWithChildren<LayoutContextProviderProps>) {\n  const layoutContextValue = useEnsureCreateLayoutContext(value);\n\n  React.useEffect(() => {\n    log.debug('PinState Updated', { state: layoutContextValue.pin.state });\n    if (onPinChange && layoutContextValue.pin.state) onPinChange(layoutContextValue.pin.state);\n  }, [layoutContextValue.pin.state, onPinChange]);\n\n  React.useEffect(() => {\n    log.debug('Widget Updated', { widgetState: layoutContextValue.widget.state });\n    if (onWidgetChange && layoutContextValue.widget.state) {\n      onWidgetChange(layoutContextValue.widget.state);\n    }\n  }, [onWidgetChange, layoutContextValue.widget.state]);\n\n  return <LayoutContext.Provider value={layoutContextValue}>{children}</LayoutContext.Provider>;\n}\n","import { getTrackReferenceId, isLocal } from '@livekit/components-core';\nimport { Track } from 'livekit-client';\nimport * as React from 'react';\nimport { useTracks } from '../hooks';\nimport { AudioTrack } from './participant/AudioTrack';\n\n/** @public */\nexport interface RoomAudioRendererProps {\n  /** Sets the volume for all audio tracks rendered by this component. By default, the range is between `0.0` and `1.0`. */\n  volume?: number;\n  /**\n   * If set to `true`, mutes all audio tracks rendered by the component.\n   * @remarks\n   * If set to `true`, the server will stop sending audio track data to the client.\n   * @alpha\n   */\n  muted?: boolean;\n}\n\n/**\n * The `RoomAudioRenderer` component is a drop-in solution for adding audio to your LiveKit app.\n * It takes care of handling remote participants audio tracks and makes sure that microphones and screen share are audible.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <RoomAudioRenderer />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport function RoomAudioRenderer({ volume, muted }: RoomAudioRendererProps) {\n  const tracks = useTracks(\n    [Track.Source.Microphone, Track.Source.ScreenShareAudio, Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: true,\n    },\n  ).filter((ref) => !isLocal(ref.participant) && ref.publication.kind === Track.Kind.Audio);\n\n  return (\n    <div style={{ display: 'none' }}>\n      {tracks.map((trackRef) => (\n        <AudioTrack\n          key={getTrackReferenceId(trackRef)}\n          trackRef={trackRef}\n          volume={volume}\n          muted={muted}\n        />\n      ))}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { mergeProps } from '../utils';\n\n/**\n * The `Toast` component is a rudimentary way to display a message to the user.\n * This message should be short lived and not require user interaction.\n * For example, displaying the current connection state like `ConnectionStateToast` does.\n *\n * @example\n * ```tsx\n * <Toast>Connecting...</Toast>\n * ```\n * @public\n */\nexport function Toast(props: React.HTMLAttributes<HTMLDivElement>) {\n  const htmlProps = React.useMemo(() => mergeProps(props, { className: 'lk-toast' }), [props]);\n  return <div {...htmlProps}>{props.children}</div>;\n}\n","import type { Room } from 'livekit-client';\nimport { ConnectionState } from 'livekit-client';\nimport * as React from 'react';\nimport { SpinnerIcon } from '../assets/icons';\nimport { useConnectionState } from '../hooks';\nimport { Toast } from './Toast';\n\n/** @public */\nexport interface ConnectionStateToastProps extends React.HTMLAttributes<HTMLDivElement> {\n  room?: Room;\n}\n\n/**\n * The `ConnectionStateToast` component displays a toast\n * notification indicating the current connection state of the room.\n * @public\n */\nexport function ConnectionStateToast(props: ConnectionStateToastProps) {\n  const [notification, setNotification] = React.useState<React.ReactElement | undefined>(undefined);\n  const state = useConnectionState(props.room);\n\n  React.useEffect(() => {\n    switch (state) {\n      case ConnectionState.Reconnecting:\n        setNotification(\n          <>\n            <SpinnerIcon className=\"lk-spinner\" /> Reconnecting\n          </>,\n        );\n        break;\n      case ConnectionState.Connecting:\n        setNotification(\n          <>\n            <SpinnerIcon className=\"lk-spinner\" /> Connecting\n          </>,\n        );\n        break;\n      case ConnectionState.Disconnected:\n        setNotification(<>Disconnected</>);\n        break;\n      default:\n        setNotification(undefined);\n        break;\n    }\n  }, [state]);\n  return notification ? <Toast className=\"lk-toast-connection-state\">{notification}</Toast> : <></>;\n}\n","import type { ReceivedChatMessage } from '@livekit/components-core';\nimport { tokenize, createDefaultGrammar } from '@livekit/components-core';\nimport * as React from 'react';\n\n/** @public */\nexport type MessageFormatter = (message: string) => React.ReactNode;\n\n/**\n * ChatEntry composes the HTML div element under the hood, so you can pass all its props.\n * These are the props specific to the ChatEntry component:\n * @public\n */\nexport interface ChatEntryProps extends React.HTMLAttributes<HTMLLIElement> {\n  /** The chat massage object to display. */\n  entry: ReceivedChatMessage;\n  /** Hide sender name. Useful when displaying multiple consecutive chat messages from the same person. */\n  hideName?: boolean;\n  /** Hide message timestamp. */\n  hideTimestamp?: boolean;\n  /** An optional formatter for the message body. */\n  messageFormatter?: MessageFormatter;\n}\n\n/**\n * The `ChatEntry` component holds and displays one chat message.\n *\n * @example\n * ```tsx\n * <Chat>\n *   <ChatEntry />\n * </Chat>\n * ```\n * @see `Chat`\n * @public\n */\nexport const ChatEntry: (\n  props: ChatEntryProps & React.RefAttributes<HTMLLIElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLLIElement, ChatEntryProps>(\n  function ChatEntry(\n    { entry, hideName = false, hideTimestamp = false, messageFormatter, ...props }: ChatEntryProps,\n    ref,\n  ) {\n    const formattedMessage = React.useMemo(() => {\n      return messageFormatter ? messageFormatter(entry.message) : entry.message;\n    }, [entry.message, messageFormatter]);\n    const hasBeenEdited = !!entry.editTimestamp;\n    const time = new Date(entry.timestamp);\n    const locale = navigator ? navigator.language : 'en-US';\n\n    return (\n      <li\n        ref={ref}\n        className=\"lk-chat-entry\"\n        title={time.toLocaleTimeString(locale, { timeStyle: 'full' })}\n        data-lk-message-origin={entry.from?.isLocal ? 'local' : 'remote'}\n        {...props}\n      >\n        {(!hideTimestamp || !hideName || hasBeenEdited) && (\n          <span className=\"lk-meta-data\">\n            {!hideName && (\n              <strong className=\"lk-participant-name\">\n                {entry.from?.name ?? entry.from?.identity}\n              </strong>\n            )}\n\n            {(!hideTimestamp || hasBeenEdited) && (\n              <span className=\"lk-timestamp\">\n                {hasBeenEdited && 'edited '}\n                {time.toLocaleTimeString(locale, { timeStyle: 'short' })}\n              </span>\n            )}\n          </span>\n        )}\n\n        <span className=\"lk-message-body\">{formattedMessage}</span>\n      </li>\n    );\n  },\n);\n\n/** @public */\nexport function formatChatMessageLinks(message: string): React.ReactNode {\n  return tokenize(message, createDefaultGrammar()).map((tok, i) => {\n    if (typeof tok === `string`) {\n      return tok;\n    } else {\n      const content = tok.content.toString();\n      const href =\n        tok.type === `url`\n          ? /^http(s?):\\/\\//.test(content)\n            ? content\n            : `https://${content}`\n          : `mailto:${content}`;\n      return (\n        <a className=\"lk-chat-link\" key={i} href={href} target=\"_blank\" rel=\"noreferrer\">\n          {content}\n        </a>\n      );\n    }\n  });\n}\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    ...rects.floating,\n    x,\n    y\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      if (!specifiedFallbackPlacements && fallbackAxisSideDirection !== 'none') {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$map$so;\n                const placement = (_overflowsData$map$so = overflowsData.map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$map$so[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: 0,\n    crossAxis: 0,\n    alignmentAxis: null,\n    ...rawValue\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const overflowAvailableHeight = height - overflow[heightSide];\n      const overflowAvailableWidth = width - overflow[widthSide];\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if (isYAxis) {\n        const maximumClippingWidth = width - overflow.left - overflow.right;\n        availableWidth = alignment || noShift ? min(overflowAvailableWidth, maximumClippingWidth) : maximumClippingWidth;\n      } else {\n        const maximumClippingHeight = height - overflow.top - overflow.bottom;\n        availableHeight = alignment || noShift ? min(overflowAvailableHeight, maximumClippingHeight) : maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getNodeScroll, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      ...clippingAncestor,\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  let htmlX = 0;\n  let htmlY = 0;\n  if (documentElement && !isOffsetParentAnElement && !isFixed) {\n    const htmlRect = documentElement.getBoundingClientRect();\n    htmlY = htmlRect.top + scroll.scrollTop;\n    htmlX = htmlRect.left + scroll.scrollLeft -\n    // RTL <body> scrollbar.\n    getWindowScrollBarX(documentElement, htmlRect);\n  }\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlX;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlY;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { __extends } from \"tslib\";\nimport { Subject } from './Subject';\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        !subscription.closed && subscriber.next(this._value);\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;\n        if (hasError) {\n            throw thrownError;\n        }\n        this._throwIfClosed();\n        return _value;\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, (this._value = value));\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map","export var dateTimestampProvider = {\n    now: function () {\n        return (dateTimestampProvider.delegate || Date).now();\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=dateTimestampProvider.js.map","import { __extends } from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = (function (_super) {\n    __extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var intervalProvider = {\n    setInterval: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = intervalProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n            return delegate.setInterval.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setInterval.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearInterval: function (handle) {\n        var delegate = intervalProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=intervalProvider.js.map","import { __extends } from \"tslib\";\nimport { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nvar AsyncAction = (function (_super) {\n    __extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        var _a;\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, _id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (_scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        if (id != null) {\n            intervalProvider.clearInterval(id);\n        }\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, _delay) {\n        var errored = false;\n        var errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            var _a = this, id = _a.id, scheduler = _a.scheduler;\n            var actions = scheduler.actions;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            _super.prototype.unsubscribe.call(this);\n        }\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map","import { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nvar Scheduler = (function () {\n    function Scheduler(schedulerActionCtor, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.schedulerActionCtor = schedulerActionCtor;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.schedulerActionCtor(this, work).schedule(state, delay);\n    };\n    Scheduler.now = dateTimestampProvider.now;\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var asyncScheduler = new AsyncScheduler(AsyncAction);\nexport var async = asyncScheduler;\n//# sourceMappingURL=async.js.map","import { __extends } from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = (function (_super) {\n    __extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        var _this = _super.call(this, SchedulerAction, now) || this;\n        _this.actions = [];\n        _this._active = false;\n        return _this;\n    }\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map","import { Observable } from '../Observable';\nexport var EMPTY = new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map","import { isFunction } from './isFunction';\nimport { isScheduler } from './isScheduler';\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\nexport function popResultSelector(args) {\n    return isFunction(last(args)) ? args.pop() : undefined;\n}\nexport function popScheduler(args) {\n    return isScheduler(last(args)) ? args.pop() : undefined;\n}\nexport function popNumber(args, defaultValue) {\n    return typeof last(args) === 'number' ? args.pop() : defaultValue;\n}\n//# sourceMappingURL=args.js.map","import { isFunction } from './isFunction';\nexport function isScheduler(value) {\n    return value && isFunction(value.schedule);\n}\n//# sourceMappingURL=isScheduler.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    return from(args, scheduler);\n}\n//# sourceMappingURL=of.js.map","import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport var TimeoutError = createErrorClass(function (_super) {\n    return function TimeoutErrorImpl(info) {\n        if (info === void 0) { info = null; }\n        _super(this);\n        this.message = 'Timeout has occurred';\n        this.name = 'TimeoutError';\n        this.info = info;\n    };\n});\nexport function timeout(config, schedulerArg) {\n    var _a = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config), first = _a.first, each = _a.each, _b = _a.with, _with = _b === void 0 ? timeoutErrorFactory : _b, _c = _a.scheduler, scheduler = _c === void 0 ? schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler : _c, _d = _a.meta, meta = _d === void 0 ? null : _d;\n    if (first == null && each == null) {\n        throw new TypeError('No timeout provided.');\n    }\n    return operate(function (source, subscriber) {\n        var originalSourceSubscription;\n        var timerSubscription;\n        var lastValue = null;\n        var seen = 0;\n        var startTimer = function (delay) {\n            timerSubscription = executeSchedule(subscriber, scheduler, function () {\n                try {\n                    originalSourceSubscription.unsubscribe();\n                    innerFrom(_with({\n                        meta: meta,\n                        lastValue: lastValue,\n                        seen: seen,\n                    })).subscribe(subscriber);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }, delay);\n        };\n        originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            seen++;\n            subscriber.next((lastValue = value));\n            each > 0 && startTimer(each);\n        }, undefined, undefined, function () {\n            if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n                timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            }\n            lastValue = null;\n        }));\n        !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler.now()) : each);\n    });\n}\nfunction timeoutErrorFactory(info) {\n    throw new TimeoutError(info);\n}\n//# sourceMappingURL=timeout.js.map","export function isValidDate(value) {\n    return value instanceof Date && !isNaN(value);\n}\n//# sourceMappingURL=isDate.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { map } from \"../operators/map\";\nvar isArray = Array.isArray;\nfunction callOrApply(fn, args) {\n    return isArray(args) ? fn.apply(void 0, __spreadArray([], __read(args))) : fn(args);\n}\nexport function mapOneOrManyArgs(fn) {\n    return map(function (args) { return callOrApply(fn, args); });\n}\n//# sourceMappingURL=mapOneOrManyArgs.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map","import { concatAll } from '../operators/concatAll';\nimport { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function concat() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return concatAll()(from(args, popScheduler(args)));\n}\n//# sourceMappingURL=concat.js.map","import { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map","import { __read } from \"tslib\";\nimport { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nvar nodeEventEmitterMethods = ['addListener', 'removeListener'];\nvar eventTargetMethods = ['addEventListener', 'removeEventListener'];\nvar jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n    }\n    var _a = __read(isEventTarget(target)\n        ? eventTargetMethods.map(function (methodName) { return function (handler) { return target[methodName](eventName, handler, options); }; })\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [], 2), add = _a[0], remove = _a[1];\n    if (!add) {\n        if (isArrayLike(target)) {\n            return mergeMap(function (subTarget) { return fromEvent(subTarget, eventName, options); })(innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable(function (subscriber) {\n        var handler = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subscriber.next(1 < args.length ? args : args[0]);\n        };\n        add(handler);\n        return function () { return remove(handler); };\n    });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n    return function (methodName) { return function (handler) { return target[methodName](eventName, handler); }; };\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n//# sourceMappingURL=fromEvent.js.map","import { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(args);\n    var concurrent = popNumber(args, Infinity);\n    var sources = args;\n    return !sources.length\n        ?\n            EMPTY\n        : sources.length === 1\n            ?\n                innerFrom(sources[0])\n            :\n                mergeAll(concurrent)(from(sources, scheduler));\n}\n//# sourceMappingURL=merge.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { identity } from '../util/identity';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function distinctUntilChanged(comparator, keySelector) {\n    if (keySelector === void 0) { keySelector = identity; }\n    comparator = comparator !== null && comparator !== void 0 ? comparator : defaultCompare;\n    return operate(function (source, subscriber) {\n        var previousKey;\n        var first = true;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var currentKey = keySelector(value);\n            if (first || !comparator(previousKey, currentKey)) {\n                first = false;\n                previousKey = currentKey;\n                subscriber.next(value);\n            }\n        }));\n    });\n}\nfunction defaultCompare(a, b) {\n    return a === b;\n}\n//# sourceMappingURL=distinctUntilChanged.js.map","import { operate } from '../util/lift';\nimport { scanInternals } from './scanInternals';\nexport function scan(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, true));\n}\n//# sourceMappingURL=scan.js.map","import { createOperatorSubscriber } from './OperatorSubscriber';\nexport function scanInternals(accumulator, seed, hasSeed, emitOnNext, emitBeforeComplete) {\n    return function (source, subscriber) {\n        var hasState = hasSeed;\n        var state = seed;\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var i = index++;\n            state = hasState\n                ?\n                    accumulator(state, value, i)\n                :\n                    ((hasState = true), value);\n            emitOnNext && subscriber.next(state);\n        }, emitBeforeComplete &&\n            (function () {\n                hasState && subscriber.next(state);\n                subscriber.complete();\n            })));\n    };\n}\n//# sourceMappingURL=scanInternals.js.map","import { concat } from '../observable/concat';\nimport { popScheduler } from '../util/args';\nimport { operate } from '../util/lift';\nexport function startWith() {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    var scheduler = popScheduler(values);\n    return operate(function (source, subscriber) {\n        (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=startWith.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nimport { noop } from '../util/noop';\nexport function takeUntil(notifier) {\n    return operate(function (source, subscriber) {\n        innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber, function () { return subscriber.complete(); }, noop));\n        !subscriber.closed && source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=takeUntil.js.map","var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/constants.ts\nvar cssPrefix = \"lk\";\n\n// src/utils.ts\nimport { LocalParticipant, RemoteParticipant } from \"livekit-client\";\n\n// src/track-reference/track-reference.types.ts\nfunction isTrackReference(trackReference) {\n  if (typeof trackReference === \"undefined\") {\n    return false;\n  }\n  return isTrackReferenceSubscribed(trackReference) || isTrackReferencePublished(trackReference);\n}\nfunction isTrackReferenceSubscribed(trackReference) {\n  var _a;\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"track\") && typeof ((_a = trackReference.publication) == null ? void 0 : _a.track) !== \"undefined\";\n}\nfunction isTrackReferencePublished(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && trackReference.hasOwnProperty(\"publication\") && typeof trackReference.publication !== \"undefined\";\n}\nfunction isTrackReferencePlaceholder(trackReference) {\n  if (!trackReference) {\n    return false;\n  }\n  return trackReference.hasOwnProperty(\"participant\") && trackReference.hasOwnProperty(\"source\") && typeof trackReference.publication === \"undefined\";\n}\n\n// src/track-reference/track-reference.utils.ts\nfunction getTrackReferenceId(trackReference) {\n  if (typeof trackReference === \"string\" || typeof trackReference === \"number\") {\n    return `${trackReference}`;\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.source}_placeholder`;\n  } else if (isTrackReference(trackReference)) {\n    return `${trackReference.participant.identity}_${trackReference.publication.source}_${trackReference.publication.trackSid}`;\n  } else {\n    throw new Error(`Can't generate a id for the given track reference: ${trackReference}`);\n  }\n}\nfunction getTrackReferenceSource(trackReference) {\n  if (isTrackReference(trackReference)) {\n    return trackReference.publication.source;\n  } else {\n    return trackReference.source;\n  }\n}\nfunction isEqualTrackRef(a, b) {\n  if (a === void 0 || b === void 0) {\n    return false;\n  }\n  if (isTrackReference(a) && isTrackReference(b)) {\n    return a.publication.trackSid === b.publication.trackSid;\n  } else {\n    return getTrackReferenceId(a) === getTrackReferenceId(b);\n  }\n}\nfunction isTrackReferencePinned(trackReference, pinState) {\n  if (typeof pinState === \"undefined\") {\n    return false;\n  }\n  if (isTrackReference(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReference(pinnedTrackReference) && pinnedTrackReference.publication.trackSid === trackReference.publication.trackSid\n    );\n  } else if (isTrackReferencePlaceholder(trackReference)) {\n    return pinState.some(\n      (pinnedTrackReference) => pinnedTrackReference.participant.identity === trackReference.participant.identity && isTrackReferencePlaceholder(pinnedTrackReference) && pinnedTrackReference.source === trackReference.source\n    );\n  } else {\n    return false;\n  }\n}\nfunction isPlaceholderReplacement(currentTrackRef, nextTrackRef) {\n  return isTrackReferencePlaceholder(currentTrackRef) && isTrackReference(nextTrackRef) && nextTrackRef.participant.identity === currentTrackRef.participant.identity && nextTrackRef.source === currentTrackRef.source;\n}\n\n// src/utils.ts\nfunction isLocal(p) {\n  return p instanceof LocalParticipant;\n}\nfunction isRemote(p) {\n  return p instanceof RemoteParticipant;\n}\nvar attachIfSubscribed = (publication, element) => {\n  if (!publication) return;\n  const { isSubscribed, track } = publication;\n  if (element && track) {\n    if (isSubscribed) {\n      track.attach(element);\n    } else {\n      track.detach(element);\n    }\n  }\n};\nfunction isParticipantTrackReferencePinned(trackRef, pinState) {\n  if (pinState === void 0) {\n    return false;\n  }\n  return pinState.some((pinnedTrackRef) => isEqualTrackRef(pinnedTrackRef, trackRef));\n}\nfunction getScrollBarWidth() {\n  const inner = document.createElement(\"p\");\n  inner.style.width = \"100%\";\n  inner.style.height = \"200px\";\n  const outer = document.createElement(\"div\");\n  outer.style.position = \"absolute\";\n  outer.style.top = \"0px\";\n  outer.style.left = \"0px\";\n  outer.style.visibility = \"hidden\";\n  outer.style.width = \"200px\";\n  outer.style.height = \"150px\";\n  outer.style.overflow = \"hidden\";\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n  const w1 = inner.offsetWidth;\n  outer.style.overflow = \"scroll\";\n  let w2 = inner.offsetWidth;\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n  document.body.removeChild(outer);\n  const scrollBarWidth = w1 - w2;\n  return scrollBarWidth;\n}\n\n// src/helper/detectMobileBrowser.ts\nfunction isWeb() {\n  return typeof document !== \"undefined\";\n}\nfunction isMobileBrowser() {\n  return isWeb() ? /Mobi/i.test(window.navigator.userAgent) : false;\n}\n\n// src/helper/url-regex.ts\nfunction createUrlRegExp(options) {\n  options = __spreadValues({}, options);\n  const protocol = `(?:(?:[a-z]+:)?//)?`;\n  const auth = \"(?:\\\\S+(?::\\\\S*)?@)?\";\n  const ip = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source;\n  const host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  const domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  const tld = `(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?`;\n  const port = \"(?::\\\\d{2,5})?\";\n  const path = '(?:[/?#][^\\\\s\"]*)?';\n  const regex2 = `(?:${protocol}|www\\\\.)${auth}(?:localhost|${ip}|${host}${domain}${tld})${port}${path}`;\n  return options.exact ? new RegExp(`(?:^${regex2}$)`, \"i\") : new RegExp(regex2, \"ig\");\n}\n\n// src/helper/emailRegex.ts\nvar regex = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction createEmailRegExp({ exact } = {}) {\n  return exact ? new RegExp(`^${regex}$`) : new RegExp(regex, \"g\");\n}\n\n// src/helper/floating-menu.ts\nimport { computePosition, flip, offset, shift } from \"@floating-ui/dom\";\nfunction computeMenuPosition(button, menu) {\n  return __async(this, null, function* () {\n    const { x, y } = yield computePosition(button, menu, {\n      placement: \"top\",\n      middleware: [offset(6), flip(), shift({ padding: 5 })]\n    });\n    return { x, y };\n  });\n}\nfunction wasClickOutside(insideElement, event) {\n  const isOutside = !insideElement.contains(event.target);\n  return isOutside;\n}\n\n// src/helper/tokenizer.ts\nvar createDefaultGrammar = () => {\n  return {\n    email: createEmailRegExp(),\n    url: createUrlRegExp({})\n  };\n};\nfunction tokenize(input, grammar) {\n  const matches = Object.entries(grammar).map(\n    ([type, rx], weight) => Array.from(input.matchAll(rx)).map(({ index, 0: content }) => ({\n      type,\n      weight,\n      content,\n      index: index != null ? index : 0\n    }))\n  ).flat().sort((a, b) => {\n    const d = a.index - b.index;\n    return d !== 0 ? d : a.weight - b.weight;\n  }).filter(({ index }, i, arr) => {\n    if (i === 0) return true;\n    const prev = arr[i - 1];\n    return prev.index + prev.content.length <= index;\n  });\n  const tokens = [];\n  let pos = 0;\n  for (const { type, content, index } of matches) {\n    if (index > pos) tokens.push(input.substring(pos, index));\n    tokens.push({ type, content });\n    pos = index + content.length;\n  }\n  if (input.length > pos) tokens.push(input.substring(pos));\n  return tokens;\n}\n\n// src/helper/eventGroups.ts\nimport { ParticipantEvent, RoomEvent } from \"livekit-client\";\nvar allRemoteParticipantRoomEvents = [\n  RoomEvent.ConnectionStateChanged,\n  RoomEvent.RoomMetadataChanged,\n  RoomEvent.ActiveSpeakersChanged,\n  RoomEvent.ConnectionQualityChanged,\n  RoomEvent.ParticipantConnected,\n  RoomEvent.ParticipantDisconnected,\n  RoomEvent.ParticipantPermissionsChanged,\n  RoomEvent.ParticipantMetadataChanged,\n  RoomEvent.ParticipantNameChanged,\n  RoomEvent.ParticipantAttributesChanged,\n  RoomEvent.TrackMuted,\n  RoomEvent.TrackUnmuted,\n  RoomEvent.TrackPublished,\n  RoomEvent.TrackUnpublished,\n  RoomEvent.TrackStreamStateChanged,\n  RoomEvent.TrackSubscriptionFailed,\n  RoomEvent.TrackSubscriptionPermissionChanged,\n  RoomEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantRoomEvents = [\n  ...allRemoteParticipantRoomEvents,\n  RoomEvent.LocalTrackPublished,\n  RoomEvent.LocalTrackUnpublished\n];\nvar participantTrackEvents = [\n  ParticipantEvent.TrackPublished,\n  ParticipantEvent.TrackUnpublished,\n  ParticipantEvent.TrackMuted,\n  ParticipantEvent.TrackUnmuted,\n  ParticipantEvent.TrackStreamStateChanged,\n  ParticipantEvent.TrackSubscribed,\n  ParticipantEvent.TrackUnsubscribed,\n  ParticipantEvent.TrackSubscriptionPermissionChanged,\n  ParticipantEvent.TrackSubscriptionFailed,\n  ParticipantEvent.LocalTrackPublished,\n  ParticipantEvent.LocalTrackUnpublished\n];\nvar allRemoteParticipantEvents = [\n  ParticipantEvent.ConnectionQualityChanged,\n  ParticipantEvent.IsSpeakingChanged,\n  ParticipantEvent.ParticipantMetadataChanged,\n  ParticipantEvent.ParticipantPermissionsChanged,\n  ParticipantEvent.TrackMuted,\n  ParticipantEvent.TrackUnmuted,\n  ParticipantEvent.TrackPublished,\n  ParticipantEvent.TrackUnpublished,\n  ParticipantEvent.TrackStreamStateChanged,\n  ParticipantEvent.TrackSubscriptionFailed,\n  ParticipantEvent.TrackSubscriptionPermissionChanged,\n  ParticipantEvent.TrackSubscriptionStatusChanged\n];\nvar allParticipantEvents = [\n  ...allRemoteParticipantEvents,\n  ParticipantEvent.LocalTrackPublished,\n  ParticipantEvent.LocalTrackUnpublished\n];\n\n// src/logger.ts\nimport {\n  setLogLevel as setClientSdkLogLevel,\n  setLogExtension as setClientSdkLogExtension,\n  LogLevel as LogLevelEnum\n} from \"livekit-client\";\nimport loglevel from \"loglevel\";\nvar log = loglevel.getLogger(\"lk-components-js\");\nlog.setDefaultLevel(\"WARN\");\nfunction setLogLevel(level, options = {}) {\n  var _a;\n  log.setLevel(level);\n  setClientSdkLogLevel((_a = options.liveKitClientLogLevel) != null ? _a : level);\n}\nfunction setLogExtension(extension, options = {}) {\n  var _a;\n  const originalFactory = log.methodFactory;\n  log.methodFactory = (methodName, configLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, configLevel, loggerName);\n    const logLevel = LogLevelEnum[methodName];\n    const needLog = logLevel >= configLevel && logLevel < LogLevelEnum.silent;\n    return (msg, context) => {\n      if (context) rawMethod(msg, context);\n      else rawMethod(msg);\n      if (needLog) {\n        extension(logLevel, msg, context);\n      }\n    };\n  };\n  log.setLevel(log.getLevel());\n  setClientSdkLogExtension((_a = options.liveKitClientLogExtension) != null ? _a : extension);\n}\n\n// src/helper/grid-layouts.ts\nvar GRID_LAYOUTS = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction selectGridLayout(layoutDefinitions, participantCount, width, height) {\n  if (layoutDefinitions.length < 1) {\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  }\n  const layouts = expandAndSortLayoutDefinitions(layoutDefinitions);\n  if (width <= 0 || height <= 0) {\n    return layouts[0];\n  }\n  let currentLayoutIndex = 0;\n  const containerOrientation = width / height > 1 ? \"landscape\" : \"portrait\";\n  let layout = layouts.find((layout_, index, allLayouts) => {\n    currentLayoutIndex = index;\n    const isBiggerLayoutAvailable = allLayouts.findIndex((l, i) => {\n      const fitsOrientation = !l.orientation || l.orientation === containerOrientation;\n      const layoutIsBiggerThanCurrent = i > index;\n      const layoutFitsSameAmountOfParticipants = l.maxTiles === layout_.maxTiles;\n      return layoutIsBiggerThanCurrent && layoutFitsSameAmountOfParticipants && fitsOrientation;\n    }) !== -1;\n    return layout_.maxTiles >= participantCount && !isBiggerLayoutAvailable;\n  });\n  if (layout === void 0) {\n    layout = layouts[layouts.length - 1];\n    if (layout) {\n      log.warn(\n        `No layout found for: participantCount: ${participantCount}, width/height: ${width}/${height} fallback to biggest available layout (${layout}).`\n      );\n    } else {\n      throw new Error(`No layout or fallback layout found.`);\n    }\n  }\n  if (width < layout.minWidth || height < layout.minHeight) {\n    if (currentLayoutIndex > 0) {\n      const smallerLayout = layouts[currentLayoutIndex - 1];\n      layout = selectGridLayout(\n        layouts.slice(0, currentLayoutIndex),\n        smallerLayout.maxTiles,\n        width,\n        height\n      );\n    }\n  }\n  return layout;\n}\nfunction expandAndSortLayoutDefinitions(layouts) {\n  return [...layouts].map((layout) => {\n    var _a, _b;\n    return {\n      name: `${layout.columns}x${layout.rows}`,\n      columns: layout.columns,\n      rows: layout.rows,\n      maxTiles: layout.columns * layout.rows,\n      minWidth: (_a = layout.minWidth) != null ? _a : 0,\n      minHeight: (_b = layout.minHeight) != null ? _b : 0,\n      orientation: layout.orientation\n    };\n  }).sort((a, b) => {\n    if (a.maxTiles !== b.maxTiles) {\n      return a.maxTiles - b.maxTiles;\n    } else if (a.minWidth !== 0 || b.minWidth !== 0) {\n      return a.minWidth - b.minWidth;\n    } else if (a.minHeight !== 0 || b.minHeight !== 0) {\n      return a.minHeight - b.minHeight;\n    } else {\n      return 0;\n    }\n  });\n}\n\n// src/helper/set-helper.ts\nfunction setDifference(setA, setB) {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\n\n// src/helper/featureDetection.ts\nfunction supportsScreenSharing() {\n  return typeof navigator !== \"undefined\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\n\n// src/helper/transcriptions.ts\nfunction getActiveTranscriptionSegments(segments, syncTimes, maxAge = 0) {\n  return segments.filter((segment) => {\n    var _a;\n    const hasTrackSync = !!syncTimes.rtpTimestamp;\n    const currentTrackTime = (_a = syncTimes.rtpTimestamp) != null ? _a : performance.timeOrigin + performance.now();\n    const displayStartTime = hasTrackSync ? Math.max(segment.receivedAtMediaTimestamp, segment.startTime) : segment.receivedAt;\n    const segmentDuration = maxAge + segment.endTime - segment.startTime;\n    return currentTrackTime >= displayStartTime && currentTrackTime <= displayStartTime + segmentDuration;\n  });\n}\nfunction addMediaTimestampToTranscription(segment, timestamps) {\n  var _a;\n  return __spreadProps(__spreadValues({}, segment), {\n    receivedAtMediaTimestamp: (_a = timestamps.rtpTimestamp) != null ? _a : 0,\n    receivedAt: timestamps.timestamp\n  });\n}\nfunction dedupeSegments(prevSegments, newSegments, windowSize) {\n  return [...prevSegments, ...newSegments].reduceRight((acc, segment) => {\n    if (!acc.find((val) => val.id === segment.id)) {\n      acc.unshift(segment);\n    }\n    return acc;\n  }, []).slice(0 - windowSize);\n}\nfunction didActiveSegmentsChange(prevActive, newActive) {\n  if (newActive.length !== prevActive.length) {\n    return true;\n  }\n  return !newActive.every((newSegment) => {\n    return prevActive.find(\n      (prevSegment) => prevSegment.id === newSegment.id && prevSegment.text === newSegment.text && prevSegment.final === newSegment.final && prevSegment.language === newSegment.language && prevSegment.startTime === newSegment.startTime && prevSegment.endTime === newSegment.endTime\n    );\n  });\n}\n\n// src/types.ts\nvar PIN_DEFAULT_STATE = [];\nvar WIDGET_DEFAULT_STATE = {\n  showChat: false,\n  unreadMessages: 0,\n  showSettings: false\n};\nfunction isSourceWitOptions(source) {\n  return typeof source === \"object\";\n}\nfunction isSourcesWithOptions(sources) {\n  return Array.isArray(sources) && sources.filter(isSourceWitOptions).length > 0;\n}\n\n// src/sorting/sort-track-bundles.ts\nimport { Track as Track2 } from \"livekit-client\";\n\n// src/sorting/base-sort-functions.ts\nimport { Track } from \"livekit-client\";\nfunction sortParticipantsByAudioLevel(a, b) {\n  return b.audioLevel - a.audioLevel;\n}\nfunction sortParticipantsByIsSpeaking(a, b) {\n  if (a.isSpeaking === b.isSpeaking) {\n    return 0;\n  } else {\n    return a.isSpeaking ? -1 : 1;\n  }\n}\nfunction sortParticipantsByLastSpokenAT(a, b) {\n  var _a, _b, _c, _d;\n  if (a.lastSpokeAt !== void 0 || b.lastSpokeAt !== void 0) {\n    return ((_b = (_a = b.lastSpokeAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = a.lastSpokeAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n  } else {\n    return 0;\n  }\n}\nfunction sortParticipantsByJoinedAt(a, b) {\n  var _a, _b, _c, _d;\n  return ((_b = (_a = a.joinedAt) == null ? void 0 : _a.getTime()) != null ? _b : 0) - ((_d = (_c = b.joinedAt) == null ? void 0 : _c.getTime()) != null ? _d : 0);\n}\nfunction sortTrackReferencesByType(a, b) {\n  if (isTrackReference(a)) {\n    if (isTrackReference(b)) {\n      return 0;\n    } else {\n      return -1;\n    }\n  } else if (isTrackReference(b)) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\nfunction sortTrackRefsByIsCameraEnabled(a, b) {\n  const aVideo = a.participant.isCameraEnabled;\n  const bVideo = b.participant.isCameraEnabled;\n  if (aVideo !== bVideo) {\n    if (aVideo) {\n      return -1;\n    } else {\n      return 1;\n    }\n  } else {\n    return 0;\n  }\n}\n\n// src/sorting/sort-track-bundles.ts\nfunction sortTrackReferences(tracks) {\n  const localTracks = [];\n  const screenShareTracks = [];\n  const cameraTracks = [];\n  const undefinedTracks = [];\n  tracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal && trackRef.source === Track2.Source.Camera) {\n      localTracks.push(trackRef);\n    } else if (trackRef.source === Track2.Source.ScreenShare) {\n      screenShareTracks.push(trackRef);\n    } else if (trackRef.source === Track2.Source.Camera) {\n      cameraTracks.push(trackRef);\n    } else {\n      undefinedTracks.push(trackRef);\n    }\n  });\n  const sortedScreenShareTracks = sortScreenShareTracks(screenShareTracks);\n  const sortedCameraTracks = sortCameraTracks(cameraTracks);\n  return [...localTracks, ...sortedScreenShareTracks, ...sortedCameraTracks, ...undefinedTracks];\n}\nfunction sortScreenShareTracks(screenShareTracks) {\n  const localScreenShares = [];\n  const remoteScreenShares = [];\n  screenShareTracks.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localScreenShares.push(trackRef);\n    } else {\n      remoteScreenShares.push(trackRef);\n    }\n  });\n  localScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  remoteScreenShares.sort((a, b) => sortParticipantsByJoinedAt(a.participant, b.participant));\n  const sortedScreenShareTrackRefs = [...remoteScreenShares, ...localScreenShares];\n  return sortedScreenShareTrackRefs;\n}\nfunction sortCameraTracks(cameraTrackReferences) {\n  const localCameraTracks = [];\n  const remoteCameraTracks = [];\n  cameraTrackReferences.forEach((trackRef) => {\n    if (trackRef.participant.isLocal) {\n      localCameraTracks.push(trackRef);\n    } else {\n      remoteCameraTracks.push(trackRef);\n    }\n  });\n  remoteCameraTracks.sort((a, b) => {\n    if (a.participant.isSpeaking && b.participant.isSpeaking) {\n      return sortParticipantsByAudioLevel(a.participant, b.participant);\n    }\n    if (a.participant.isSpeaking !== b.participant.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a.participant, b.participant);\n    }\n    if (a.participant.lastSpokeAt !== b.participant.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a.participant, b.participant);\n    }\n    if (isTrackReference(a) !== isTrackReference(b)) {\n      return sortTrackReferencesByType(a, b);\n    }\n    if (a.participant.isCameraEnabled !== b.participant.isCameraEnabled) {\n      return sortTrackRefsByIsCameraEnabled(a, b);\n    }\n    return sortParticipantsByJoinedAt(a.participant, b.participant);\n  });\n  return [...localCameraTracks, ...remoteCameraTracks];\n}\n\n// src/sorting/sort-participants.ts\nimport { LocalParticipant as LocalParticipant2 } from \"livekit-client\";\nfunction sortParticipants(participants) {\n  const sortedParticipants = [...participants];\n  sortedParticipants.sort((a, b) => {\n    if (a.isSpeaking && b.isSpeaking) {\n      return sortParticipantsByAudioLevel(a, b);\n    }\n    if (a.isSpeaking !== b.isSpeaking) {\n      return sortParticipantsByIsSpeaking(a, b);\n    }\n    if (a.lastSpokeAt !== b.lastSpokeAt) {\n      return sortParticipantsByLastSpokenAT(a, b);\n    }\n    const aVideo = a.videoTrackPublications.size > 0;\n    const bVideo = b.videoTrackPublications.size > 0;\n    if (aVideo !== bVideo) {\n      if (aVideo) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n    return sortParticipantsByJoinedAt(a, b);\n  });\n  const localParticipant = sortedParticipants.find((p) => p instanceof LocalParticipant2);\n  if (localParticipant) {\n    const localIdx = sortedParticipants.indexOf(localParticipant);\n    if (localIdx >= 0) {\n      sortedParticipants.splice(localIdx, 1);\n      if (sortedParticipants.length > 0) {\n        sortedParticipants.splice(0, 0, localParticipant);\n      } else {\n        sortedParticipants.push(localParticipant);\n      }\n    }\n  }\n  return sortedParticipants;\n}\n\n// src/helper/array-helper.ts\nfunction chunk(input, size) {\n  return input.reduce(\n    (arr, item, idx) => {\n      return idx % size === 0 ? [...arr, [item]] : [...arr.slice(0, -1), [...arr.slice(-1)[0], item]];\n    },\n    []\n  );\n}\nfunction zip(a1, a2) {\n  const resultLength = Math.max(a1.length, a2.length);\n  return new Array(resultLength).fill([]).map((_val, idx) => [a1[idx], a2[idx]]);\n}\nfunction differenceBy(a1, a2, by) {\n  return a1.filter((c) => !a2.map((v) => by(v)).includes(by(c)));\n}\n\n// src/track-reference/test-utils.ts\nimport { Participant, Track as Track3, TrackPublication } from \"livekit-client\";\nfunction flatTrackReferenceArray(list) {\n  return list.map((item) => {\n    if (typeof item === \"string\" || typeof item === \"number\") {\n      return `${item}`;\n    } else {\n      return getTrackReferenceId(item);\n    }\n  });\n}\n\n// src/sorting/tile-array-update.ts\nfunction visualPageChange(state, next) {\n  return {\n    dropped: differenceBy(state, next, getTrackReferenceId),\n    added: differenceBy(next, state, getTrackReferenceId)\n  };\n}\nfunction listNeedsUpdating(changes) {\n  return changes.added.length !== 0 || changes.dropped.length !== 0;\n}\nfunction findIndex(trackReference, trackReferences) {\n  const indexToReplace = trackReferences.findIndex(\n    (trackReference_) => getTrackReferenceId(trackReference_) === getTrackReferenceId(trackReference)\n  );\n  if (indexToReplace === -1) {\n    throw new Error(\n      `Element not part of the array: ${getTrackReferenceId(\n        trackReference\n      )} not in ${flatTrackReferenceArray(trackReferences)}`\n    );\n  }\n  return indexToReplace;\n}\nfunction swapItems(moveForward, moveBack, trackReferences) {\n  const indexToReplace = findIndex(moveForward, trackReferences);\n  const indexReplaceWith = findIndex(moveBack, trackReferences);\n  trackReferences.splice(indexToReplace, 1, moveBack);\n  trackReferences.splice(indexReplaceWith, 1, moveForward);\n  return trackReferences;\n}\nfunction dropItem(itemToDrop, list) {\n  const indexOfElementToDrop = findIndex(itemToDrop, list);\n  list.splice(indexOfElementToDrop, 1);\n  return list;\n}\nfunction addItem(itemToAdd, list) {\n  return [...list, itemToAdd];\n}\nfunction divideIntoPages(list, maxElementsOnPage) {\n  const pages = chunk(list, maxElementsOnPage);\n  return pages;\n}\nfunction updatePages(currentList, nextList, maxItemsOnPage) {\n  let updatedList = refreshList(currentList, nextList);\n  if (updatedList.length < nextList.length) {\n    const addedItems = differenceBy(nextList, updatedList, getTrackReferenceId);\n    updatedList = [...updatedList, ...addedItems];\n  }\n  const currentPages = divideIntoPages(updatedList, maxItemsOnPage);\n  const nextPages = divideIntoPages(nextList, maxItemsOnPage);\n  zip(currentPages, nextPages).forEach(([currentPage, nextPage], pageIndex) => {\n    if (currentPage && nextPage) {\n      const updatedPage = divideIntoPages(updatedList, maxItemsOnPage)[pageIndex];\n      const changes = visualPageChange(updatedPage, nextPage);\n      if (listNeedsUpdating(changes)) {\n        log.debug(\n          `Detected visual changes on page: ${pageIndex}, current: ${flatTrackReferenceArray(\n            currentPage\n          )}, next: ${flatTrackReferenceArray(nextPage)}`,\n          { changes }\n        );\n        if (changes.added.length === changes.dropped.length) {\n          zip(changes.added, changes.dropped).forEach(([added, dropped]) => {\n            if (added && dropped) {\n              updatedList = swapItems(added, dropped, updatedList);\n            } else {\n              throw new Error(\n                `For a swap action we need a addition and a removal one is missing: ${added}, ${dropped}`\n              );\n            }\n          });\n        }\n        if (changes.added.length === 0 && changes.dropped.length > 0) {\n          changes.dropped.forEach((item) => {\n            updatedList = dropItem(item, updatedList);\n          });\n        }\n        if (changes.added.length > 0 && changes.dropped.length === 0) {\n          changes.added.forEach((item) => {\n            updatedList = addItem(item, updatedList);\n          });\n        }\n      }\n    }\n  });\n  if (updatedList.length > nextList.length) {\n    const missingItems = differenceBy(updatedList, nextList, getTrackReferenceId);\n    updatedList = updatedList.filter(\n      (item) => !missingItems.map(getTrackReferenceId).includes(getTrackReferenceId(item))\n    );\n  }\n  return updatedList;\n}\nfunction refreshList(currentList, nextList) {\n  return currentList.map((currentItem) => {\n    const updateForCurrentItem = nextList.find(\n      (newItem_) => (\n        // If the IDs match or ..\n        getTrackReferenceId(currentItem) === getTrackReferenceId(newItem_) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof currentItem !== \"number\" && isTrackReferencePlaceholder(currentItem) && isTrackReference(newItem_) && isPlaceholderReplacement(currentItem, newItem_)\n      )\n    );\n    return updateForCurrentItem != null ? updateForCurrentItem : currentItem;\n  });\n}\n\n// src/components/mediaToggle.ts\nimport { Track as Track7 } from \"livekit-client\";\nimport { Subject as Subject2, map as map4, startWith as startWith4 } from \"rxjs\";\n\n// src/observables/participant.ts\nimport { ParticipantEvent as ParticipantEvent2, RoomEvent as RoomEvent3, Track as Track6 } from \"livekit-client\";\nimport { Observable as Observable2, map as map3, startWith as startWith3, switchMap } from \"rxjs\";\n\n// src/components/mediaTrack.ts\nimport { Track as Track4 } from \"livekit-client\";\nimport { map, startWith } from \"rxjs\";\n\n// src/styles-interface/class-prefixer.ts\nfunction prefixClass(unprefixedClassName) {\n  return `${cssPrefix}-${unprefixedClassName}`;\n}\n\n// src/components/mediaTrack.ts\nfunction setupMediaTrack(trackIdentifier) {\n  const initialPub = getTrackByIdentifier(trackIdentifier);\n  const trackObserver = observeParticipantMedia(trackIdentifier.participant).pipe(\n    map(() => {\n      return getTrackByIdentifier(trackIdentifier);\n    }),\n    startWith(initialPub)\n  );\n  const className = prefixClass(\n    trackIdentifier.source === Track4.Source.Camera || trackIdentifier.source === Track4.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  );\n  return { className, trackObserver };\n}\nfunction getTrackByIdentifier(options) {\n  if (isTrackReference(options)) {\n    return options.publication;\n  } else {\n    const { source, name, participant } = options;\n    if (source && name) {\n      return participant.getTrackPublications().find((pub) => pub.source === source && pub.trackName === name);\n    } else if (name) {\n      return participant.getTrackPublicationByName(name);\n    } else if (source) {\n      return participant.getTrackPublication(source);\n    } else {\n      throw new Error(\"At least one of source and name needs to be defined\");\n    }\n  }\n}\n\n// src/observables/room.ts\nimport { Subject, map as map2, Observable, startWith as startWith2, finalize, filter, concat } from \"rxjs\";\nimport { LocalParticipant as LocalParticipant3, Room, RoomEvent as RoomEvent2, Track as Track5 } from \"livekit-client\";\nfunction observeRoomEvents(room, ...events) {\n  const observable = new Observable((subscribe) => {\n    const onRoomUpdate = () => {\n      subscribe.next(room);\n    };\n    events.forEach((evt) => {\n      room.on(evt, onRoomUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        room.off(evt, onRoomUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe(startWith2(room));\n  return observable;\n}\nfunction roomEventSelector(room, event) {\n  const observable = new Observable((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    room.on(event, update);\n    const unsubscribe = () => {\n      room.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction roomObserver(room) {\n  const observable = observeRoomEvents(\n    room,\n    RoomEvent2.ParticipantConnected,\n    RoomEvent2.ParticipantDisconnected,\n    RoomEvent2.ActiveSpeakersChanged,\n    RoomEvent2.TrackSubscribed,\n    RoomEvent2.TrackUnsubscribed,\n    RoomEvent2.LocalTrackPublished,\n    RoomEvent2.LocalTrackUnpublished,\n    RoomEvent2.AudioPlaybackStatusChanged,\n    RoomEvent2.ConnectionStateChanged\n  ).pipe(startWith2(room));\n  return observable;\n}\nfunction connectionStateObserver(room) {\n  return roomEventSelector(room, RoomEvent2.ConnectionStateChanged).pipe(\n    map2(([connectionState]) => connectionState),\n    startWith2(room.state)\n  );\n}\nfunction screenShareObserver(room) {\n  let screenShareSubscriber;\n  const observers = [];\n  const observable = new Observable((subscriber) => {\n    screenShareSubscriber = subscriber;\n    return () => {\n      observers.forEach((observer) => {\n        observer.unsubscribe();\n      });\n    };\n  });\n  const screenShareTracks = [];\n  const handleSub = (publication, participant) => {\n    if (publication.source !== Track5.Source.ScreenShare && publication.source !== Track5.Source.ScreenShareAudio) {\n      return;\n    }\n    let trackMap = screenShareTracks.find((tr) => tr.participant.identity === participant.identity);\n    const getScreenShareTracks = (participant2) => {\n      return participant2.getTrackPublications().filter(\n        (track) => (track.source === Track5.Source.ScreenShare || track.source === Track5.Source.ScreenShareAudio) && track.track\n      );\n    };\n    if (!trackMap) {\n      trackMap = {\n        participant,\n        tracks: getScreenShareTracks(participant)\n      };\n    } else {\n      const index = screenShareTracks.indexOf(trackMap);\n      screenShareTracks.splice(index, 1);\n      trackMap.tracks = getScreenShareTracks(participant);\n    }\n    if (trackMap.tracks.length > 0) {\n      screenShareTracks.push(trackMap);\n    }\n    screenShareSubscriber.next(screenShareTracks);\n  };\n  observers.push(\n    roomEventSelector(room, RoomEvent2.TrackSubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, RoomEvent2.TrackUnsubscribed).subscribe(\n      ([, ...args]) => handleSub(...args)\n    )\n  );\n  observers.push(\n    roomEventSelector(room, RoomEvent2.LocalTrackPublished).subscribe((args) => handleSub(...args))\n  );\n  observers.push(\n    roomEventSelector(room, RoomEvent2.LocalTrackUnpublished).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, RoomEvent2.TrackMuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  observers.push(\n    roomEventSelector(room, RoomEvent2.TrackUnmuted).subscribe((args) => {\n      handleSub(...args);\n    })\n  );\n  setTimeout(() => {\n    for (const p of room.remoteParticipants.values()) {\n      p.getTrackPublications().forEach((track) => {\n        handleSub(track, p);\n      });\n    }\n  }, 1);\n  return observable;\n}\nfunction roomInfoObserver(room) {\n  const observer = observeRoomEvents(\n    room,\n    RoomEvent2.RoomMetadataChanged,\n    RoomEvent2.ConnectionStateChanged\n  ).pipe(\n    map2((r) => {\n      return { name: r.name, metadata: r.metadata };\n    })\n  );\n  return observer;\n}\nfunction activeSpeakerObserver(room) {\n  return roomEventSelector(room, RoomEvent2.ActiveSpeakersChanged).pipe(\n    map2(([speakers]) => speakers)\n  );\n}\nfunction createMediaDeviceObserver(kind, onError, requestPermissions = true) {\n  var _a;\n  const onDeviceChange = () => __async(this, null, function* () {\n    try {\n      const newDevices = yield Room.getLocalDevices(kind, requestPermissions);\n      deviceSubject.next(newDevices);\n    } catch (e) {\n      onError == null ? void 0 : onError(e);\n    }\n  });\n  const deviceSubject = new Subject();\n  const observable = deviceSubject.pipe(\n    finalize(() => {\n      var _a2;\n      (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.removeEventListener(\"devicechange\", onDeviceChange);\n    })\n  );\n  if (typeof window !== \"undefined\") {\n    if (!window.isSecureContext) {\n      throw new Error(\n        `Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices`\n      );\n    }\n    (_a = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a.addEventListener(\"devicechange\", onDeviceChange);\n  }\n  return concat(\n    Room.getLocalDevices(kind, requestPermissions).catch((e) => {\n      onError == null ? void 0 : onError(e);\n      return [];\n    }),\n    observable\n  );\n}\nfunction createDataObserver(room) {\n  return roomEventSelector(room, RoomEvent2.DataReceived);\n}\nfunction createChatObserver(room) {\n  return roomEventSelector(room, RoomEvent2.ChatMessage);\n}\nfunction roomAudioPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, RoomEvent2.AudioPlaybackStatusChanged).pipe(\n    map2((room2) => {\n      return { canPlayAudio: room2.canPlaybackAudio };\n    })\n  );\n  return observable;\n}\nfunction roomVideoPlaybackAllowedObservable(room) {\n  const observable = observeRoomEvents(room, RoomEvent2.VideoPlaybackStatusChanged).pipe(\n    map2((room2) => {\n      return { canPlayVideo: room2.canPlaybackVideo };\n    })\n  );\n  return observable;\n}\nfunction createActiveDeviceObservable(room, kind) {\n  return roomEventSelector(room, RoomEvent2.ActiveDeviceChanged).pipe(\n    filter(([kindOfDevice]) => kindOfDevice === kind),\n    map2(([kind2, deviceId]) => {\n      log.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: kind2, deviceId });\n      return deviceId;\n    }),\n    startWith2(room.getActiveDevice(kind))\n  );\n}\nfunction encryptionStatusObservable(room, participant) {\n  return roomEventSelector(room, RoomEvent2.ParticipantEncryptionStatusChanged).pipe(\n    filter(\n      ([, p]) => (participant == null ? void 0 : participant.identity) === (p == null ? void 0 : p.identity) || !p && (participant == null ? void 0 : participant.identity) === room.localParticipant.identity\n    ),\n    map2(([encrypted]) => encrypted),\n    startWith2(\n      participant instanceof LocalParticipant3 ? participant.isE2EEEnabled : !!(participant == null ? void 0 : participant.isEncrypted)\n    )\n  );\n}\nfunction recordingStatusObservable(room) {\n  return roomEventSelector(room, RoomEvent2.RecordingStatusChanged).pipe(\n    map2(([recording]) => recording),\n    startWith2(room.isRecording)\n  );\n}\n\n// src/observables/participant.ts\nfunction observeParticipantEvents(participant, ...events) {\n  const observable = new Observable2((subscribe) => {\n    const onParticipantUpdate = () => {\n      subscribe.next(participant);\n    };\n    events.forEach((evt) => {\n      participant.on(evt, onParticipantUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        participant.off(evt, onParticipantUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe(startWith3(participant));\n  return observable;\n}\nfunction observeParticipantMedia(participant) {\n  const participantObserver = observeParticipantEvents(\n    participant,\n    ParticipantEvent2.TrackMuted,\n    ParticipantEvent2.TrackUnmuted,\n    ParticipantEvent2.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    ParticipantEvent2.TrackPublished,\n    ParticipantEvent2.TrackUnpublished,\n    ParticipantEvent2.LocalTrackPublished,\n    ParticipantEvent2.LocalTrackUnpublished,\n    ParticipantEvent2.MediaDevicesError,\n    ParticipantEvent2.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    map3((p) => {\n      const { isMicrophoneEnabled, isCameraEnabled, isScreenShareEnabled } = p;\n      const microphoneTrack = p.getTrackPublication(Track6.Source.Microphone);\n      const cameraTrack = p.getTrackPublication(Track6.Source.Camera);\n      const participantMedia = {\n        isCameraEnabled,\n        isMicrophoneEnabled,\n        isScreenShareEnabled,\n        cameraTrack,\n        microphoneTrack,\n        participant: p\n      };\n      return participantMedia;\n    })\n  );\n  return participantObserver;\n}\nfunction createTrackObserver(participant, options) {\n  return observeParticipantMedia(participant).pipe(\n    map3(() => {\n      return { publication: getTrackByIdentifier(options) };\n    })\n  );\n}\nfunction participantInfoObserver(participant) {\n  if (!participant) {\n    return void 0;\n  }\n  const observer = observeParticipantEvents(\n    participant,\n    ParticipantEvent2.ParticipantMetadataChanged,\n    ParticipantEvent2.ParticipantNameChanged\n  ).pipe(\n    map3(({ name, identity, metadata }) => {\n      return {\n        name,\n        identity,\n        metadata\n      };\n    }),\n    startWith3({\n      name: participant.name,\n      identity: participant.identity,\n      metadata: participant.metadata\n    })\n  );\n  return observer;\n}\nfunction createConnectionQualityObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    ParticipantEvent2.ConnectionQualityChanged\n  ).pipe(\n    map3(([quality]) => quality),\n    startWith3(participant.connectionQuality)\n  );\n  return observer;\n}\nfunction participantEventSelector(participant, event) {\n  const observable = new Observable2((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    participant.on(event, update);\n    const unsubscribe = () => {\n      participant.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction mutedObserver(trackRef) {\n  var _a, _b, _c, _d;\n  return observeParticipantEvents(\n    trackRef.participant,\n    ParticipantEvent2.TrackMuted,\n    ParticipantEvent2.TrackUnmuted,\n    ParticipantEvent2.TrackSubscribed,\n    ParticipantEvent2.TrackUnsubscribed,\n    ParticipantEvent2.LocalTrackPublished,\n    ParticipantEvent2.LocalTrackUnpublished\n  ).pipe(\n    map3((participant) => {\n      var _a2, _b2;\n      const pub = (_a2 = trackRef.publication) != null ? _a2 : participant.getTrackPublication(trackRef.source);\n      return (_b2 = pub == null ? void 0 : pub.isMuted) != null ? _b2 : true;\n    }),\n    startWith3(\n      (_d = (_c = (_a = trackRef.publication) == null ? void 0 : _a.isMuted) != null ? _c : (_b = trackRef.participant.getTrackPublication(trackRef.source)) == null ? void 0 : _b.isMuted) != null ? _d : true\n    )\n  );\n}\nfunction createIsSpeakingObserver(participant) {\n  return participantEventSelector(participant, ParticipantEvent2.IsSpeakingChanged).pipe(\n    map3(([isSpeaking]) => isSpeaking)\n  );\n}\nfunction connectedParticipantsObserver(room, options = {}) {\n  var _a;\n  let subscriber;\n  const observable = new Observable2((sub) => {\n    subscriber = sub;\n    return () => listener.unsubscribe();\n  }).pipe(startWith3(Array.from(room.remoteParticipants.values())));\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const roomEvents = Array.from(\n    /* @__PURE__ */ new Set([\n      RoomEvent3.ParticipantConnected,\n      RoomEvent3.ParticipantDisconnected,\n      RoomEvent3.ConnectionStateChanged,\n      ...additionalRoomEvents\n    ])\n  );\n  const listener = observeRoomEvents(room, ...roomEvents).subscribe(\n    (r) => subscriber == null ? void 0 : subscriber.next(Array.from(r.remoteParticipants.values()))\n  );\n  if (room.remoteParticipants.size > 0) {\n    subscriber == null ? void 0 : subscriber.next(Array.from(room.remoteParticipants.values()));\n  }\n  return observable;\n}\nfunction connectedParticipantObserver(room, identity, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const observable = observeRoomEvents(\n    room,\n    RoomEvent3.ParticipantConnected,\n    RoomEvent3.ParticipantDisconnected,\n    RoomEvent3.ConnectionStateChanged\n  ).pipe(\n    switchMap((r) => {\n      const participant = r.getParticipantByIdentity(identity);\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new Observable2((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    startWith3(room.getParticipantByIdentity(identity))\n  );\n  return observable;\n}\nfunction participantPermissionObserver(participant) {\n  const observer = participantEventSelector(\n    participant,\n    ParticipantEvent2.ParticipantPermissionsChanged\n  ).pipe(\n    map3(() => participant.permissions),\n    startWith3(participant.permissions)\n  );\n  return observer;\n}\nfunction participantByIdentifierObserver(room, { kind, identity }, options = {}) {\n  var _a;\n  const additionalEvents = (_a = options.additionalEvents) != null ? _a : allParticipantEvents;\n  const matchesIdentifier = (participant) => {\n    let isMatch = true;\n    if (kind) {\n      isMatch = isMatch && participant.kind === kind;\n    }\n    if (identity) {\n      isMatch = isMatch && participant.identity === identity;\n    }\n    return isMatch;\n  };\n  const observable = observeRoomEvents(\n    room,\n    RoomEvent3.ParticipantConnected,\n    RoomEvent3.ParticipantDisconnected,\n    RoomEvent3.ConnectionStateChanged\n  ).pipe(\n    switchMap((r) => {\n      const participant = Array.from(r.remoteParticipants.values()).find(\n        (p) => matchesIdentifier(p)\n      );\n      if (participant) {\n        return observeParticipantEvents(participant, ...additionalEvents);\n      } else {\n        return new Observable2((subscribe) => subscribe.next(void 0));\n      }\n    }),\n    startWith3(Array.from(room.remoteParticipants.values()).find((p) => matchesIdentifier(p)))\n  );\n  return observable;\n}\nfunction participantAttributesObserver(participant) {\n  if (typeof participant === \"undefined\") {\n    return new Observable2();\n  }\n  return participantEventSelector(participant, ParticipantEvent2.AttributesChanged).pipe(\n    map3(([changedAttributes]) => {\n      return {\n        changed: changedAttributes,\n        attributes: participant.attributes\n      };\n    }),\n    startWith3({ changed: participant.attributes, attributes: participant.attributes })\n  );\n}\n\n// src/components/mediaToggle.ts\nfunction setupMediaToggle(source, room, options, publishOptions, onError) {\n  const { localParticipant } = room;\n  const getSourceEnabled = (source2, localParticipant2) => {\n    let isEnabled = false;\n    switch (source2) {\n      case Track7.Source.Camera:\n        isEnabled = localParticipant2.isCameraEnabled;\n        break;\n      case Track7.Source.Microphone:\n        isEnabled = localParticipant2.isMicrophoneEnabled;\n        break;\n      case Track7.Source.ScreenShare:\n        isEnabled = localParticipant2.isScreenShareEnabled;\n        break;\n      default:\n        break;\n    }\n    return isEnabled;\n  };\n  const enabledObserver = observeParticipantMedia(localParticipant).pipe(\n    map4((media) => {\n      return getSourceEnabled(source, media.participant);\n    }),\n    startWith4(getSourceEnabled(source, localParticipant))\n  );\n  const pendingSubject = new Subject2();\n  const toggle = (forceState, captureOptions) => __async(this, null, function* () {\n    try {\n      captureOptions != null ? captureOptions : captureOptions = options;\n      pendingSubject.next(true);\n      switch (source) {\n        case Track7.Source.Camera:\n          yield localParticipant.setCameraEnabled(\n            forceState != null ? forceState : !localParticipant.isCameraEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isCameraEnabled;\n        case Track7.Source.Microphone:\n          yield localParticipant.setMicrophoneEnabled(\n            forceState != null ? forceState : !localParticipant.isMicrophoneEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isMicrophoneEnabled;\n        case Track7.Source.ScreenShare:\n          yield localParticipant.setScreenShareEnabled(\n            forceState != null ? forceState : !localParticipant.isScreenShareEnabled,\n            captureOptions,\n            publishOptions\n          );\n          return localParticipant.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (e) {\n      if (onError && e instanceof Error) {\n        onError == null ? void 0 : onError(e);\n        return void 0;\n      } else {\n        throw e;\n      }\n    } finally {\n      pendingSubject.next(false);\n    }\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver,\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\nfunction setupManualToggle() {\n  let state = false;\n  const enabledSubject = new Subject2();\n  const pendingSubject = new Subject2();\n  const toggle = (forceState) => __async(this, null, function* () {\n    pendingSubject.next(true);\n    state = forceState != null ? forceState : !state;\n    enabledSubject.next(state);\n    pendingSubject.next(false);\n  });\n  const className = prefixClass(\"button\");\n  return {\n    className,\n    toggle,\n    enabledObserver: enabledSubject.asObservable(),\n    pendingObserver: pendingSubject.asObservable()\n  };\n}\n\n// src/components/mediaDeviceSelect.ts\nimport {\n  Track as Track8\n} from \"livekit-client\";\nimport { BehaviorSubject } from \"rxjs\";\nfunction setupDeviceSelector(kind, room, localTrack) {\n  const activeDeviceSubject = new BehaviorSubject(void 0);\n  const activeDeviceObservable = room ? createActiveDeviceObservable(room, kind) : activeDeviceSubject.asObservable();\n  const setActiveMediaDevice = (_0, ..._1) => __async(this, [_0, ..._1], function* (id, options = {}) {\n    var _a, _b, _c;\n    if (room) {\n      log.debug(`Switching active device of kind \"${kind}\" with id ${id}.`);\n      yield room.switchActiveDevice(kind, id, options.exact);\n      const actualDeviceId = (_a = room.getActiveDevice(kind)) != null ? _a : id;\n      if (actualDeviceId !== id && id !== \"default\") {\n        log.info(\n          `We tried to select the device with id (${id}), but the browser decided to select the device with id (${actualDeviceId}) instead.`\n        );\n      }\n      let targetTrack = void 0;\n      if (kind === \"audioinput\")\n        targetTrack = (_b = room.localParticipant.getTrackPublication(Track8.Source.Microphone)) == null ? void 0 : _b.track;\n      else if (kind === \"videoinput\") {\n        targetTrack = (_c = room.localParticipant.getTrackPublication(Track8.Source.Camera)) == null ? void 0 : _c.track;\n      }\n      const useDefault = id === \"default\" && !targetTrack || id === \"default\" && (targetTrack == null ? void 0 : targetTrack.mediaStreamTrack.label.startsWith(\"Default\"));\n      activeDeviceSubject.next(useDefault ? id : actualDeviceId);\n    } else if (localTrack) {\n      yield localTrack.setDeviceId(options.exact ? { exact: id } : id);\n      const actualId = yield localTrack.getDeviceId();\n      activeDeviceSubject.next(\n        id === \"default\" && localTrack.mediaStreamTrack.label.startsWith(\"Default\") ? id : actualId\n      );\n    } else if (activeDeviceSubject.value !== id) {\n      log.warn(\n        \"device switch skipped, please provide either a room or a local track to switch on. \"\n      );\n      activeDeviceSubject.next(id);\n    }\n  });\n  const className = prefixClass(\"media-device-select\");\n  return {\n    className,\n    activeDeviceObservable,\n    setActiveMediaDevice\n  };\n}\n\n// src/components/disconnectButton.ts\nfunction setupDisconnectButton(room) {\n  const disconnect = (stopTracks) => {\n    room.disconnect(stopTracks);\n  };\n  const className = prefixClass(\"disconnect-button\");\n  return { className, disconnect };\n}\n\n// src/components/connectionQualityIndicator.ts\nfunction setupConnectionQualityIndicator(participant) {\n  const className = prefixClass(\"connection-quality\");\n  const connectionQualityObserver = createConnectionQualityObserver(participant);\n  return { className, connectionQualityObserver };\n}\n\n// src/components/trackMutedIndicator.ts\nimport { Track as Track9 } from \"livekit-client\";\nfunction setupTrackMutedIndicator(trackRef) {\n  let classForSource = \"track-muted-indicator-camera\";\n  switch (trackRef.source) {\n    case Track9.Source.Camera:\n      classForSource = \"track-muted-indicator-camera\";\n      break;\n    case Track9.Source.Microphone:\n      classForSource = \"track-muted-indicator-microphone\";\n      break;\n    default:\n      break;\n  }\n  const className = prefixClass(classForSource);\n  const mediaMutedObserver = mutedObserver(trackRef);\n  return { className, mediaMutedObserver };\n}\n\n// src/components/participantName.ts\nfunction setupParticipantName(participant) {\n  const infoObserver = participantInfoObserver(participant);\n  return { className: \"lk-participant-name\", infoObserver };\n}\n\n// src/components/participantTile.ts\nfunction setupParticipantTile() {\n  const className = prefixClass(\"participant-tile\");\n  return {\n    className\n  };\n}\n\n// src/components/chat.ts\nimport { RoomEvent as RoomEvent4 } from \"livekit-client\";\nimport { BehaviorSubject as BehaviorSubject2, Subject as Subject3, scan, map as map6, takeUntil, merge } from \"rxjs\";\n\n// src/observables/dataChannel.ts\nimport { Observable as Observable3, filter as filter2, map as map5 } from \"rxjs\";\nvar DataTopic = {\n  CHAT: \"lk-chat-topic\",\n  CHAT_UPDATE: \"lk-chat-update-topic\"\n};\nfunction sendMessage(_0, _1) {\n  return __async(this, arguments, function* (localParticipant, payload, options = {}) {\n    const { reliable, destinationIdentities, topic } = options;\n    yield localParticipant.publishData(payload, {\n      destinationIdentities,\n      topic,\n      reliable\n    });\n  });\n}\nfunction setupDataMessageHandler(room, topic, onMessage) {\n  const topics = Array.isArray(topic) ? topic : [topic];\n  const messageObservable = createDataObserver(room).pipe(\n    filter2(\n      ([, , , messageTopic]) => topic === void 0 || messageTopic !== void 0 && topics.includes(messageTopic)\n    ),\n    map5(([payload, participant, , messageTopic]) => {\n      const msg = {\n        payload,\n        topic: messageTopic,\n        from: participant\n      };\n      onMessage == null ? void 0 : onMessage(msg);\n      return msg;\n    })\n  );\n  let isSendingSubscriber;\n  const isSendingObservable = new Observable3((subscriber) => {\n    isSendingSubscriber = subscriber;\n  });\n  const send = (_0, ..._1) => __async(this, [_0, ..._1], function* (payload, options = {}) {\n    isSendingSubscriber.next(true);\n    try {\n      yield sendMessage(room.localParticipant, payload, __spreadValues({ topic: topics[0] }, options));\n    } finally {\n      isSendingSubscriber.next(false);\n    }\n  });\n  return { messageObservable, isSendingObservable, send };\n}\nfunction setupChatMessageHandler(room) {\n  const chatObservable = createChatObserver(room);\n  const send = (text) => __async(this, null, function* () {\n    const msg = yield room.localParticipant.sendChatMessage(text);\n    return msg;\n  });\n  const edit = (text, originalMsg) => __async(this, null, function* () {\n    const msg = yield room.localParticipant.editChatMessage(text, originalMsg);\n    return msg;\n  });\n  return { chatObservable, send, edit };\n}\n\n// src/components/chat.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar topicSubjectMap = /* @__PURE__ */ new Map();\nvar encode = (message) => encoder.encode(JSON.stringify(message));\nvar decode = (message) => JSON.parse(decoder.decode(message));\nfunction setupChat(room, options) {\n  var _a, _b;\n  const onDestroyObservable = new Subject3();\n  const { messageDecoder, messageEncoder, channelTopic, updateChannelTopic } = options != null ? options : {};\n  const topic = channelTopic != null ? channelTopic : DataTopic.CHAT;\n  const updateTopic = updateChannelTopic != null ? updateChannelTopic : DataTopic.CHAT_UPDATE;\n  let needsSetup = false;\n  if (!topicSubjectMap.has(room)) {\n    needsSetup = true;\n  }\n  const topicMap = (_a = topicSubjectMap.get(room)) != null ? _a : /* @__PURE__ */ new Map();\n  const messageSubject = (_b = topicMap.get(topic)) != null ? _b : new Subject3();\n  topicMap.set(topic, messageSubject);\n  topicSubjectMap.set(room, topicMap);\n  if (needsSetup) {\n    const { messageObservable } = setupDataMessageHandler(room, [topic, updateTopic]);\n    messageObservable.pipe(takeUntil(onDestroyObservable)).subscribe(messageSubject);\n  }\n  const { chatObservable, send: sendChatMessage } = setupChatMessageHandler(room);\n  const finalMessageDecoder = messageDecoder != null ? messageDecoder : decode;\n  const messagesObservable = merge(\n    messageSubject.pipe(\n      map6((msg) => {\n        const parsedMessage = finalMessageDecoder(msg.payload);\n        const newMessage = __spreadProps(__spreadValues({}, parsedMessage), { from: msg.from });\n        if (isIgnorableChatMessage(newMessage)) {\n          return void 0;\n        }\n        return newMessage;\n      })\n    ),\n    chatObservable.pipe(\n      map6(([msg, participant]) => {\n        return __spreadProps(__spreadValues({}, msg), { from: participant });\n      })\n    )\n  ).pipe(\n    scan((acc, value) => {\n      var _a2;\n      if (!value) {\n        return acc;\n      }\n      if (\"id\" in value && acc.find((msg) => {\n        var _a3, _b2;\n        return ((_a3 = msg.from) == null ? void 0 : _a3.identity) === ((_b2 = value.from) == null ? void 0 : _b2.identity) && msg.id === value.id;\n      })) {\n        const replaceIndex = acc.findIndex((msg) => msg.id === value.id);\n        if (replaceIndex > -1) {\n          const originalMsg = acc[replaceIndex];\n          acc[replaceIndex] = __spreadProps(__spreadValues({}, value), {\n            timestamp: originalMsg.timestamp,\n            editTimestamp: (_a2 = value.editTimestamp) != null ? _a2 : value.timestamp\n          });\n        }\n        return [...acc];\n      }\n      return [...acc, value];\n    }, []),\n    takeUntil(onDestroyObservable)\n  );\n  const isSending$ = new BehaviorSubject2(false);\n  const finalMessageEncoder = messageEncoder != null ? messageEncoder : encode;\n  const send = (message) => __async(this, null, function* () {\n    isSending$.next(true);\n    try {\n      const chatMessage = yield sendChatMessage(message);\n      const encodedLegacyMsg = finalMessageEncoder(__spreadProps(__spreadValues({}, chatMessage), { ignore: true }));\n      yield sendMessage(room.localParticipant, encodedLegacyMsg, {\n        reliable: true,\n        topic\n      });\n      return chatMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  const update = (message, originalMessageOrId) => __async(this, null, function* () {\n    const timestamp = Date.now();\n    const originalMessage = typeof originalMessageOrId === \"string\" ? { id: originalMessageOrId, message: \"\", timestamp } : originalMessageOrId;\n    isSending$.next(true);\n    try {\n      const editedMessage = yield room.localParticipant.editChatMessage(message, originalMessage);\n      const encodedLegacyMessage = finalMessageEncoder(editedMessage);\n      yield sendMessage(room.localParticipant, encodedLegacyMessage, {\n        topic: updateTopic,\n        reliable: true\n      });\n      return editedMessage;\n    } finally {\n      isSending$.next(false);\n    }\n  });\n  function destroy() {\n    onDestroyObservable.next();\n    onDestroyObservable.complete();\n    topicSubjectMap.delete(room);\n  }\n  room.once(RoomEvent4.Disconnected, destroy);\n  return {\n    messageObservable: messagesObservable,\n    isSendingObservable: isSending$,\n    send,\n    update\n  };\n}\nfunction isIgnorableChatMessage(msg) {\n  return msg.ignore == true;\n}\n\n// src/components/startAudio.ts\nfunction setupStartAudio() {\n  const handleStartAudioPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Audio for room: \", room);\n    yield room.startAudio();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback };\n}\n\n// src/components/startVideo.ts\nfunction setupStartVideo() {\n  const handleStartVideoPlayback = (room) => __async(this, null, function* () {\n    log.info(\"Start Video for room: \", room);\n    yield room.startVideo();\n  });\n  const className = prefixClass(\"start-audio-button\");\n  return { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback };\n}\n\n// src/components/chatToggle.ts\nfunction setupChatToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"chat-toggle\")].join(\" \");\n  return { className };\n}\n\n// src/components/focusToggle.ts\nfunction setupFocusToggle() {\n  const className = [prefixClass(\"button\"), prefixClass(\"focus-toggle-button\")].join(\" \");\n  return { className };\n}\n\n// src/components/clearPinButton.ts\nfunction setupClearPinButton() {\n  const className = \"lk-clear-pin-button lk-button\";\n  return { className };\n}\n\n// src/components/room.ts\nfunction setupLiveKitRoom() {\n  const className = \"lk-room-container\";\n  return { className };\n}\n\n// src/observables/track.ts\nimport { RoomEvent as RoomEvent5, TrackEvent } from \"livekit-client\";\nimport { map as map7, Observable as Observable4, startWith as startWith5 } from \"rxjs\";\nfunction trackObservable(track) {\n  const trackObserver = observeTrackEvents(\n    track,\n    TrackEvent.Muted,\n    TrackEvent.Unmuted,\n    TrackEvent.Subscribed,\n    TrackEvent.Unsubscribed\n  );\n  return trackObserver;\n}\nfunction observeTrackEvents(track, ...events) {\n  const observable = new Observable4((subscribe) => {\n    const onTrackUpdate = () => {\n      subscribe.next(track);\n    };\n    events.forEach((evt) => {\n      track.on(evt, onTrackUpdate);\n    });\n    const unsubscribe = () => {\n      events.forEach((evt) => {\n        track.off(evt, onTrackUpdate);\n      });\n    };\n    return unsubscribe;\n  }).pipe(startWith5(track));\n  return observable;\n}\nfunction getTrackReferences(room, sources, onlySubscribedTracks = true) {\n  const localParticipant = room.localParticipant;\n  const allParticipants = [localParticipant, ...Array.from(room.remoteParticipants.values())];\n  const trackReferences = [];\n  allParticipants.forEach((participant) => {\n    sources.forEach((source) => {\n      const sourceReferences = Array.from(\n        participant.trackPublications.values()\n      ).filter(\n        (track) => track.source === source && // either return all or only the ones that are subscribed\n        (!onlySubscribedTracks || track.track)\n      ).map((track) => {\n        return {\n          participant,\n          publication: track,\n          source: track.source\n        };\n      });\n      trackReferences.push(...sourceReferences);\n    });\n  });\n  return { trackReferences, participants: allParticipants };\n}\nfunction getParticipantTrackRefs(participant, identifier, onlySubscribedTracks = false) {\n  const { sources, kind, name } = identifier;\n  const sourceReferences = Array.from(participant.trackPublications.values()).filter(\n    (pub) => (!sources || sources.includes(pub.source)) && (!kind || pub.kind === kind) && (!name || pub.trackName === name) && // either return all or only the ones that are subscribed\n    (!onlySubscribedTracks || pub.track)\n  ).map((track) => {\n    return {\n      participant,\n      publication: track,\n      source: track.source\n    };\n  });\n  return sourceReferences;\n}\nfunction trackReferencesObservable(room, sources, options) {\n  var _a, _b;\n  const additionalRoomEvents = (_a = options.additionalRoomEvents) != null ? _a : allParticipantRoomEvents;\n  const onlySubscribedTracks = (_b = options.onlySubscribed) != null ? _b : true;\n  const roomEvents = Array.from(\n    (/* @__PURE__ */ new Set([\n      RoomEvent5.ParticipantConnected,\n      RoomEvent5.ParticipantDisconnected,\n      RoomEvent5.ConnectionStateChanged,\n      RoomEvent5.LocalTrackPublished,\n      RoomEvent5.LocalTrackUnpublished,\n      RoomEvent5.TrackPublished,\n      RoomEvent5.TrackUnpublished,\n      RoomEvent5.TrackSubscriptionStatusChanged,\n      ...additionalRoomEvents\n    ])).values()\n  );\n  const observable = observeRoomEvents(room, ...roomEvents).pipe(\n    map7((room2) => {\n      const data = getTrackReferences(room2, sources, onlySubscribedTracks);\n      log.debug(`TrackReference[] was updated. (length ${data.trackReferences.length})`, data);\n      return data;\n    }),\n    startWith5(getTrackReferences(room, sources, onlySubscribedTracks))\n  );\n  return observable;\n}\nfunction participantTracksObservable(participant, trackIdentifier) {\n  const observable = observeParticipantEvents(participant, ...participantTrackEvents).pipe(\n    map7((participant2) => {\n      const data = getParticipantTrackRefs(participant2, trackIdentifier);\n      log.debug(`TrackReference[] was updated. (length ${data.length})`, data);\n      return data;\n    }),\n    startWith5(getParticipantTrackRefs(participant, trackIdentifier))\n  );\n  return observable;\n}\nfunction trackEventSelector(publication, event) {\n  const observable = new Observable4((subscribe) => {\n    const update = (...params) => {\n      subscribe.next(params);\n    };\n    publication.on(event, update);\n    const unsubscribe = () => {\n      publication.off(event, update);\n    };\n    return unsubscribe;\n  });\n  return observable;\n}\nfunction trackTranscriptionObserver(publication) {\n  return trackEventSelector(publication, TrackEvent.TranscriptionReceived);\n}\nfunction trackSyncTimeObserver(track) {\n  return trackEventSelector(track, TrackEvent.TimeSyncUpdate).pipe(\n    map7(([timeUpdate]) => timeUpdate)\n  );\n}\n\n// src/observables/dom-event.ts\nimport { concat as concat2, distinctUntilChanged, fromEvent, map as map8, of, skipUntil, timeout } from \"rxjs\";\nfunction createInteractingObservable(htmlElement, inactiveAfter = 1e3) {\n  if (htmlElement === null) return of(false);\n  const move$ = fromEvent(htmlElement, \"mousemove\", { passive: true }).pipe(map8(() => true));\n  const moveAndStop$ = move$.pipe(\n    timeout({\n      each: inactiveAfter,\n      with: () => concat2(of(false), moveAndStop$.pipe(skipUntil(move$)))\n    }),\n    distinctUntilChanged()\n  );\n  return moveAndStop$;\n}\n\n// src/persistent-storage/local-storage-helpers.ts\nfunction saveToLocalStorage(key, value) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (value) {\n      const nonEmptySettings = Object.fromEntries(\n        Object.entries(value).filter(([, value2]) => value2 !== \"\")\n      );\n      localStorage.setItem(key, JSON.stringify(nonEmptySettings));\n    }\n  } catch (error) {\n    log.error(`Error setting item to local storage: ${error}`);\n  }\n}\nfunction loadFromLocalStorage(key) {\n  if (typeof localStorage === \"undefined\") {\n    log.error(\"Local storage is not available.\");\n    return void 0;\n  }\n  try {\n    const item = localStorage.getItem(key);\n    if (!item) {\n      log.warn(`Item with key ${key} does not exist in local storage.`);\n      return void 0;\n    }\n    return JSON.parse(item);\n  } catch (error) {\n    log.error(`Error getting item from local storage: ${error}`);\n    return void 0;\n  }\n}\nfunction createLocalStorageInterface(key) {\n  return {\n    load: () => loadFromLocalStorage(key),\n    save: (value) => saveToLocalStorage(key, value)\n  };\n}\n\n// src/persistent-storage/user-choices.ts\nvar USER_CHOICES_KEY = `${cssPrefix}-user-choices`;\nvar defaultUserChoices = {\n  videoEnabled: true,\n  audioEnabled: true,\n  videoDeviceId: \"\",\n  audioDeviceId: \"\",\n  username: \"\"\n};\nvar { load, save } = createLocalStorageInterface(USER_CHOICES_KEY);\nfunction saveUserChoices(userChoices, preventSave = false) {\n  if (preventSave === true) {\n    return;\n  }\n  save(userChoices);\n}\nfunction loadUserChoices(defaults, preventLoad = false) {\n  var _a, _b, _c, _d, _e;\n  const fallback = {\n    videoEnabled: (_a = defaults == null ? void 0 : defaults.videoEnabled) != null ? _a : defaultUserChoices.videoEnabled,\n    audioEnabled: (_b = defaults == null ? void 0 : defaults.audioEnabled) != null ? _b : defaultUserChoices.audioEnabled,\n    videoDeviceId: (_c = defaults == null ? void 0 : defaults.videoDeviceId) != null ? _c : defaultUserChoices.videoDeviceId,\n    audioDeviceId: (_d = defaults == null ? void 0 : defaults.audioDeviceId) != null ? _d : defaultUserChoices.audioDeviceId,\n    username: (_e = defaults == null ? void 0 : defaults.username) != null ? _e : defaultUserChoices.username\n  };\n  if (preventLoad) {\n    return fallback;\n  } else {\n    const maybeLoadedObject = load();\n    const result = __spreadValues(__spreadValues({}, fallback), maybeLoadedObject != null ? maybeLoadedObject : {});\n    return result;\n  }\n}\nexport {\n  DataTopic,\n  GRID_LAYOUTS,\n  PIN_DEFAULT_STATE,\n  WIDGET_DEFAULT_STATE,\n  activeSpeakerObserver,\n  addMediaTimestampToTranscription,\n  allParticipantEvents,\n  allParticipantRoomEvents,\n  allRemoteParticipantEvents,\n  allRemoteParticipantRoomEvents,\n  attachIfSubscribed,\n  computeMenuPosition,\n  connectedParticipantObserver,\n  connectedParticipantsObserver,\n  connectionStateObserver,\n  createActiveDeviceObservable,\n  createChatObserver,\n  createConnectionQualityObserver,\n  createDataObserver,\n  createDefaultGrammar,\n  createEmailRegExp,\n  createInteractingObservable,\n  createIsSpeakingObserver,\n  createMediaDeviceObserver,\n  createTrackObserver,\n  createUrlRegExp,\n  cssPrefix,\n  dedupeSegments,\n  defaultUserChoices,\n  didActiveSegmentsChange,\n  encryptionStatusObservable,\n  getActiveTranscriptionSegments,\n  getScrollBarWidth,\n  getTrackByIdentifier,\n  getTrackReferenceId,\n  getTrackReferenceSource,\n  isEqualTrackRef,\n  isLocal,\n  isMobileBrowser,\n  isParticipantTrackReferencePinned,\n  isPlaceholderReplacement,\n  isRemote,\n  isSourceWitOptions,\n  isSourcesWithOptions,\n  isTrackReference,\n  isTrackReferencePinned,\n  isTrackReferencePlaceholder,\n  isWeb,\n  loadUserChoices,\n  log,\n  mutedObserver,\n  observeParticipantEvents,\n  observeParticipantMedia,\n  observeRoomEvents,\n  observeTrackEvents,\n  participantAttributesObserver,\n  participantByIdentifierObserver,\n  participantEventSelector,\n  participantInfoObserver,\n  participantPermissionObserver,\n  participantTrackEvents,\n  participantTracksObservable,\n  recordingStatusObservable,\n  roomAudioPlaybackAllowedObservable,\n  roomEventSelector,\n  roomInfoObserver,\n  roomObserver,\n  roomVideoPlaybackAllowedObservable,\n  saveUserChoices,\n  screenShareObserver,\n  selectGridLayout,\n  sendMessage,\n  setDifference,\n  setLogExtension,\n  setLogLevel,\n  setupChat,\n  setupChatMessageHandler,\n  setupChatToggle,\n  setupClearPinButton,\n  setupConnectionQualityIndicator,\n  setupDataMessageHandler,\n  setupDeviceSelector,\n  setupDisconnectButton,\n  setupFocusToggle,\n  setupLiveKitRoom,\n  setupManualToggle,\n  setupMediaToggle,\n  setupMediaTrack,\n  setupParticipantName,\n  setupParticipantTile,\n  setupStartAudio,\n  setupStartVideo,\n  setupTrackMutedIndicator,\n  sortParticipants,\n  sortTrackReferences,\n  supportsScreenSharing,\n  tokenize,\n  trackEventSelector,\n  trackObservable,\n  trackReferencesObservable,\n  trackSyncTimeObserver,\n  trackTranscriptionObserver,\n  updatePages,\n  wasClickOutside\n};\n//# sourceMappingURL=index.mjs.map","import { operate } from '../util/lift';\nexport function finalize(callback) {\n    return operate(function (source, subscriber) {\n        try {\n            source.subscribe(subscriber);\n        }\n        finally {\n            subscriber.add(callback);\n        }\n    });\n}\n//# sourceMappingURL=finalize.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nimport { noop } from '../util/noop';\nexport function skipUntil(notifier) {\n    return operate(function (source, subscriber) {\n        var taking = false;\n        var skipSubscriber = createOperatorSubscriber(subscriber, function () {\n            skipSubscriber === null || skipSubscriber === void 0 ? void 0 : skipSubscriber.unsubscribe();\n            taking = true;\n        }, noop);\n        innerFrom(notifier).subscribe(skipSubscriber);\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return taking && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=skipUntil.js.map","import type { WidgetState } from '@livekit/components-core';\nimport type * as React from 'react';\n\n/** @internal */\nexport type ChatContextAction =\n  | { msg: 'show_chat' }\n  | { msg: 'hide_chat' }\n  | { msg: 'toggle_chat' }\n  | { msg: 'unread_msg'; count: number }\n  | { msg: 'toggle_settings' };\n\n/** @internal */\nexport type WidgetContextType = {\n  dispatch?: React.Dispatch<ChatContextAction>;\n  state?: WidgetState;\n};\n\n/** @internal */\nexport function chatReducer(state: WidgetState, action: ChatContextAction): WidgetState {\n  if (action.msg === 'show_chat') {\n    return { ...state, showChat: true, unreadMessages: 0 };\n  } else if (action.msg === 'hide_chat') {\n    return { ...state, showChat: false };\n  } else if (action.msg === 'toggle_chat') {\n    const newState = { ...state, showChat: !state.showChat };\n    if (newState.showChat === true) {\n      newState.unreadMessages = 0;\n    }\n    return newState;\n  } else if (action.msg === 'unread_msg') {\n    return { ...state, unreadMessages: action.count };\n  } else if (action.msg === 'toggle_settings') {\n    return { ...state, showSettings: !state.showSettings };\n  } else {\n    return { ...state };\n  }\n}\n","import type { PinState, TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport type * as React from 'react';\n\n/** @internal */\nexport type PinAction =\n  | {\n      msg: 'set_pin';\n      trackReference: TrackReferenceOrPlaceholder;\n    }\n  | { msg: 'clear_pin' };\n\n/** @internal */\nexport type PinContextType = {\n  dispatch?: React.Dispatch<PinAction>;\n  state?: PinState;\n};\n\n/** @internal */\nexport function pinReducer(state: PinState, action: PinAction): PinState {\n  if (action.msg === 'set_pin') {\n    return [action.trackReference];\n  } else if (action.msg === 'clear_pin') {\n    return [];\n  } else {\n    return { ...state };\n  }\n}\n","import { PIN_DEFAULT_STATE, WIDGET_DEFAULT_STATE } from '@livekit/components-core';\nimport * as React from 'react';\nimport type { PinContextType } from './pin-context';\nimport type { WidgetContextType } from './chat-context';\nimport { chatReducer } from './chat-context';\nimport { pinReducer } from './pin-context';\n\n/** @public */\nexport type LayoutContextType = {\n  pin: PinContextType;\n  widget: WidgetContextType;\n};\n\n/** @public */\nexport const LayoutContext = React.createContext<LayoutContextType | undefined>(undefined);\n\n/**\n * Ensures that a layout context is provided via context.\n * If no layout context is provided, an error is thrown.\n * @public\n */\nexport function useLayoutContext(): LayoutContextType {\n  const layoutContext = React.useContext(LayoutContext);\n  if (!layoutContext) {\n    throw Error('Tried to access LayoutContext context outside a LayoutContextProvider provider.');\n  }\n  return layoutContext;\n}\n\n/**\n * Ensures that a layout context is provided, either via context or explicitly as a parameter.\n * If not inside a `LayoutContext` and no layout context is provided, an error is thrown.\n * @public\n */\nexport function useEnsureLayoutContext(layoutContext?: LayoutContextType) {\n  const layout = useMaybeLayoutContext();\n  layoutContext ??= layout;\n  if (!layoutContext) {\n    throw Error('Tried to access LayoutContext context outside a LayoutContextProvider provider.');\n  }\n  return layoutContext;\n}\n\n/** @public */\nexport function useCreateLayoutContext(): LayoutContextType {\n  const [pinState, pinDispatch] = React.useReducer(pinReducer, PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = React.useReducer(chatReducer, WIDGET_DEFAULT_STATE);\n  return {\n    pin: { dispatch: pinDispatch, state: pinState },\n    widget: { dispatch: widgetDispatch, state: widgetState },\n  };\n}\n\n/** @public */\nexport function useEnsureCreateLayoutContext(layoutContext?: LayoutContextType): LayoutContextType {\n  const [pinState, pinDispatch] = React.useReducer(pinReducer, PIN_DEFAULT_STATE);\n  const [widgetState, widgetDispatch] = React.useReducer(chatReducer, WIDGET_DEFAULT_STATE);\n  return (\n    layoutContext ?? {\n      pin: { dispatch: pinDispatch, state: pinState },\n      widget: { dispatch: widgetDispatch, state: widgetState },\n    }\n  );\n}\n\n/**\n * Returns a layout context from the `LayoutContext` if it exists, otherwise `undefined`.\n * @public\n */\nexport function useMaybeLayoutContext(): LayoutContextType | undefined {\n  return React.useContext(LayoutContext);\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport * as React from 'react';\n\n/**\n * This context provides a `TrackReferenceOrPlaceholder` to all child components.\n * @public\n */\nexport const TrackRefContext = React.createContext<TrackReferenceOrPlaceholder | undefined>(\n  undefined,\n);\n\n/**\n * Ensures that a track reference is provided via context.\n * If not inside a `TrackRefContext`, an error is thrown.\n * @public\n */\nexport function useTrackRefContext() {\n  const trackReference = React.useContext(TrackRefContext);\n  if (!trackReference) {\n    throw Error('tried to access track context outside of track context provider');\n  }\n  return trackReference;\n}\n\n/**\n * Returns a track reference from the `TrackRefContext` if it exists, otherwise `undefined`.\n * @public\n */\nexport function useMaybeTrackRefContext() {\n  return React.useContext(TrackRefContext);\n}\n\n/**\n * Ensures that a track reference is provided, either via context or explicitly as a parameter.\n * If not inside a `TrackRefContext` and no track reference is provided, an error is thrown.\n * @public\n */\nexport function useEnsureTrackRef(trackRef?: TrackReferenceOrPlaceholder) {\n  const context = useMaybeTrackRefContext();\n  const ref = trackRef ?? context;\n  if (!ref) {\n    throw new Error(\n      'No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly',\n    );\n  }\n  return ref;\n}\n","import type { Participant } from 'livekit-client';\nimport * as React from 'react';\nimport { useMaybeTrackRefContext } from './track-reference-context';\n\n/** @public */\nexport const ParticipantContext = React.createContext<Participant | undefined>(undefined);\n\n/**\n * Ensures that a participant is provided via context.\n * If not inside a `ParticipantContext`, an error is thrown.\n * @public\n */\nexport function useParticipantContext() {\n  const participant = React.useContext(ParticipantContext);\n  if (!participant) {\n    throw Error('tried to access participant context outside of participant context provider');\n  }\n  return participant;\n}\n\n/**\n * Returns a participant from the `ParticipantContext` if it exists, otherwise `undefined`.\n * @public\n */\nexport function useMaybeParticipantContext() {\n  return React.useContext(ParticipantContext);\n}\n\n/**\n * Ensures that a participant is provided, either via context or explicitly as a parameter.\n * If not inside a `ParticipantContext` and no participant is provided, an error is thrown.\n * @public\n */\nexport function useEnsureParticipant(participant?: Participant) {\n  const context = useMaybeParticipantContext();\n  const trackContext = useMaybeTrackRefContext();\n  const p = participant ?? context ?? trackContext?.participant;\n  if (!p) {\n    throw new Error(\n      'No participant provided, make sure you are inside a participant context or pass the participant explicitly',\n    );\n  }\n  return p;\n}\n","import type { Room } from 'livekit-client';\nimport * as React from 'react';\n\n/** @public */\nexport const RoomContext = React.createContext<Room | undefined>(undefined);\n\n/**\n * Ensures that a room is provided via context.\n * If no room is provided, an error is thrown.\n * @public\n */\nexport function useRoomContext() {\n  const ctx = React.useContext(RoomContext);\n  if (!ctx) {\n    throw Error('tried to access room context outside of livekit room component');\n  }\n  return ctx;\n}\n\n/**\n * Returns the room context if it exists, otherwise undefined.\n * @public\n */\nexport function useMaybeRoomContext() {\n  return React.useContext(RoomContext);\n}\n\n/**\n * Ensures that a room is provided, either via context or explicitly as a parameter.\n * If no room is provided, an error is thrown.\n * @public\n */\nexport function useEnsureRoom(room?: Room) {\n  const context = useMaybeRoomContext();\n  const r = room ?? context;\n  if (!r) {\n    throw new Error(\n      'No room provided, make sure you are inside a Room context or pass the room explicitly',\n    );\n  }\n  return r;\n}\n","import * as React from 'react';\n\n/** @internal */\nexport interface FeatureFlags {\n  autoSubscription?: boolean;\n}\n\ntype FeatureContext<T extends boolean = false> = T extends true\n  ? FeatureFlags\n  : FeatureFlags | undefined;\n\n/** @internal */\nexport const LKFeatureContext = React.createContext<FeatureFlags | undefined>(undefined);\n\n/**\n * @internal\n */\nexport function useFeatureContext<T extends boolean>(require?: T): FeatureContext<T> {\n  const ctx = React.useContext(LKFeatureContext) as FeatureContext<T>;\n  if (require === true) {\n    if (ctx) {\n      return ctx;\n    } else {\n      throw Error('tried to access feature context, but none is present');\n    }\n  }\n  return ctx;\n}\n","/* eslint-disable no-return-assign */\n/* eslint-disable no-underscore-dangle */\nimport * as React from 'react';\n\nconst useLatest = <T>(current: T) => {\n  const storedValue = React.useRef(current);\n  React.useEffect(() => {\n    storedValue.current = current;\n  });\n  return storedValue;\n};\n\n/**\n * A React hook that fires a callback whenever ResizeObserver detects a change to its size\n * code extracted from https://github.com/jaredLunde/react-hook/blob/master/packages/resize-observer/src/index.tsx in order to not include the polyfill for resize-observer\n *\n * @internal\n */\nexport function useResizeObserver<T extends HTMLElement>(\n  target: React.RefObject<T>,\n  callback: UseResizeObserverCallback,\n) {\n  const resizeObserver = getResizeObserver();\n  const storedCallback = useLatest(callback);\n\n  React.useLayoutEffect(() => {\n    let didUnsubscribe = false;\n\n    const targetEl = target.current;\n    if (!targetEl) return;\n\n    function cb(entry: ResizeObserverEntry, observer: ResizeObserver) {\n      if (didUnsubscribe) return;\n      storedCallback.current(entry, observer);\n    }\n\n    resizeObserver?.subscribe(targetEl as HTMLElement, cb);\n\n    return () => {\n      didUnsubscribe = true;\n      resizeObserver?.unsubscribe(targetEl as HTMLElement, cb);\n    };\n  }, [target.current, resizeObserver, storedCallback]);\n\n  return resizeObserver?.observer;\n}\n\nfunction createResizeObserver() {\n  let ticking = false;\n  let allEntries: ResizeObserverEntry[] = [];\n\n  const callbacks: Map<unknown, Array<UseResizeObserverCallback>> = new Map();\n\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  const observer = new ResizeObserver((entries: ResizeObserverEntry[], obs: ResizeObserver) => {\n    allEntries = allEntries.concat(entries);\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        const triggered = new Set<Element>();\n        for (let i = 0; i < allEntries.length; i++) {\n          if (triggered.has(allEntries[i].target)) continue;\n          triggered.add(allEntries[i].target);\n          const cbs = callbacks.get(allEntries[i].target);\n          cbs?.forEach((cb) => cb(allEntries[i], obs));\n        }\n        allEntries = [];\n        ticking = false;\n      });\n    }\n    ticking = true;\n  });\n\n  return {\n    observer,\n    subscribe(target: HTMLElement, callback: UseResizeObserverCallback) {\n      observer.observe(target);\n      const cbs = callbacks.get(target) ?? [];\n      cbs.push(callback);\n      callbacks.set(target, cbs);\n    },\n    unsubscribe(target: HTMLElement, callback: UseResizeObserverCallback) {\n      const cbs = callbacks.get(target) ?? [];\n      if (cbs.length === 1) {\n        observer.unobserve(target);\n        callbacks.delete(target);\n        return;\n      }\n      const cbIndex = cbs.indexOf(callback);\n      if (cbIndex !== -1) cbs.splice(cbIndex, 1);\n      callbacks.set(target, cbs);\n    },\n  };\n}\n\nlet _resizeObserver: ReturnType<typeof createResizeObserver>;\n\nconst getResizeObserver = () =>\n  !_resizeObserver ? (_resizeObserver = createResizeObserver()) : _resizeObserver;\n\nexport type UseResizeObserverCallback = (\n  entry: ResizeObserverEntry,\n  observer: ResizeObserver,\n) => unknown;\n\nexport const useSize = (target: React.RefObject<HTMLDivElement>) => {\n  const [size, setSize] = React.useState({ width: 0, height: 0 });\n  React.useLayoutEffect(() => {\n    if (target.current) {\n      const { width, height } = target.current.getBoundingClientRect();\n      setSize({ width, height });\n    }\n  }, [target.current]);\n\n  const resizeCallback = React.useCallback(\n    (entry: ResizeObserverEntry) => setSize(entry.contentRect),\n    [],\n  );\n  // Where the magic happens\n  useResizeObserver(target, resizeCallback);\n  return size;\n};\n","import * as React from 'react';\n// @ts-ignore\nimport type { Observable } from 'rxjs';\n\n/**\n * @internal\n */\nexport function useObservableState<T>(\n  observable: Observable<T> | undefined,\n  startWith: T,\n  resetWhenObservableChanges = true,\n) {\n  const [state, setState] = React.useState<T>(startWith);\n  React.useEffect(() => {\n    if (resetWhenObservableChanges) {\n      setState(startWith);\n    }\n    // observable state doesn't run in SSR\n    if (typeof window === 'undefined' || !observable) return;\n    const subscription = observable.subscribe(setState);\n    return () => subscription.unsubscribe();\n  }, [observable, resetWhenObservableChanges]);\n  return state;\n}\n","import * as React from 'react';\n/**\n * Implementation used from https://github.com/juliencrn/usehooks-ts\n *\n * @internal\n */\nexport function useMediaQuery(query: string): boolean {\n  const getMatches = (query: string): boolean => {\n    // Prevents SSR issues\n    if (typeof window !== 'undefined') {\n      return window.matchMedia(query).matches;\n    }\n    return false;\n  };\n\n  const [matches, setMatches] = React.useState<boolean>(getMatches(query));\n\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n\n  React.useEffect(() => {\n    const matchMedia = window.matchMedia(query);\n\n    // Triggered at the first client-side load and if query changes\n    handleChange();\n\n    // Listen matchMedia\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener('change', handleChange);\n    }\n\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener('change', handleChange);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return matches;\n}\n","import { setupConnectionQualityIndicator } from '@livekit/components-core';\nimport type { Participant } from 'livekit-client';\nimport { ConnectionQuality } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureParticipant } from '../context';\nimport { useObservableState } from './internal';\n\n/** @public */\nexport interface ConnectionQualityIndicatorOptions {\n  participant?: Participant;\n}\n\n/**\n * The `useConnectionQualityIndicator` hook provides props for the `ConnectionQualityIndicator` or your custom implementation of it component.\n * @example\n * ```tsx\n * const { quality } = useConnectionQualityIndicator();\n * // or\n * const { quality } = useConnectionQualityIndicator({ participant });\n * ```\n * @public\n */\nexport function useConnectionQualityIndicator(options: ConnectionQualityIndicatorOptions = {}) {\n  const p = useEnsureParticipant(options.participant);\n\n  const { className, connectionQualityObserver } = React.useMemo(\n    () => setupConnectionQualityIndicator(p),\n    [p],\n  );\n\n  const quality = useObservableState(connectionQualityObserver, ConnectionQuality.Unknown);\n\n  return { className, quality };\n}\n","import { connectionStateObserver } from '@livekit/components-core';\nimport type { Room } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\nimport { useObservableState } from './internal';\n\n/**\n * The `useConnectionState` hook allows you to simply implement your own `ConnectionState` component.\n *\n * @example\n * ```tsx\n * const connectionState = useConnectionState(room);\n * ```\n * @public\n */\nexport function useConnectionState(room?: Room) {\n  // passed room takes precedence, if not supplied get current room context\n  const r = useEnsureRoom(room);\n  const observable = React.useMemo(() => connectionStateObserver(r), [r]);\n  const connectionState = useObservableState(observable, r.state);\n  return connectionState;\n}\n","import { setupDisconnectButton } from '@livekit/components-core';\nimport { ConnectionState } from 'livekit-client';\nimport * as React from 'react';\nimport type { DisconnectButtonProps } from '../components';\nimport { useRoomContext } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport { useConnectionState } from './useConnectionStatus';\n\n/**\n * The `useDisconnectButton` hook is used to implement the `DisconnectButton` or your\n * custom implementation of it. It adds onClick handler to the button to disconnect\n * from the room.\n *\n * @example\n * ```tsx\n * const { buttonProps } = useDisconnectButton(buttonProps);\n * return <button {...buttonProps}>Disconnect</button>;\n * ```\n * @public\n */\nexport function useDisconnectButton(props: DisconnectButtonProps) {\n  const room = useRoomContext();\n  const connectionState = useConnectionState(room);\n\n  const buttonProps = React.useMemo(() => {\n    const { className, disconnect } = setupDisconnectButton(room);\n    const mergedProps = mergeProps(props, {\n      className,\n      onClick: () => disconnect(props.stopTracks ?? true),\n      disabled: connectionState === ConnectionState.Disconnected,\n    });\n    return mergedProps;\n  }, [room, props, connectionState]);\n\n  return { buttonProps };\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { setupFocusToggle, isTrackReferencePinned } from '@livekit/components-core';\nimport { useEnsureTrackRef, useMaybeLayoutContext } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport * as React from 'react';\n\n/** @public */\nexport interface UseFocusToggleProps {\n  trackRef?: TrackReferenceOrPlaceholder;\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n\n/**\n * The `useFocusToggle` hook is used to implement the `FocusToggle` or your custom implementation of it.\n * The `TrackReferenceOrPlaceholder` is used to register a onClick handler and to identify the track to focus on.\n *\n * @example\n * ```tsx\n * const { mergedProps, inFocus } = useFocusToggle({ trackRef, props: yourButtonProps });\n * return <button {...mergedProps}>{inFocus ? 'Unfocus' : 'Focus'}</button>;\n * ```\n * @public\n */\nexport function useFocusToggle({ trackRef, props }: UseFocusToggleProps) {\n  const trackReference = useEnsureTrackRef(trackRef);\n\n  const layoutContext = useMaybeLayoutContext();\n  const { className } = React.useMemo(() => setupFocusToggle(), []);\n\n  const inFocus: boolean = React.useMemo(() => {\n    return isTrackReferencePinned(trackReference, layoutContext?.pin.state);\n  }, [trackReference, layoutContext?.pin.state]);\n\n  const mergedProps = React.useMemo(\n    () =>\n      mergeProps(props, {\n        className,\n        onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n          // Call user defined on click callbacks.\n          props.onClick?.(event);\n\n          // Set or clear focus based on current focus state.\n          if (inFocus) {\n            layoutContext?.pin.dispatch?.({\n              msg: 'clear_pin',\n            });\n          } else {\n            layoutContext?.pin.dispatch?.({\n              msg: 'set_pin',\n              trackReference,\n            });\n          }\n        },\n      }),\n    [props, className, trackReference, inFocus, layoutContext?.pin],\n  );\n\n  return { mergedProps, inFocus };\n}\n","import { GRID_LAYOUTS, selectGridLayout } from '@livekit/components-core';\nimport type { GridLayoutDefinition, GridLayoutInfo } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useSize } from './internal';\n\n/**\n * The `useGridLayout` hook tries to select the best layout to fit all tiles.\n * If the available screen space is not enough, it will reduce the number of maximum visible\n * tiles and select a layout that still works visually within the given limitations.\n * As the order of tiles changes over time, the hook tries to keep visual updates to a minimum\n * while trying to display important tiles such as speaking participants or screen shares.\n *\n * @example\n * ```tsx\n * const { layout } = useGridLayout(gridElement, trackCount);\n * ```\n * @public\n */\nexport function useGridLayout(\n  /** HTML element that contains the grid. */\n  gridElement: React.RefObject<HTMLDivElement>,\n  /** Count of tracks that should get layed out */\n  trackCount: number,\n  options: {\n    gridLayouts?: GridLayoutDefinition[];\n  } = {},\n): { layout: GridLayoutInfo; containerWidth: number; containerHeight: number } {\n  const gridLayouts = options.gridLayouts ?? GRID_LAYOUTS;\n  const { width, height } = useSize(gridElement);\n  const layout = selectGridLayout(gridLayouts, trackCount, width, height);\n\n  React.useEffect(() => {\n    if (gridElement.current && layout) {\n      gridElement.current.style.setProperty('--lk-col-count', layout?.columns.toString());\n      gridElement.current.style.setProperty('--lk-row-count', layout?.rows.toString());\n    }\n  }, [gridElement, layout]);\n\n  return {\n    layout,\n    containerWidth: width,\n    containerHeight: height,\n  };\n}\n","import {\n  type TrackReferenceOrPlaceholder,\n  getTrackReferenceId,\n  mutedObserver,\n} from '@livekit/components-core';\nimport type { Participant, Track } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureParticipant } from '../context';\n\n/** @public */\nexport interface UseIsMutedOptions {\n  participant?: Participant;\n}\n\n/**\n * The `useIsMuted` hook is used to implement the `TrackMutedIndicator` or your custom implementation of it.\n * It returns a `boolean` that indicates if the track is muted or not.\n *\n * @example\n * ```tsx\n * const isMuted = useIsMuted(track);\n * ```\n * @public\n */\nexport function useIsMuted(trackRef: TrackReferenceOrPlaceholder): boolean;\nexport function useIsMuted(\n  sourceOrTrackRef: TrackReferenceOrPlaceholder | Track.Source,\n  options: UseIsMutedOptions = {},\n) {\n  const passedParticipant =\n    typeof sourceOrTrackRef === 'string' ? options.participant : sourceOrTrackRef.participant;\n  const p = useEnsureParticipant(passedParticipant);\n  const ref =\n    typeof sourceOrTrackRef === 'string'\n      ? { participant: p, source: sourceOrTrackRef }\n      : sourceOrTrackRef;\n  const [isMuted, setIsMuted] = React.useState(\n    !!(ref.publication?.isMuted || p.getTrackPublication(ref.source)?.isMuted),\n  );\n\n  React.useEffect(() => {\n    const listener = mutedObserver(ref).subscribe(setIsMuted);\n    return () => listener.unsubscribe();\n  }, [getTrackReferenceId(ref)]);\n\n  return isMuted;\n}\n","import type { ParticipantMedia } from '@livekit/components-core';\nimport { observeParticipantMedia } from '@livekit/components-core';\nimport type { TrackPublication, LocalParticipant, Room } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\n\n/** @public */\nexport interface UseLocalParticipantOptions {\n  /**\n   * The room to use. If not provided, the hook will use the room from the context.\n   */\n  room?: Room;\n}\n\n/**\n * The `useLocalParticipant` hook returns the local participant and the associated state\n * around the participant.\n *\n * @example\n * ```tsx\n * const { localParticipant } = useLocalParticipant();\n * ```\n * @public\n */\nexport function useLocalParticipant(options: UseLocalParticipantOptions = {}) {\n  const room = useEnsureRoom(options.room);\n  const [localParticipant, setLocalParticipant] = React.useState(room.localParticipant);\n  const [isMicrophoneEnabled, setIsMicrophoneEnabled] = React.useState(\n    localParticipant.isMicrophoneEnabled,\n  );\n  const [isCameraEnabled, setIsCameraEnabled] = React.useState(\n    localParticipant.isMicrophoneEnabled,\n  );\n  const [lastMicrophoneError, setLastMicrophoneError] = React.useState(\n    localParticipant.lastMicrophoneError,\n  );\n  const [lastCameraError, setLastCameraError] = React.useState(localParticipant.lastCameraError);\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = React.useState(\n    localParticipant.isMicrophoneEnabled,\n  );\n  const [microphoneTrack, setMicrophoneTrack] = React.useState<TrackPublication | undefined>(\n    undefined,\n  );\n  const [cameraTrack, setCameraTrack] = React.useState<TrackPublication | undefined>(undefined);\n\n  const handleUpdate = (media: ParticipantMedia<LocalParticipant>) => {\n    setIsCameraEnabled(media.isCameraEnabled);\n    setIsMicrophoneEnabled(media.isMicrophoneEnabled);\n    setIsScreenShareEnabled(media.isScreenShareEnabled);\n    setCameraTrack(media.cameraTrack);\n    setMicrophoneTrack(media.microphoneTrack);\n    setLastMicrophoneError(media.participant.lastMicrophoneError);\n    setLastCameraError(media.participant.lastCameraError);\n    setLocalParticipant(media.participant);\n  };\n  React.useEffect(() => {\n    const listener = observeParticipantMedia(room.localParticipant).subscribe(handleUpdate);\n    // TODO also listen to permission and metadata etc. events\n    return () => listener.unsubscribe();\n  }, [room]);\n\n  return {\n    isMicrophoneEnabled,\n    isScreenShareEnabled,\n    isCameraEnabled,\n    microphoneTrack,\n    cameraTrack,\n    lastMicrophoneError,\n    lastCameraError,\n    localParticipant,\n  };\n}\n","import { participantPermissionObserver } from '@livekit/components-core';\nimport type { ParticipantPermission } from '@livekit/protocol';\nimport * as React from 'react';\nimport { useRoomContext } from '../context';\nimport { useObservableState } from './internal';\n\n/**\n * The `useLocalParticipantPermissions` hook returns the local participant's permissions.\n *\n * @example\n * ```tsx\n * const { canPublish, canPublishData } = useLocalParticipantPermissions();\n * ```\n * @public\n */\nexport function useLocalParticipantPermissions(): ParticipantPermission | undefined {\n  const room = useRoomContext();\n  const permissionObserver = React.useMemo(\n    () => participantPermissionObserver(room.localParticipant),\n    [room],\n  );\n  const permissions = useObservableState(permissionObserver, room.localParticipant.permissions);\n  return permissions;\n}\n","import { createMediaDeviceObserver, setupDeviceSelector, log } from '@livekit/components-core';\nimport type { LocalAudioTrack, LocalVideoTrack, Room } from 'livekit-client';\nimport * as React from 'react';\nimport { useMaybeRoomContext } from '../context';\nimport { useObservableState } from './internal';\n\n/** @public */\nexport interface UseMediaDeviceSelectProps {\n  kind: MediaDeviceKind;\n  room?: Room;\n  track?: LocalAudioTrack | LocalVideoTrack;\n  /**\n   * this will call getUserMedia if the permissions are not yet given to enumerate the devices with device labels.\n   * in some browsers multiple calls to getUserMedia result in multiple permission prompts.\n   * It's generally advised only flip this to true, once a (preview) track has been acquired successfully with the\n   * appropriate permissions.\n   *\n   * @see {@link MediaDeviceMenu}\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices | MDN enumerateDevices}\n   */\n  requestPermissions?: boolean;\n  /**\n   * this callback gets called if an error is thrown when failing to select a device and also if a user\n   * denied permissions, eventhough the `requestPermissions` option is set to `true`.\n   * Most commonly this will emit a MediaDeviceError\n   */\n  onError?: (e: Error) => void;\n}\n\n/**\n * The `useMediaDeviceSelect` hook is used to implement the `MediaDeviceSelect` component and\n * returns o.a. the list of devices of a given kind (audioinput or videoinput), the currently active device\n * and a function to set the the active device.\n *\n * @example\n * ```tsx\n * const { devices, activeDeviceId, setActiveMediaDevice } = useMediaDeviceSelect({kind: 'audioinput'});\n * ```\n * @public\n */\nexport function useMediaDeviceSelect({\n  kind,\n  room,\n  track,\n  requestPermissions,\n  onError,\n}: UseMediaDeviceSelectProps) {\n  const roomContext = useMaybeRoomContext();\n  // List of all devices.\n  const deviceObserver = React.useMemo(\n    () => createMediaDeviceObserver(kind, onError, requestPermissions),\n    [kind, requestPermissions, onError],\n  );\n  const devices = useObservableState(deviceObserver, [] as MediaDeviceInfo[]);\n  // Active device management.\n  const [currentDeviceId, setCurrentDeviceId] = React.useState<string>('');\n  const { className, activeDeviceObservable, setActiveMediaDevice } = React.useMemo(\n    () => setupDeviceSelector(kind, room ?? roomContext, track),\n    [kind, room, roomContext, track],\n  );\n\n  React.useEffect(() => {\n    const listener = activeDeviceObservable.subscribe((deviceId) => {\n      log.info('setCurrentDeviceId', deviceId);\n      if (deviceId) setCurrentDeviceId(deviceId);\n    });\n    return () => {\n      listener?.unsubscribe();\n    };\n  }, [activeDeviceObservable]);\n\n  return { devices, className, activeDeviceId: currentDeviceId, setActiveMediaDevice };\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { log, sortTrackReferences, updatePages } from '@livekit/components-core';\nimport * as React from 'react';\n\n/** @public */\nexport interface UseVisualStableUpdateOptions {\n  /** Overwrites the default sort function. */\n  customSortFunction?: (\n    trackReferences: TrackReferenceOrPlaceholder[],\n  ) => TrackReferenceOrPlaceholder[];\n}\n\n/**\n * The `useVisualStableUpdate` hook is used to prevent visually jarring jumps and shifts of elements\n * in an array. The algorithm only starts to update when there are more items than visually fit\n * on a page. If this is the case, it will make sure that speaking participants move to the first\n * page and are always visible.\n * @remarks\n * Updating the array can occur because attendees leave or join a room, or because they mute/unmute\n * or start speaking.\n * The hook is used for the `GridLayout` and `CarouselLayout` components.\n *\n * @example\n * ```tsx\n * const trackRefs = useTracks();\n * const updatedTrackRefs = useVisualStableUpdate(trackRefs, itemPerPage);\n * ```\n * @public\n */\nexport function useVisualStableUpdate(\n  /** `TrackReference`s to display in the grid.  */\n  trackReferences: TrackReferenceOrPlaceholder[],\n  maxItemsOnPage: number,\n  options: UseVisualStableUpdateOptions = {},\n): TrackReferenceOrPlaceholder[] {\n  const lastTrackRefs = React.useRef<TrackReferenceOrPlaceholder[]>([]);\n  const lastMaxItemsOnPage = React.useRef<number>(-1);\n  const layoutChanged = maxItemsOnPage !== lastMaxItemsOnPage.current;\n\n  const sortedTrackRefs =\n    typeof options.customSortFunction === 'function'\n      ? options.customSortFunction(trackReferences)\n      : sortTrackReferences(trackReferences);\n\n  let updatedTrackRefs: TrackReferenceOrPlaceholder[] = [...sortedTrackRefs];\n  if (layoutChanged === false) {\n    try {\n      updatedTrackRefs = updatePages(lastTrackRefs.current, sortedTrackRefs, maxItemsOnPage);\n    } catch (error) {\n      log.error('Error while running updatePages(): ', error);\n    }\n  }\n\n  // Save info for to compare against in the next update cycle.\n  if (layoutChanged) {\n    lastTrackRefs.current = sortedTrackRefs;\n  } else {\n    lastTrackRefs.current = updatedTrackRefs;\n  }\n  lastMaxItemsOnPage.current = maxItemsOnPage;\n\n  return updatedTrackRefs;\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useVisualStableUpdate } from './useVisualStableUpdate';\n\n/**\n * The `usePagination` hook implements simple pagination logic for use with arrays.\n * @example\n * ```tsx\n * const tracks = useTracks();\n * const pagination = usePagination(4, tracks);\n *\n * <TrackLoop tracks={pagination.tracks} />\n * ```\n * @alpha\n */\nexport function usePagination(itemPerPage: number, trackReferences: TrackReferenceOrPlaceholder[]) {\n  const [currentPage, setCurrentPage] = React.useState(1);\n  const totalPageCount = Math.max(Math.ceil(trackReferences.length / itemPerPage), 1);\n  if (currentPage > totalPageCount) {\n    setCurrentPage(totalPageCount);\n  }\n  const lastItemIndex = currentPage * itemPerPage;\n  const firstItemIndex = lastItemIndex - itemPerPage;\n\n  const changePage = (direction: 'next' | 'previous') => {\n    setCurrentPage((state) => {\n      if (direction === 'next') {\n        if (state === totalPageCount) {\n          return state;\n        }\n        return state + 1;\n      } else {\n        if (state === 1) {\n          return state;\n        }\n        return state - 1;\n      }\n    });\n  };\n\n  const goToPage = (num: number) => {\n    if (num > totalPageCount) {\n      setCurrentPage(totalPageCount);\n    } else if (num < 1) {\n      setCurrentPage(1);\n    } else {\n      setCurrentPage(num);\n    }\n  };\n\n  const updatedTrackReferences = useVisualStableUpdate(trackReferences, itemPerPage);\n\n  const tracksOnPage = updatedTrackReferences.slice(firstItemIndex, lastItemIndex);\n\n  return {\n    totalPageCount,\n    nextPage: () => changePage('next'),\n    prevPage: () => changePage('previous'),\n    setPage: goToPage,\n    firstItemIndex,\n    lastItemIndex,\n    tracks: tracksOnPage,\n    currentPage,\n  };\n}\n\nexport default usePagination;\n","import type { ParticipantClickEvent, TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { setupParticipantTile } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useEnsureTrackRef } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport { useFacingMode } from './useFacingMode';\nimport { useIsMuted } from './useIsMuted';\nimport { useIsSpeaking } from './useIsSpeaking';\nimport { Track } from 'livekit-client';\n\n/** @public */\nexport interface UseParticipantTileProps<T extends HTMLElement> extends React.HTMLAttributes<T> {\n  /** The track reference to display. */\n  trackRef?: TrackReferenceOrPlaceholder;\n  disableSpeakingIndicator?: boolean;\n  onParticipantClick?: (event: ParticipantClickEvent) => void;\n  htmlProps: React.HTMLAttributes<T>;\n}\n\n/**\n * The `useParticipantTile` hook is used to implement the `ParticipantTile` and returns the props needed to render the tile.\n * @remarks\n * The returned props include many data attributes that are useful for CSS styling purposes because they\n * indicate the state of the participant and the track.\n * For example: `data-lk-audio-muted`, `data-lk-video-muted`, `data-lk-speaking`, `data-lk-local-participant`, `data-lk-source`, `data-lk-facing-mode`.\n * @public\n */\nexport function useParticipantTile<T extends HTMLElement>({\n  trackRef,\n  onParticipantClick,\n  disableSpeakingIndicator,\n  htmlProps,\n}: UseParticipantTileProps<T>) {\n  const trackReference = useEnsureTrackRef(trackRef);\n\n  const mergedProps = React.useMemo(() => {\n    const { className } = setupParticipantTile();\n    return mergeProps(htmlProps, {\n      className,\n      onClick: (event: React.MouseEvent<T, MouseEvent>) => {\n        htmlProps.onClick?.(event);\n        if (typeof onParticipantClick === 'function') {\n          const track =\n            trackReference.publication ??\n            trackReference.participant.getTrackPublication(trackReference.source);\n          onParticipantClick({ participant: trackReference.participant, track });\n        }\n      },\n    });\n  }, [\n    htmlProps,\n    onParticipantClick,\n    trackReference.publication,\n    trackReference.source,\n    trackReference.participant,\n  ]);\n\n  const micTrack = trackReference.participant.getTrackPublication(Track.Source.Microphone);\n  const micRef = React.useMemo(() => {\n    return {\n      participant: trackReference.participant,\n      source: Track.Source.Microphone,\n      publication: micTrack,\n    };\n  }, [micTrack, trackReference.participant]);\n  const isVideoMuted = useIsMuted(trackReference);\n  const isAudioMuted = useIsMuted(micRef);\n  const isSpeaking = useIsSpeaking(trackReference.participant);\n  const facingMode = useFacingMode(trackReference);\n  return {\n    elementProps: {\n      'data-lk-audio-muted': isAudioMuted,\n      'data-lk-video-muted': isVideoMuted,\n      'data-lk-speaking': disableSpeakingIndicator === true ? false : isSpeaking,\n      'data-lk-local-participant': trackReference.participant.isLocal,\n      'data-lk-source': trackReference.source,\n      'data-lk-facing-mode': facingMode,\n      ...mergedProps,\n    } as React.HTMLAttributes<T>,\n  };\n}\n","import { createIsSpeakingObserver } from '@livekit/components-core';\nimport type { Participant } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureParticipant } from '../context';\nimport { useObservableState } from './internal';\n\n/**\n * The `useIsSpeaking` hook returns a `boolean` that indicates if the participant is speaking or not.\n * @example\n * ```tsx\n * const isSpeaking = useIsSpeaking(participant);\n * ```\n * @public\n */\nexport function useIsSpeaking(participant?: Participant) {\n  const p = useEnsureParticipant(participant);\n  const observable = React.useMemo(() => createIsSpeakingObserver(p), [p]);\n  const isSpeaking = useObservableState(observable, p.isSpeaking);\n\n  return isSpeaking;\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { LocalTrackPublication, facingModeFromLocalTrack } from 'livekit-client';\n\n/**\n * Try to determine the `facingMode` of a local participant video track.\n * @remarks\n * Works only on local video tracks.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/facingMode | MDN docs on facingMode}\n * @alpha\n */\nexport function useFacingMode(\n  trackReference: TrackReferenceOrPlaceholder,\n): 'user' | 'environment' | 'left' | 'right' | 'undefined' {\n  if (trackReference.publication instanceof LocalTrackPublication) {\n    const localTrack = trackReference.publication.track;\n    if (localTrack) {\n      const { facingMode } = facingModeFromLocalTrack(localTrack);\n      return facingMode;\n    }\n  }\n  return 'undefined';\n}\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport * as React from 'react';\nimport type { LayoutContextType } from '../context';\nimport { useEnsureLayoutContext } from '../context';\n\n/**\n * The `usePinnedTracks` hook returns a array of the pinned tracks of the current room.\n * @remarks\n * To function properly, this hook must be called within a `LayoutContext`.\n * @example\n * ```tsx\n * const pinnedTracks = usePinnedTracks();\n * ```\n * @public\n */\nexport function usePinnedTracks(layoutContext?: LayoutContextType): TrackReferenceOrPlaceholder[] {\n  layoutContext = useEnsureLayoutContext(layoutContext);\n  return React.useMemo(() => {\n    if (layoutContext?.pin.state !== undefined && layoutContext.pin.state.length >= 1) {\n      return layoutContext.pin.state;\n    }\n    return [];\n  }, [layoutContext.pin.state]);\n}\n","import { setupStartAudio } from '@livekit/components-core';\nimport type { Room } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport { useObservableState } from './internal';\n\n/** @alpha */\nexport interface UseStartAudioProps {\n  room?: Room;\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n\n/**\n * In many browsers to start audio playback, the user must perform a user-initiated event such as clicking a button.\n * The `useStatAudio` hook returns an object with a boolean `canPlayAudio` flag\n * that indicates whether audio playback is allowed in the current context,\n * as well as a `startAudio` function that can be called in a button `onClick` callback to start audio playback in the current context.\n *\n * @see Autoplay policy on MDN web docs for more info: {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Best_practices#autoplay_policy}\n * @alpha\n */\nexport function useStartAudio({ room, props }: UseStartAudioProps) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback } = React.useMemo(\n    () => setupStartAudio(),\n    [],\n  );\n  const observable = React.useMemo(\n    () => roomAudioPlaybackAllowedObservable(roomEnsured),\n    [roomEnsured, roomAudioPlaybackAllowedObservable],\n  );\n  const { canPlayAudio } = useObservableState(observable, {\n    canPlayAudio: roomEnsured.canPlaybackAudio,\n  });\n\n  const mergedProps = React.useMemo(\n    () =>\n      mergeProps(props, {\n        className,\n        onClick: () => {\n          handleStartAudioPlayback(roomEnsured);\n        },\n        style: { display: canPlayAudio ? 'none' : 'block' },\n      }),\n    [props, className, canPlayAudio, handleStartAudioPlayback, roomEnsured],\n  );\n\n  return { mergedProps, canPlayAudio };\n}\n","import { setupStartVideo } from '@livekit/components-core';\nimport type { Room } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport { useObservableState } from './internal';\n\n/** @alpha */\nexport interface UseStartVideoProps {\n  room?: Room;\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n\n/**\n * In some browsers to start video playback in low power mode, the user must perform a user-initiated event such as clicking a button.\n * The `useStartVideo` hook returns an object with a boolean `canPlayVideo` flag\n * that indicates whether video playback is allowed in the current context,\n * as well as a `startVideo` function that can be called in a button `onClick` callback to start video playback in the current context.\n *\n * @alpha\n */\nexport function useStartVideo({ room, props }: UseStartVideoProps) {\n  const roomEnsured = useEnsureRoom(room);\n  const { className, roomVideoPlaybackAllowedObservable, handleStartVideoPlayback } = React.useMemo(\n    () => setupStartVideo(),\n    [],\n  );\n  const observable = React.useMemo(\n    () => roomVideoPlaybackAllowedObservable(roomEnsured),\n    [roomEnsured, roomVideoPlaybackAllowedObservable],\n  );\n  const { canPlayVideo } = useObservableState(observable, {\n    canPlayVideo: roomEnsured.canPlaybackVideo,\n  });\n\n  const mergedProps = React.useMemo(\n    () =>\n      mergeProps(props, {\n        className,\n        onClick: () => {\n          handleStartVideoPlayback(roomEnsured);\n        },\n        style: { display: canPlayVideo ? 'none' : 'block' },\n      }),\n    [props, className, canPlayVideo, handleStartVideoPlayback, roomEnsured],\n  );\n\n  return { mergedProps, canPlayVideo };\n}\n","import * as React from 'react';\n\n/**\n * @alpha\n */\nexport type UseSwipeOptions = {\n  minSwipeDistance?: number;\n  onLeftSwipe?: () => void;\n  onRightSwipe?: () => void;\n};\n\n/**\n * Simple implementation to detect horizontal swipe actions.\n * Accepts callbacks for on right and left swipes.\n * @example\n * ```tsx\n *  <div\n      onTouchStart={onTouchStart}\n      onTouchMove={onTouchMove}\n      onTouchEnd={onTouchEnd}\n    >\n * ```\n * @alpha\n */\nexport function useSwipe(element: React.RefObject<HTMLElement>, options: UseSwipeOptions = {}) {\n  const touchStart = React.useRef<number | null>(null);\n  const touchEnd = React.useRef<number | null>(null);\n\n  // The required distance between touchStart and touchEnd to be detected as a swipe.\n  const minSwipeDistance = options.minSwipeDistance ?? 50;\n\n  const onTouchStart = (event: TouchEvent) => {\n    touchEnd.current = null; // Otherwise the swipe is fired even with usual touch events.\n    touchStart.current = event.targetTouches[0].clientX;\n  };\n\n  const onTouchMove = (event: TouchEvent) => {\n    touchEnd.current = event.targetTouches[0].clientX;\n  };\n\n  const onTouchEnd = React.useCallback(() => {\n    if (!touchStart.current || !touchEnd.current) {\n      return;\n    }\n    const distance = touchStart.current - touchEnd.current;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n\n    if (isLeftSwipe && options.onLeftSwipe) options.onLeftSwipe();\n    if (isRightSwipe && options.onRightSwipe) options.onRightSwipe();\n  }, [minSwipeDistance, options]);\n\n  React.useEffect(() => {\n    const elementCopy = element.current;\n    if (elementCopy) {\n      elementCopy.addEventListener('touchstart', onTouchStart, { passive: true });\n      elementCopy.addEventListener('touchmove', onTouchMove, { passive: true });\n      elementCopy.addEventListener('touchend', onTouchEnd, { passive: true });\n    }\n    return () => {\n      if (elementCopy) {\n        elementCopy.removeEventListener('touchstart', onTouchStart);\n        elementCopy.removeEventListener('touchmove', onTouchMove);\n        elementCopy.removeEventListener('touchend', onTouchEnd);\n      }\n    };\n  }, [element, onTouchEnd]);\n}\n","import { setupChatToggle } from '@livekit/components-core';\nimport { useLayoutContext } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport * as React from 'react';\n\n/** @public */\nexport interface UseChatToggleProps {\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n\n/**\n * The `useChatToggle` hook provides state and functions for toggling the chat window.\n * @remarks\n * Depends on the `LayoutContext` to work properly.\n * @see {@link ChatToggle}, {@link Chat}\n * @public\n */\nexport function useChatToggle({ props }: UseChatToggleProps) {\n  const { dispatch, state } = useLayoutContext().widget;\n  const { className } = React.useMemo(() => setupChatToggle(), []);\n\n  const mergedProps = React.useMemo(() => {\n    return mergeProps(props, {\n      className,\n      onClick: () => {\n        if (dispatch) dispatch({ msg: 'toggle_chat' });\n      },\n      'aria-pressed': state?.showChat ? 'true' : 'false',\n      'data-lk-unread-msgs': state\n        ? state.unreadMessages < 10\n          ? state.unreadMessages.toFixed(0)\n          : '9+'\n        : '0',\n    });\n  }, [props, className, dispatch, state]);\n\n  return { mergedProps };\n}\n","import {\n  type TrackReferenceOrPlaceholder,\n  setupTrackMutedIndicator,\n  getTrackReferenceId,\n} from '@livekit/components-core';\nimport * as React from 'react';\nimport { useEnsureTrackRef } from '../context';\nimport { useObservableState } from './internal';\n\ninterface TrackMutedIndicatorReturnType {\n  isMuted: boolean;\n  className: string;\n}\n\n/**\n * The `useTrackMutedIndicator` hook is used to implement the `TrackMutedIndicator` component\n * and returns the muted state of the given track.\n *\n * @example\n * ```tsx\n * const { isMuted } = useTrackMutedIndicator(trackRef);\n * ```\n * @public\n */\nexport function useTrackMutedIndicator(\n  trackRef?: TrackReferenceOrPlaceholder,\n): TrackMutedIndicatorReturnType {\n  const trackReference = useEnsureTrackRef(trackRef);\n\n  const { className, mediaMutedObserver } = React.useMemo(\n    () => setupTrackMutedIndicator(trackReference),\n    [getTrackReferenceId(trackReference)],\n  );\n\n  const isMuted = useObservableState(\n    mediaMutedObserver,\n    !!(\n      trackReference.publication?.isMuted ||\n      trackReference.participant.getTrackPublication(trackReference.source)?.isMuted\n    ),\n  );\n\n  return { isMuted, className };\n}\n","import type { ToggleSource } from '@livekit/components-core';\nimport { setupMediaToggle, setupManualToggle, log } from '@livekit/components-core';\nimport * as React from 'react';\nimport type { TrackToggleProps } from '../components';\nimport { useMaybeRoomContext } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport { useObservableState } from './internal';\n\n/** @public */\nexport interface UseTrackToggleProps<T extends ToggleSource>\n  extends Omit<TrackToggleProps<T>, 'showIcon'> {}\n\n/**\n * The `useTrackToggle` hook is used to implement the `TrackToggle` component and returns state\n * and functionality of the given track.\n *\n * @example\n * ```tsx\n * const { buttonProps, enabled } = useTrackToggle(trackRef);\n * return <button {...buttonProps}>{enabled ? 'disable' : 'enable'}</button>;\n * ```\n * @public\n */\nexport function useTrackToggle<T extends ToggleSource>({\n  source,\n  onChange,\n  initialState,\n  captureOptions,\n  publishOptions,\n  onDeviceError,\n  ...rest\n}: UseTrackToggleProps<T>) {\n  const room = useMaybeRoomContext();\n  const track = room?.localParticipant?.getTrackPublication(source);\n  /** `true` if a user interaction such as a click on the TrackToggle button has occurred. */\n  const userInteractionRef = React.useRef(false);\n\n  const { toggle, className, pendingObserver, enabledObserver } = React.useMemo(\n    () =>\n      room\n        ? setupMediaToggle<T>(source, room, captureOptions, publishOptions, onDeviceError)\n        : setupManualToggle(),\n    [room, source, JSON.stringify(captureOptions), publishOptions],\n  );\n\n  const pending = useObservableState(pendingObserver, false);\n  const enabled = useObservableState(enabledObserver, initialState ?? !!track?.isEnabled);\n\n  React.useEffect(() => {\n    onChange?.(enabled, userInteractionRef.current);\n    userInteractionRef.current = false;\n  }, [enabled, onChange]);\n\n  React.useEffect(() => {\n    if (initialState !== undefined) {\n      log.debug('forcing initial toggle state', source, initialState);\n      toggle(initialState);\n    }\n    // only execute once at the beginning\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const newProps = React.useMemo(() => mergeProps(rest, { className }), [rest, className]);\n\n  const clickHandler: React.MouseEventHandler<HTMLButtonElement> = React.useCallback(\n    (evt) => {\n      userInteractionRef.current = true;\n      toggle().catch(() => (userInteractionRef.current = false));\n      rest.onClick?.(evt);\n    },\n    [rest, toggle],\n  );\n\n  return {\n    toggle,\n    enabled,\n    pending,\n    track,\n    buttonProps: {\n      ...newProps,\n      'aria-pressed': enabled,\n      'data-lk-source': source,\n      'data-lk-enabled': enabled,\n      disabled: pending,\n      onClick: clickHandler,\n    } as React.ButtonHTMLAttributes<HTMLButtonElement>,\n  };\n}\n","import type {\n  SourcesArray,\n  TrackReference,\n  TrackReferenceOrPlaceholder,\n  TrackSourceWithOptions,\n  TrackReferencePlaceholder,\n} from '@livekit/components-core';\nimport {\n  isSourcesWithOptions,\n  isSourceWitOptions,\n  log,\n  trackReferencesObservable,\n} from '@livekit/components-core';\nimport type { Participant, Room, RoomEvent } from 'livekit-client';\nimport { Track } from 'livekit-client';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\n\n/** @public */\nexport type UseTracksOptions = {\n  updateOnlyOn?: RoomEvent[];\n  onlySubscribed?: boolean;\n  room?: Room;\n};\n\n/** @public */\nexport type UseTracksHookReturnType<T> = T extends Track.Source[]\n  ? TrackReference[]\n  : T extends TrackSourceWithOptions[]\n    ? TrackReferenceOrPlaceholder[]\n    : never;\n\n/**\n * The `useTracks` hook returns an array of `TrackReference` or `TrackReferenceOrPlaceholder` depending on the provided `sources` property.\n * If only subscribed tracks are desired, set the `onlySubscribed` property to `true`.\n * @example\n * ```ts\n * // Return all camera track publications.\n * const trackReferences: TrackReference[] = useTracks([Track.Source.Camera])\n * ```\n * @example\n * ```ts\n * // Return all subscribed camera tracks as well as placeholders for\n * // participants without a camera subscription.\n * const trackReferencesWithPlaceholders: TrackReferenceOrPlaceholder[] = useTracks([{source: Track.Source.Camera, withPlaceholder: true}])\n * ```\n * @public\n */\nexport function useTracks<T extends SourcesArray = Track.Source[]>(\n  sources: T = [\n    Track.Source.Camera,\n    Track.Source.Microphone,\n    Track.Source.ScreenShare,\n    Track.Source.ScreenShareAudio,\n    Track.Source.Unknown,\n  ] as T,\n  options: UseTracksOptions = {},\n): UseTracksHookReturnType<T> {\n  const room = useEnsureRoom(options.room);\n  const [trackReferences, setTrackReferences] = React.useState<TrackReference[]>([]);\n  const [participants, setParticipants] = React.useState<Participant[]>([]);\n\n  const sources_ = React.useMemo(() => {\n    return sources.map((s) => (isSourceWitOptions(s) ? s.source : s));\n  }, [JSON.stringify(sources)]);\n\n  React.useEffect(() => {\n    const subscription = trackReferencesObservable(room, sources_, {\n      additionalRoomEvents: options.updateOnlyOn,\n      onlySubscribed: options.onlySubscribed,\n    }).subscribe(({ trackReferences, participants }) => {\n      log.debug('setting track bundles', trackReferences, participants);\n      setTrackReferences(trackReferences);\n      setParticipants(participants);\n    });\n    return () => subscription.unsubscribe();\n  }, [\n    room,\n    JSON.stringify(options.onlySubscribed),\n    JSON.stringify(options.updateOnlyOn),\n    JSON.stringify(sources),\n  ]);\n\n  const maybeTrackReferences = React.useMemo(() => {\n    if (isSourcesWithOptions(sources)) {\n      const requirePlaceholder = requiredPlaceholders(sources, participants);\n      const trackReferencesWithPlaceholders: TrackReferenceOrPlaceholder[] =\n        Array.from(trackReferences);\n      participants.forEach((participant) => {\n        if (requirePlaceholder.has(participant.identity)) {\n          const sourcesToAddPlaceholder = requirePlaceholder.get(participant.identity) ?? [];\n          sourcesToAddPlaceholder.forEach((placeholderSource) => {\n            if (\n              trackReferences.find(\n                ({ participant: p, publication }) =>\n                  participant.identity === p.identity && publication.source === placeholderSource,\n              )\n            ) {\n              return;\n            }\n            log.debug(\n              `Add ${placeholderSource} placeholder for participant ${participant.identity}.`,\n            );\n            const placeholder: TrackReferencePlaceholder = {\n              participant,\n              source: placeholderSource,\n            };\n            trackReferencesWithPlaceholders.push(placeholder);\n          });\n        }\n      });\n      return trackReferencesWithPlaceholders;\n    } else {\n      return trackReferences;\n    }\n  }, [trackReferences, participants, sources]);\n\n  return maybeTrackReferences as UseTracksHookReturnType<T>;\n}\n\nfunction difference<T>(setA: Set<T>, setB: Set<T>): Set<T> {\n  const _difference = new Set(setA);\n  for (const elem of setB) {\n    _difference.delete(elem);\n  }\n  return _difference;\n}\n\nexport function requiredPlaceholders<T extends SourcesArray>(\n  sources: T,\n  participants: Participant[],\n): Map<Participant['identity'], Track.Source[]> {\n  const placeholderMap = new Map<Participant['identity'], Track.Source[]>();\n  if (isSourcesWithOptions(sources)) {\n    const sourcesThatNeedPlaceholder = sources\n      .filter((sourceWithOption) => sourceWithOption.withPlaceholder)\n      .map((sourceWithOption) => sourceWithOption.source);\n\n    participants.forEach((participant) => {\n      const sourcesOfSubscribedTracks = participant\n        .getTrackPublications()\n        .map((pub) => pub.track?.source)\n        .filter((trackSource): trackSource is Track.Source => trackSource !== undefined);\n      const placeholderNeededForThisParticipant = Array.from(\n        difference(new Set(sourcesThatNeedPlaceholder), new Set(sourcesOfSubscribedTracks)),\n      );\n      // If the participant needs placeholder add it to the placeholder map.\n      if (placeholderNeededForThisParticipant.length > 0) {\n        placeholderMap.set(participant.identity, placeholderNeededForThisParticipant);\n      }\n    });\n  }\n  return placeholderMap;\n}\n","import * as React from 'react';\nimport type { ChatOptions, ReceivedChatMessage } from '@livekit/components-core';\nimport { setupChat } from '@livekit/components-core';\nimport { ConnectionState } from 'livekit-client';\nimport { useRoomContext } from '../context';\nimport { useObservableState } from './internal/useObservableState';\nimport { useConnectionState } from './useConnectionStatus';\n\n/**\n * The `useChat` hook provides chat functionality for a LiveKit room.\n * It returns a simple `send` function to send chat messages and an array of `chatMessages` to hold received messages.\n * It also returns a `update` function that allows you to implement message-edit functionality.\n * @public\n */\nexport function useChat(options?: ChatOptions) {\n  const room = useRoomContext();\n  const connectionState = useConnectionState(room);\n  const isDisconnected = React.useMemo(\n    () => connectionState === ConnectionState.Disconnected,\n    [connectionState],\n  ); // used to reset the messages on room disconnect\n  const setup = React.useMemo<ReturnType<typeof setupChat>>(\n    () => setupChat(room, options),\n    [room, options, isDisconnected],\n  );\n  const isSending = useObservableState(setup.isSendingObservable, false);\n  const chatMessages = useObservableState<ReceivedChatMessage[]>(setup.messageObservable, []);\n\n  return { send: setup.send, update: setup.update, chatMessages, isSending };\n}\n","import type { LocalUserChoices } from '@livekit/components-core';\nimport { loadUserChoices, saveUserChoices } from '@livekit/components-core';\nimport * as React from 'react';\n\n/**\n * Options for the `usePersistentDeviceSettings` hook.\n * @alpha\n */\nexport interface UsePersistentUserChoicesOptions {\n  /**\n   * The default value to use if reading from local storage returns no results or fails.\n   */\n  defaults?: Partial<LocalUserChoices>;\n  /**\n   * Whether to prevent saving to persistent storage.\n   * @defaultValue false\n   */\n  preventSave?: boolean;\n  /**\n   * Whether to prevent loading user choices from persistent storage and use `defaults` instead.\n   * @defaultValue false\n   */\n  preventLoad?: boolean;\n}\n\n/**\n * A hook that provides access to user choices stored in local storage, such as\n * selected media devices and their current state (on or off), as well as the user name.\n * @alpha\n */\nexport function usePersistentUserChoices(options: UsePersistentUserChoicesOptions = {}) {\n  const [userChoices, setSettings] = React.useState<LocalUserChoices>(\n    loadUserChoices(options.defaults, options.preventLoad ?? false),\n  );\n\n  const saveAudioInputEnabled = React.useCallback((isEnabled: boolean) => {\n    setSettings((prev) => ({ ...prev, audioEnabled: isEnabled }));\n  }, []);\n  const saveVideoInputEnabled = React.useCallback((isEnabled: boolean) => {\n    setSettings((prev) => ({ ...prev, videoEnabled: isEnabled }));\n  }, []);\n  const saveAudioInputDeviceId = React.useCallback((deviceId: string) => {\n    setSettings((prev) => ({ ...prev, audioDeviceId: deviceId }));\n  }, []);\n  const saveVideoInputDeviceId = React.useCallback((deviceId: string) => {\n    setSettings((prev) => ({ ...prev, videoDeviceId: deviceId }));\n  }, []);\n  const saveUsername = React.useCallback((username: string) => {\n    setSettings((prev) => ({ ...prev, username: username }));\n  }, []);\n\n  React.useEffect(() => {\n    saveUserChoices(userChoices, options.preventSave ?? false);\n  }, [userChoices, options.preventSave]);\n\n  return {\n    userChoices,\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId,\n    saveUsername,\n  };\n}\n","import * as React from 'react';\nimport { LocalParticipant } from 'livekit-client';\nimport type { Participant, Room } from 'livekit-client';\nimport { encryptionStatusObservable } from '@livekit/components-core';\nimport { useEnsureParticipant, useEnsureRoom } from '../context';\nimport { useObservableState } from './internal';\n\n/**\n * @alpha\n */\nexport interface UseIsEncryptedOptions {\n  room?: Room;\n}\n\n/**\n * @alpha\n */\nexport function useIsEncrypted(participant?: Participant, options: UseIsEncryptedOptions = {}) {\n  const p = useEnsureParticipant(participant);\n\n  const room = useEnsureRoom(options.room);\n\n  const observer = React.useMemo(() => encryptionStatusObservable(room, p), [room, p]);\n  const isEncrypted = useObservableState(\n    observer,\n    p instanceof LocalParticipant ? p.isE2EEEnabled : !!p?.isEncrypted,\n  );\n  return isEncrypted;\n}\n","import { recordingStatusObservable } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useEnsureRoom } from '../context';\nimport { useObservableState } from './internal';\nimport { useConnectionState } from './useConnectionStatus';\nimport type { Room } from 'livekit-client';\n\n/**\n * The `useIsRecording` hook returns a `boolean` that indicates if the room is currently being recorded.\n * @example\n * ```tsx\n * const isRecording = useIsRecording();\n * ```\n * @public\n */\nexport function useIsRecording(room?: Room) {\n  const r = useEnsureRoom(room);\n  const connectionState = useConnectionState(r);\n  const observable = React.useMemo(() => recordingStatusObservable(r), [r, connectionState]);\n  const isRecording = useObservableState(observable, r.isRecording);\n\n  return isRecording;\n}\n","import * as React from 'react';\nimport { LocalAudioTrack } from 'livekit-client';\nimport type { KrispNoiseFilterProcessor, NoiseFilterOptions } from '@livekit/krisp-noise-filter';\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\nimport { useLocalParticipant } from '../../..';\n\n/**\n * @alpha\n */\nexport interface useKrispNoiseFilterOptions {\n  /**\n   * by default the hook will use the localParticipant's microphone track publication.\n   * You can override this behavior by passing in a target TrackReference here\n   */\n  trackRef?: TrackReferenceOrPlaceholder;\n  filterOptions?: NoiseFilterOptions;\n}\n\n/**\n * This hook is a convenience helper for enabling Krisp Enhanced Audio Noise Cancellation on LiveKit audio tracks.\n * It returns a `setNoiseFilterEnabled` method to conveniently toggle between enabled and disabled states.\n *\n * @remarks Krisp noise filter is a feature that's only supported on LiveKit cloud plans\n * @alpha\n * @example\n * ```tsx\n *   const krisp = useKrispNoiseFilter();\n *   return <input\n        type=\"checkbox\"\n        onChange={(ev) => krisp.setNoiseFilterEnabled(ev.target.checked)}\n        checked={krisp.isNoiseFilterEnabled}\n        disabled={krisp.isNoiseFilterPending}\n      />\n * ```\n */\nexport function useKrispNoiseFilter(options: useKrispNoiseFilterOptions = {}) {\n  const [shouldEnable, setShouldEnable] = React.useState(false);\n  const [isNoiseFilterPending, setIsNoiseFilterPending] = React.useState(false);\n  const [isNoiseFilterEnabled, setIsNoiseFilterEnabled] = React.useState(false);\n  let micPublication = useLocalParticipant().microphoneTrack;\n  const [krispProcessor, setKrispProcessor] = React.useState<\n    KrispNoiseFilterProcessor | undefined\n  >();\n  if (options.trackRef) {\n    micPublication = options.trackRef.publication;\n  }\n\n  const setNoiseFilterEnabled = React.useCallback(async (enable: boolean) => {\n    if (enable) {\n      const { KrispNoiseFilter, isKrispNoiseFilterSupported } = await import(\n        '@livekit/krisp-noise-filter'\n      );\n\n      if (!isKrispNoiseFilterSupported()) {\n        console.warn('Krisp noise filter is not supported in this browser');\n        return;\n      }\n      if (!krispProcessor) {\n        setKrispProcessor(KrispNoiseFilter(options.filterOptions));\n      }\n    }\n    setShouldEnable((prev) => {\n      if (prev !== enable) {\n        setIsNoiseFilterPending(true);\n      }\n      return enable;\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (micPublication && micPublication.track instanceof LocalAudioTrack && krispProcessor) {\n      const currentProcessor = micPublication.track.getProcessor();\n      if (currentProcessor && currentProcessor.name === 'livekit-noise-filter') {\n        setIsNoiseFilterPending(true);\n        (currentProcessor as KrispNoiseFilterProcessor).setEnabled(shouldEnable).finally(() => {\n          setIsNoiseFilterPending(false);\n          setIsNoiseFilterEnabled(shouldEnable);\n        });\n      } else if (!currentProcessor && shouldEnable) {\n        setIsNoiseFilterPending(true);\n        micPublication?.track\n          ?.setProcessor(krispProcessor)\n          .then(() => krispProcessor.setEnabled(shouldEnable))\n          .then(() => {\n            setIsNoiseFilterEnabled(true);\n          })\n          .catch((e: any) => {\n            setIsNoiseFilterEnabled(false);\n            console.error(e);\n          })\n          .finally(() => {\n            setIsNoiseFilterPending(false);\n          });\n      }\n    }\n  }, [shouldEnable, micPublication, krispProcessor]);\n\n  return {\n    setNoiseFilterEnabled,\n    isNoiseFilterEnabled,\n    isNoiseFilterPending,\n    processor: krispProcessor,\n  };\n}\n","import type { ChatMessage, ChatOptions } from '@livekit/components-core';\nimport * as React from 'react';\nimport { useMaybeLayoutContext } from '../context';\nimport { cloneSingleChild } from '../utils';\nimport type { MessageFormatter } from '../components/ChatEntry';\nimport { ChatEntry } from '../components/ChatEntry';\nimport { useChat } from '../hooks/useChat';\nimport { ChatToggle } from '../components';\nimport { ChatCloseIcon } from '../assets/icons';\n\n/** @public */\nexport interface ChatProps extends React.HTMLAttributes<HTMLDivElement>, ChatOptions {\n  messageFormatter?: MessageFormatter;\n}\n\n/**\n * The Chat component adds a basis chat functionality to the LiveKit room. The messages are distributed to all participants\n * in the room. Only users who are in the room at the time of dispatch will receive the message.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <Chat />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport function Chat({\n  messageFormatter,\n  messageDecoder,\n  messageEncoder,\n  channelTopic,\n  ...props\n}: ChatProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const ulRef = React.useRef<HTMLUListElement>(null);\n\n  const chatOptions: ChatOptions = React.useMemo(() => {\n    return { messageDecoder, messageEncoder, channelTopic };\n  }, [messageDecoder, messageEncoder, channelTopic]);\n\n  const { send, chatMessages, isSending } = useChat(chatOptions);\n\n  const layoutContext = useMaybeLayoutContext();\n  const lastReadMsgAt = React.useRef<ChatMessage['timestamp']>(0);\n\n  async function handleSubmit(event: React.FormEvent) {\n    event.preventDefault();\n    if (inputRef.current && inputRef.current.value.trim() !== '') {\n      if (send) {\n        await send(inputRef.current.value);\n        inputRef.current.value = '';\n        inputRef.current.focus();\n      }\n    }\n  }\n\n  React.useEffect(() => {\n    if (ulRef) {\n      ulRef.current?.scrollTo({ top: ulRef.current.scrollHeight });\n    }\n  }, [ulRef, chatMessages]);\n\n  React.useEffect(() => {\n    if (!layoutContext || chatMessages.length === 0) {\n      return;\n    }\n\n    if (\n      layoutContext.widget.state?.showChat &&\n      chatMessages.length > 0 &&\n      lastReadMsgAt.current !== chatMessages[chatMessages.length - 1]?.timestamp\n    ) {\n      lastReadMsgAt.current = chatMessages[chatMessages.length - 1]?.timestamp;\n      return;\n    }\n\n    const unreadMessageCount = chatMessages.filter(\n      (msg) => !lastReadMsgAt.current || msg.timestamp > lastReadMsgAt.current,\n    ).length;\n\n    const { widget } = layoutContext;\n    if (unreadMessageCount > 0 && widget.state?.unreadMessages !== unreadMessageCount) {\n      widget.dispatch?.({ msg: 'unread_msg', count: unreadMessageCount });\n    }\n  }, [chatMessages, layoutContext?.widget]);\n\n  return (\n    <div {...props} className=\"lk-chat\">\n      <div className=\"lk-chat-header\">\n        Messages\n        <ChatToggle className=\"lk-close-button\">\n          <ChatCloseIcon />\n        </ChatToggle>\n      </div>\n\n      <ul className=\"lk-list lk-chat-messages\" ref={ulRef}>\n        {props.children\n          ? chatMessages.map((msg, idx) =>\n              cloneSingleChild(props.children, {\n                entry: msg,\n                key: msg.id ?? idx,\n                messageFormatter,\n              }),\n            )\n          : chatMessages.map((msg, idx, allMsg) => {\n              const hideName = idx >= 1 && allMsg[idx - 1].from === msg.from;\n              // If the time delta between two messages is bigger than 60s show timestamp.\n              const hideTimestamp = idx >= 1 && msg.timestamp - allMsg[idx - 1].timestamp < 60_000;\n\n              return (\n                <ChatEntry\n                  key={msg.id ?? idx}\n                  hideName={hideName}\n                  hideTimestamp={hideName === false ? false : hideTimestamp} // If we show the name always show the timestamp as well.\n                  entry={msg}\n                  messageFormatter={messageFormatter}\n                />\n              );\n            })}\n      </ul>\n      <form className=\"lk-chat-form\" onSubmit={handleSubmit}>\n        <input\n          className=\"lk-form-control lk-chat-form-input\"\n          disabled={isSending}\n          ref={inputRef}\n          type=\"text\"\n          placeholder=\"Enter a message...\"\n          onInput={(ev) => ev.stopPropagation()}\n          onKeyDown={(ev) => ev.stopPropagation()}\n          onKeyUp={(ev) => ev.stopPropagation()}\n        />\n        <button type=\"submit\" className=\"lk-button lk-chat-form-button\" disabled={isSending}>\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n","import { computeMenuPosition, wasClickOutside } from '@livekit/components-core';\nimport * as React from 'react';\nimport { MediaDeviceSelect } from '../components/controls/MediaDeviceSelect';\nimport { log } from '@livekit/components-core';\nimport type { LocalAudioTrack, LocalVideoTrack } from 'livekit-client';\n\n/** @public */\nexport interface MediaDeviceMenuProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  kind?: MediaDeviceKind;\n  initialSelection?: string;\n  onActiveDeviceChange?: (kind: MediaDeviceKind, deviceId: string) => void;\n  tracks?: Partial<Record<MediaDeviceKind, LocalAudioTrack | LocalVideoTrack | undefined>>;\n  /**\n   * this will call getUserMedia if the permissions are not yet given to enumerate the devices with device labels.\n   * in some browsers multiple calls to getUserMedia result in multiple permission prompts.\n   * It's generally advised only flip this to true, once a (preview) track has been acquired successfully with the\n   * appropriate permissions.\n   *\n   * @see {@link PreJoin}\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices | MDN enumerateDevices}\n   */\n  requestPermissions?: boolean;\n}\n\n/**\n * The `MediaDeviceMenu` component is a button that opens a menu that lists\n * all media devices and allows the user to select them.\n *\n * @remarks\n * This component is implemented with the `MediaDeviceSelect` LiveKit components.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <MediaDeviceMenu />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport function MediaDeviceMenu({\n  kind,\n  initialSelection,\n  onActiveDeviceChange,\n  tracks,\n  requestPermissions = false,\n  ...props\n}: MediaDeviceMenuProps) {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [devices, setDevices] = React.useState<MediaDeviceInfo[]>([]);\n  const [updateRequired, setUpdateRequired] = React.useState<boolean>(true);\n  const [needPermissions, setNeedPermissions] = React.useState(requestPermissions);\n\n  const handleActiveDeviceChange = (kind: MediaDeviceKind, deviceId: string) => {\n    log.debug('handle device change');\n    setIsOpen(false);\n    onActiveDeviceChange?.(kind, deviceId);\n  };\n\n  const button = React.useRef<HTMLButtonElement>(null);\n  const tooltip = React.useRef<HTMLDivElement>(null);\n\n  React.useLayoutEffect(() => {\n    if (isOpen) {\n      setNeedPermissions(true);\n    }\n  }, [isOpen]);\n\n  React.useLayoutEffect(() => {\n    if (button.current && tooltip.current && (devices || updateRequired)) {\n      computeMenuPosition(button.current, tooltip.current).then(({ x, y }) => {\n        if (tooltip.current) {\n          Object.assign(tooltip.current.style, { left: `${x}px`, top: `${y}px` });\n        }\n      });\n    }\n    setUpdateRequired(false);\n  }, [button, tooltip, devices, updateRequired]);\n\n  const handleClickOutside = React.useCallback(\n    (event: MouseEvent) => {\n      if (!tooltip.current) {\n        return;\n      }\n      if (event.target === button.current) {\n        return;\n      }\n      if (isOpen && wasClickOutside(tooltip.current, event)) {\n        setIsOpen(false);\n      }\n    },\n    [isOpen, tooltip, button],\n  );\n\n  React.useEffect(() => {\n    document.addEventListener<'click'>('click', handleClickOutside);\n    window.addEventListener<'resize'>('resize', () => setUpdateRequired(true));\n    return () => {\n      document.removeEventListener<'click'>('click', handleClickOutside);\n      window.removeEventListener<'resize'>('resize', () => setUpdateRequired(true));\n    };\n  }, [handleClickOutside, setUpdateRequired]);\n\n  return (\n    <>\n      <button\n        className=\"lk-button lk-button-menu\"\n        aria-pressed={isOpen}\n        {...props}\n        onClick={() => setIsOpen(!isOpen)}\n        ref={button}\n      >\n        {props.children}\n      </button>\n      {/** only render when enabled in order to make sure that the permissions are requested only if the menu is enabled */}\n      {!props.disabled && (\n        <div\n          className=\"lk-device-menu\"\n          ref={tooltip}\n          style={{ visibility: isOpen ? 'visible' : 'hidden' }}\n        >\n          {kind ? (\n            <MediaDeviceSelect\n              initialSelection={initialSelection}\n              onActiveDeviceChange={(deviceId) => handleActiveDeviceChange(kind, deviceId)}\n              onDeviceListChange={setDevices}\n              kind={kind}\n              track={tracks?.[kind]}\n              requestPermissions={needPermissions}\n            />\n          ) : (\n            <>\n              <div className=\"lk-device-menu-heading\">Audio inputs</div>\n              <MediaDeviceSelect\n                kind=\"audioinput\"\n                onActiveDeviceChange={(deviceId) =>\n                  handleActiveDeviceChange('audioinput', deviceId)\n                }\n                onDeviceListChange={setDevices}\n                track={tracks?.audioinput}\n                requestPermissions={needPermissions}\n              />\n              <div className=\"lk-device-menu-heading\">Video inputs</div>\n              <MediaDeviceSelect\n                kind=\"videoinput\"\n                onActiveDeviceChange={(deviceId) =>\n                  handleActiveDeviceChange('videoinput', deviceId)\n                }\n                onDeviceListChange={setDevices}\n                track={tracks?.videoinput}\n                requestPermissions={needPermissions}\n              />\n            </>\n          )}\n        </div>\n      )}\n    </>\n  );\n}\n","import * as React from 'react';\nimport { warnAboutMissingStyles } from '../utils';\n\n/**\n * @internal\n */\nexport function useWarnAboutMissingStyles() {\n  React.useEffect(() => {\n    warnAboutMissingStyles();\n  }, []);\n}\n","import type {\n  CreateLocalTracksOptions,\n  LocalAudioTrack,\n  LocalTrack,\n  LocalVideoTrack,\n} from 'livekit-client';\nimport {\n  createLocalAudioTrack,\n  createLocalTracks,\n  createLocalVideoTrack,\n  facingModeFromLocalTrack,\n  Track,\n  VideoPresets,\n  Mutex,\n} from 'livekit-client';\nimport * as React from 'react';\nimport { MediaDeviceMenu } from './MediaDeviceMenu';\nimport { TrackToggle } from '../components/controls/TrackToggle';\nimport type { LocalUserChoices } from '@livekit/components-core';\nimport { log } from '@livekit/components-core';\nimport { ParticipantPlaceholder } from '../assets/images';\nimport { useMediaDevices, usePersistentUserChoices } from '../hooks';\nimport { useWarnAboutMissingStyles } from '../hooks/useWarnAboutMissingStyles';\nimport { defaultUserChoices } from '@livekit/components-core';\n\n/**\n * Props for the PreJoin component.\n * @public\n */\nexport interface PreJoinProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onSubmit' | 'onError'> {\n  /** This function is called with the `LocalUserChoices` if validation is passed. */\n  onSubmit?: (values: LocalUserChoices) => void;\n  /**\n   * Provide your custom validation function. Only if validation is successful the user choices are past to the onSubmit callback.\n   */\n  onValidate?: (values: LocalUserChoices) => boolean;\n  onError?: (error: Error) => void;\n  /** Prefill the input form with initial values. */\n  defaults?: Partial<LocalUserChoices>;\n  /** Display a debug window for your convenience. */\n  debug?: boolean;\n  joinLabel?: string;\n  micLabel?: string;\n  camLabel?: string;\n  userLabel?: string;\n  /**\n   * If true, user choices are persisted across sessions.\n   * @defaultValue true\n   * @alpha\n   */\n  persistUserChoices?: boolean;\n}\n\n/** @alpha */\nexport function usePreviewTracks(\n  options: CreateLocalTracksOptions,\n  onError?: (err: Error) => void,\n) {\n  const [tracks, setTracks] = React.useState<LocalTrack[]>();\n\n  const trackLock = React.useMemo(() => new Mutex(), []);\n\n  React.useEffect(() => {\n    let needsCleanup = false;\n    let localTracks: Array<LocalTrack> = [];\n    trackLock.lock().then(async (unlock) => {\n      try {\n        if (options.audio || options.video) {\n          localTracks = await createLocalTracks(options);\n\n          if (needsCleanup) {\n            localTracks.forEach((tr) => tr.stop());\n          } else {\n            setTracks(localTracks);\n          }\n        }\n      } catch (e: unknown) {\n        if (onError && e instanceof Error) {\n          onError(e);\n        } else {\n          log.error(e);\n        }\n      } finally {\n        unlock();\n      }\n    });\n\n    return () => {\n      needsCleanup = true;\n      localTracks.forEach((track) => {\n        track.stop();\n      });\n    };\n  }, [JSON.stringify(options), onError, trackLock]);\n\n  return tracks;\n}\n\n/** @public */\nexport function usePreviewDevice<T extends LocalVideoTrack | LocalAudioTrack>(\n  enabled: boolean,\n  deviceId: string,\n  kind: 'videoinput' | 'audioinput',\n) {\n  const [deviceError, setDeviceError] = React.useState<Error | null>(null);\n  const [isCreatingTrack, setIsCreatingTrack] = React.useState<boolean>(false);\n\n  const devices = useMediaDevices({ kind });\n  const [selectedDevice, setSelectedDevice] = React.useState<MediaDeviceInfo | undefined>(\n    undefined,\n  );\n\n  const [localTrack, setLocalTrack] = React.useState<T>();\n  const [localDeviceId, setLocalDeviceId] = React.useState<string>(deviceId);\n\n  React.useEffect(() => {\n    setLocalDeviceId(deviceId);\n  }, [deviceId]);\n\n  const createTrack = async (deviceId: string, kind: 'videoinput' | 'audioinput') => {\n    try {\n      const track =\n        kind === 'videoinput'\n          ? await createLocalVideoTrack({\n              deviceId: deviceId,\n              resolution: VideoPresets.h720.resolution,\n            })\n          : await createLocalAudioTrack({ deviceId });\n\n      const newDeviceId = await track.getDeviceId();\n      if (newDeviceId && deviceId !== newDeviceId) {\n        prevDeviceId.current = newDeviceId;\n        setLocalDeviceId(newDeviceId);\n      }\n      setLocalTrack(track as T);\n    } catch (e) {\n      if (e instanceof Error) {\n        setDeviceError(e);\n      }\n    }\n  };\n\n  const switchDevice = async (track: LocalVideoTrack | LocalAudioTrack, id: string) => {\n    await track.setDeviceId(id);\n    prevDeviceId.current = id;\n  };\n\n  const prevDeviceId = React.useRef(localDeviceId);\n\n  React.useEffect(() => {\n    if (enabled && !localTrack && !deviceError && !isCreatingTrack) {\n      log.debug('creating track', kind);\n      setIsCreatingTrack(true);\n      createTrack(localDeviceId, kind).finally(() => {\n        setIsCreatingTrack(false);\n      });\n    }\n  }, [enabled, localTrack, deviceError, isCreatingTrack]);\n\n  // switch camera device\n  React.useEffect(() => {\n    if (!localTrack) {\n      return;\n    }\n    if (!enabled) {\n      log.debug(`muting ${kind} track`);\n      localTrack.mute().then(() => log.debug(localTrack.mediaStreamTrack));\n    } else if (selectedDevice?.deviceId && prevDeviceId.current !== selectedDevice?.deviceId) {\n      log.debug(`switching ${kind} device from`, prevDeviceId.current, selectedDevice.deviceId);\n      switchDevice(localTrack, selectedDevice.deviceId);\n    } else {\n      log.debug(`unmuting local ${kind} track`);\n      localTrack.unmute();\n    }\n  }, [localTrack, selectedDevice, enabled, kind]);\n\n  React.useEffect(() => {\n    return () => {\n      if (localTrack) {\n        log.debug(`stopping local ${kind} track`);\n        localTrack.stop();\n        localTrack.mute();\n      }\n    };\n  }, []);\n\n  React.useEffect(() => {\n    setSelectedDevice(devices?.find((dev) => dev.deviceId === localDeviceId));\n  }, [localDeviceId, devices]);\n\n  return {\n    selectedDevice,\n    localTrack,\n    deviceError,\n  };\n}\n\n/**\n * The `PreJoin` prefab component is normally presented to the user before he enters a room.\n * This component allows the user to check and select the preferred media device (camera und microphone).\n * On submit the user decisions are returned, which can then be passed on to the `LiveKitRoom` so that the user enters the room with the correct media devices.\n *\n * @remarks\n * This component is independent of the `LiveKitRoom` component and should not be nested within it.\n * Because it only accesses the local media tracks this component is self-contained and works without connection to the LiveKit server.\n *\n * @example\n * ```tsx\n * <PreJoin />\n * ```\n * @public\n */\nexport function PreJoin({\n  defaults = {},\n  onValidate,\n  onSubmit,\n  onError,\n  debug,\n  joinLabel = 'Join Room',\n  micLabel = 'Microphone',\n  camLabel = 'Camera',\n  userLabel = 'Username',\n  persistUserChoices = true,\n  ...htmlProps\n}: PreJoinProps) {\n  const [userChoices, setUserChoices] = React.useState(defaultUserChoices);\n\n  // TODO: Remove and pipe `defaults` object directly into `usePersistentUserChoices` once we fully switch from type `LocalUserChoices` to `UserChoices`.\n  const partialDefaults: Partial<LocalUserChoices> = {\n    ...(defaults.audioDeviceId !== undefined && { audioDeviceId: defaults.audioDeviceId }),\n    ...(defaults.videoDeviceId !== undefined && { videoDeviceId: defaults.videoDeviceId }),\n    ...(defaults.audioEnabled !== undefined && { audioEnabled: defaults.audioEnabled }),\n    ...(defaults.videoEnabled !== undefined && { videoEnabled: defaults.videoEnabled }),\n    ...(defaults.username !== undefined && { username: defaults.username }),\n  };\n\n  const {\n    userChoices: initialUserChoices,\n    saveAudioInputDeviceId,\n    saveAudioInputEnabled,\n    saveVideoInputDeviceId,\n    saveVideoInputEnabled,\n    saveUsername,\n  } = usePersistentUserChoices({\n    defaults: partialDefaults,\n    preventSave: !persistUserChoices,\n    preventLoad: !persistUserChoices,\n  });\n\n  // Initialize device settings\n  const [audioEnabled, setAudioEnabled] = React.useState<boolean>(initialUserChoices.audioEnabled);\n  const [videoEnabled, setVideoEnabled] = React.useState<boolean>(initialUserChoices.videoEnabled);\n  const [audioDeviceId, setAudioDeviceId] = React.useState<string>(\n    initialUserChoices.audioDeviceId,\n  );\n  const [videoDeviceId, setVideoDeviceId] = React.useState<string>(\n    initialUserChoices.videoDeviceId,\n  );\n  const [username, setUsername] = React.useState(initialUserChoices.username);\n\n  // Save user choices to persistent storage.\n  React.useEffect(() => {\n    saveAudioInputEnabled(audioEnabled);\n  }, [audioEnabled, saveAudioInputEnabled]);\n  React.useEffect(() => {\n    saveVideoInputEnabled(videoEnabled);\n  }, [videoEnabled, saveVideoInputEnabled]);\n  React.useEffect(() => {\n    saveAudioInputDeviceId(audioDeviceId);\n  }, [audioDeviceId, saveAudioInputDeviceId]);\n  React.useEffect(() => {\n    saveVideoInputDeviceId(videoDeviceId);\n  }, [videoDeviceId, saveVideoInputDeviceId]);\n  React.useEffect(() => {\n    saveUsername(username);\n  }, [username, saveUsername]);\n\n  const tracks = usePreviewTracks(\n    {\n      audio: audioEnabled ? { deviceId: initialUserChoices.audioDeviceId } : false,\n      video: videoEnabled ? { deviceId: initialUserChoices.videoDeviceId } : false,\n    },\n    onError,\n  );\n\n  const videoEl = React.useRef(null);\n\n  const videoTrack = React.useMemo(\n    () => tracks?.filter((track) => track.kind === Track.Kind.Video)[0] as LocalVideoTrack,\n    [tracks],\n  );\n\n  const facingMode = React.useMemo(() => {\n    if (videoTrack) {\n      const { facingMode } = facingModeFromLocalTrack(videoTrack);\n      return facingMode;\n    } else {\n      return 'undefined';\n    }\n  }, [videoTrack]);\n\n  const audioTrack = React.useMemo(\n    () => tracks?.filter((track) => track.kind === Track.Kind.Audio)[0] as LocalAudioTrack,\n    [tracks],\n  );\n\n  React.useEffect(() => {\n    if (videoEl.current && videoTrack) {\n      videoTrack.unmute();\n      videoTrack.attach(videoEl.current);\n    }\n\n    return () => {\n      videoTrack?.detach();\n    };\n  }, [videoTrack]);\n\n  const [isValid, setIsValid] = React.useState<boolean>();\n\n  const handleValidation = React.useCallback(\n    (values: LocalUserChoices) => {\n      if (typeof onValidate === 'function') {\n        return onValidate(values);\n      } else {\n        return values.username !== '';\n      }\n    },\n    [onValidate],\n  );\n\n  React.useEffect(() => {\n    const newUserChoices = {\n      username,\n      videoEnabled,\n      videoDeviceId,\n      audioEnabled,\n      audioDeviceId,\n    };\n    setUserChoices(newUserChoices);\n    setIsValid(handleValidation(newUserChoices));\n  }, [username, videoEnabled, handleValidation, audioEnabled, audioDeviceId, videoDeviceId]);\n\n  function handleSubmit(event: React.FormEvent) {\n    event.preventDefault();\n    if (handleValidation(userChoices)) {\n      if (typeof onSubmit === 'function') {\n        onSubmit(userChoices);\n      }\n    } else {\n      log.warn('Validation failed with: ', userChoices);\n    }\n  }\n\n  useWarnAboutMissingStyles();\n\n  return (\n    <div className=\"lk-prejoin\" {...htmlProps}>\n      <div className=\"lk-video-container\">\n        {videoTrack && (\n          <video ref={videoEl} width=\"1280\" height=\"720\" data-lk-facing-mode={facingMode} />\n        )}\n        {(!videoTrack || !videoEnabled) && (\n          <div className=\"lk-camera-off-note\">\n            <ParticipantPlaceholder />\n          </div>\n        )}\n      </div>\n      <div className=\"lk-button-group-container\">\n        <div className=\"lk-button-group audio\">\n          <TrackToggle\n            initialState={audioEnabled}\n            source={Track.Source.Microphone}\n            onChange={(enabled) => setAudioEnabled(enabled)}\n          >\n            {micLabel}\n          </TrackToggle>\n          <div className=\"lk-button-group-menu\">\n            <MediaDeviceMenu\n              initialSelection={audioDeviceId}\n              kind=\"audioinput\"\n              disabled={!audioTrack}\n              tracks={{ audioinput: audioTrack }}\n              onActiveDeviceChange={(_, id) => setAudioDeviceId(id)}\n            />\n          </div>\n        </div>\n        <div className=\"lk-button-group video\">\n          <TrackToggle\n            initialState={videoEnabled}\n            source={Track.Source.Camera}\n            onChange={(enabled) => setVideoEnabled(enabled)}\n          >\n            {camLabel}\n          </TrackToggle>\n          <div className=\"lk-button-group-menu\">\n            <MediaDeviceMenu\n              initialSelection={videoDeviceId}\n              kind=\"videoinput\"\n              disabled={!videoTrack}\n              tracks={{ videoinput: videoTrack }}\n              onActiveDeviceChange={(_, id) => setVideoDeviceId(id)}\n            />\n          </div>\n        </div>\n      </div>\n\n      <form className=\"lk-username-container\">\n        <input\n          className=\"lk-form-control\"\n          id=\"username\"\n          name=\"username\"\n          type=\"text\"\n          defaultValue={username}\n          placeholder={userLabel}\n          onChange={(inputEl) => setUsername(inputEl.target.value)}\n          autoComplete=\"off\"\n        />\n        <button\n          className=\"lk-button lk-join-button\"\n          type=\"submit\"\n          onClick={handleSubmit}\n          disabled={!isValid}\n        >\n          {joinLabel}\n        </button>\n      </form>\n\n      {debug && (\n        <>\n          <strong>User Choices:</strong>\n          <ul className=\"lk-list\" style={{ overflow: 'hidden', maxWidth: '15rem' }}>\n            <li>Username: {`${userChoices.username}`}</li>\n            <li>Video Enabled: {`${userChoices.videoEnabled}`}</li>\n            <li>Audio Enabled: {`${userChoices.audioEnabled}`}</li>\n            <li>Video Device: {`${userChoices.videoDeviceId}`}</li>\n            <li>Audio Device: {`${userChoices.audioDeviceId}`}</li>\n          </ul>\n        </>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useSettingsToggle } from '../../hooks/useSettingsToggle';\n\n/** @alpha */\nexport interface SettingsMenuToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * The `SettingsMenuToggle` component is a button that toggles the visibility of the `SettingsMenu` component.\n * @remarks\n * For the component to have any effect it has to live inside a `LayoutContext` context.\n *\n * @alpha\n */\nexport const SettingsMenuToggle: (\n  props: SettingsMenuToggleProps & React.RefAttributes<HTMLButtonElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<HTMLButtonElement, SettingsMenuToggleProps>(\n  function SettingsMenuToggle(props: SettingsMenuToggleProps, ref) {\n    const { mergedProps } = useSettingsToggle({ props });\n\n    return (\n      <button ref={ref} {...mergedProps}>\n        {props.children}\n      </button>\n    );\n  },\n);\n","import { useLayoutContext } from '../context';\nimport { mergeProps } from '../mergeProps';\nimport * as React from 'react';\n\n/** @alpha */\nexport interface UseSettingsToggleProps {\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n\n/**\n * The `useSettingsToggle` hook provides state and functions for toggling the settings menu.\n * @remarks\n * Depends on the `LayoutContext` to work properly.\n * @see {@link SettingsMenu}\n * @alpha\n */\nexport function useSettingsToggle({ props }: UseSettingsToggleProps) {\n  const { dispatch, state } = useLayoutContext().widget;\n  const className = 'lk-button lk-settings-toggle';\n\n  const mergedProps = React.useMemo(() => {\n    return mergeProps(props, {\n      className,\n      onClick: () => {\n        if (dispatch) dispatch({ msg: 'toggle_settings' });\n      },\n      'aria-pressed': state?.showSettings ? 'true' : 'false',\n    });\n  }, [props, className, dispatch, state]);\n\n  return { mergedProps };\n}\n","import { Track } from 'livekit-client';\nimport * as React from 'react';\nimport { MediaDeviceMenu } from './MediaDeviceMenu';\nimport { DisconnectButton } from '../components/controls/DisconnectButton';\nimport { TrackToggle } from '../components/controls/TrackToggle';\nimport { ChatIcon, GearIcon, LeaveIcon } from '../assets/icons';\nimport { ChatToggle } from '../components/controls/ChatToggle';\nimport { useLocalParticipantPermissions, usePersistentUserChoices } from '../hooks';\nimport { useMediaQuery } from '../hooks/internal';\nimport { useMaybeLayoutContext } from '../context';\nimport { supportsScreenSharing } from '@livekit/components-core';\nimport { mergeProps } from '../utils';\nimport { StartMediaButton } from '../components/controls/StartMediaButton';\nimport { SettingsMenuToggle } from '../components/controls/SettingsMenuToggle';\n\n/** @public */\nexport type ControlBarControls = {\n  microphone?: boolean;\n  camera?: boolean;\n  chat?: boolean;\n  screenShare?: boolean;\n  leave?: boolean;\n  settings?: boolean;\n};\n\n/** @public */\nexport interface ControlBarProps extends React.HTMLAttributes<HTMLDivElement> {\n  onDeviceError?: (error: { source: Track.Source; error: Error }) => void;\n  variation?: 'minimal' | 'verbose' | 'textOnly';\n  controls?: ControlBarControls;\n  /**\n   * If `true`, the user's device choices will be persisted.\n   * This will enable the user to have the same device choices when they rejoin the room.\n   * @defaultValue true\n   * @alpha\n   */\n  saveUserChoices?: boolean;\n}\n\n/**\n * The `ControlBar` prefab gives the user the basic user interface to control their\n * media devices (camera, microphone and screen share), open the `Chat` and leave the room.\n *\n * @remarks\n * This component is build with other LiveKit components like `TrackToggle`,\n * `DeviceSelectorButton`, `DisconnectButton` and `StartAudio`.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <ControlBar />\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport function ControlBar({\n  variation,\n  controls,\n  saveUserChoices = true,\n  onDeviceError,\n  ...props\n}: ControlBarProps) {\n  const [isChatOpen, setIsChatOpen] = React.useState(false);\n  const layoutContext = useMaybeLayoutContext();\n  React.useEffect(() => {\n    if (layoutContext?.widget.state?.showChat !== undefined) {\n      setIsChatOpen(layoutContext?.widget.state?.showChat);\n    }\n  }, [layoutContext?.widget.state?.showChat]);\n  const isTooLittleSpace = useMediaQuery(`(max-width: ${isChatOpen ? 1000 : 760}px)`);\n\n  const defaultVariation = isTooLittleSpace ? 'minimal' : 'verbose';\n  variation ??= defaultVariation;\n\n  const visibleControls = { leave: true, ...controls };\n\n  const localPermissions = useLocalParticipantPermissions();\n\n  if (!localPermissions) {\n    visibleControls.camera = false;\n    visibleControls.chat = false;\n    visibleControls.microphone = false;\n    visibleControls.screenShare = false;\n  } else {\n    visibleControls.camera ??= localPermissions.canPublish;\n    visibleControls.microphone ??= localPermissions.canPublish;\n    visibleControls.screenShare ??= localPermissions.canPublish;\n    visibleControls.chat ??= localPermissions.canPublishData && controls?.chat;\n  }\n\n  const showIcon = React.useMemo(\n    () => variation === 'minimal' || variation === 'verbose',\n    [variation],\n  );\n  const showText = React.useMemo(\n    () => variation === 'textOnly' || variation === 'verbose',\n    [variation],\n  );\n\n  const browserSupportsScreenSharing = supportsScreenSharing();\n\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = React.useState(false);\n\n  const onScreenShareChange = React.useCallback(\n    (enabled: boolean) => {\n      setIsScreenShareEnabled(enabled);\n    },\n    [setIsScreenShareEnabled],\n  );\n\n  const htmlProps = mergeProps({ className: 'lk-control-bar' }, props);\n\n  const {\n    saveAudioInputEnabled,\n    saveVideoInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputDeviceId,\n  } = usePersistentUserChoices({ preventSave: !saveUserChoices });\n\n  const microphoneOnChange = React.useCallback(\n    (enabled: boolean, isUserInitiated: boolean) =>\n      isUserInitiated ? saveAudioInputEnabled(enabled) : null,\n    [saveAudioInputEnabled],\n  );\n\n  const cameraOnChange = React.useCallback(\n    (enabled: boolean, isUserInitiated: boolean) =>\n      isUserInitiated ? saveVideoInputEnabled(enabled) : null,\n    [saveVideoInputEnabled],\n  );\n\n  return (\n    <div {...htmlProps}>\n      {visibleControls.microphone && (\n        <div className=\"lk-button-group\">\n          <TrackToggle\n            source={Track.Source.Microphone}\n            showIcon={showIcon}\n            onChange={microphoneOnChange}\n            onDeviceError={(error) => onDeviceError?.({ source: Track.Source.Microphone, error })}\n          >\n            {showText && 'Microphone'}\n          </TrackToggle>\n          <div className=\"lk-button-group-menu\">\n            <MediaDeviceMenu\n              kind=\"audioinput\"\n              onActiveDeviceChange={(_kind, deviceId) => saveAudioInputDeviceId(deviceId ?? '')}\n            />\n          </div>\n        </div>\n      )}\n      {visibleControls.camera && (\n        <div className=\"lk-button-group\">\n          <TrackToggle\n            source={Track.Source.Camera}\n            showIcon={showIcon}\n            onChange={cameraOnChange}\n            onDeviceError={(error) => onDeviceError?.({ source: Track.Source.Camera, error })}\n          >\n            {showText && 'Camera'}\n          </TrackToggle>\n          <div className=\"lk-button-group-menu\">\n            <MediaDeviceMenu\n              kind=\"videoinput\"\n              onActiveDeviceChange={(_kind, deviceId) => saveVideoInputDeviceId(deviceId ?? '')}\n            />\n          </div>\n        </div>\n      )}\n      {visibleControls.screenShare && browserSupportsScreenSharing && (\n        <TrackToggle\n          source={Track.Source.ScreenShare}\n          captureOptions={{ audio: true, selfBrowserSurface: 'include' }}\n          showIcon={showIcon}\n          onChange={onScreenShareChange}\n          onDeviceError={(error) => onDeviceError?.({ source: Track.Source.ScreenShare, error })}\n        >\n          {showText && (isScreenShareEnabled ? 'Stop screen share' : 'Share screen')}\n        </TrackToggle>\n      )}\n      {visibleControls.chat && (\n        <ChatToggle>\n          {showIcon && <ChatIcon />}\n          {showText && 'Chat'}\n        </ChatToggle>\n      )}\n      {visibleControls.settings && (\n        <SettingsMenuToggle>\n          {showIcon && <GearIcon />}\n          {showText && 'Settings'}\n        </SettingsMenuToggle>\n      )}\n      {visibleControls.leave && (\n        <DisconnectButton>\n          {showIcon && <LeaveIcon />}\n          {showText && 'Leave'}\n        </DisconnectButton>\n      )}\n      <StartMediaButton />\n    </div>\n  );\n}\n","import type {\n  MessageDecoder,\n  MessageEncoder,\n  TrackReferenceOrPlaceholder,\n  WidgetState,\n} from '@livekit/components-core';\nimport { isEqualTrackRef, isTrackReference, isWeb, log } from '@livekit/components-core';\nimport { RoomEvent, Track } from 'livekit-client';\nimport * as React from 'react';\nimport type { MessageFormatter } from '../components';\nimport {\n  CarouselLayout,\n  ConnectionStateToast,\n  FocusLayout,\n  FocusLayoutContainer,\n  GridLayout,\n  LayoutContextProvider,\n  ParticipantTile,\n  RoomAudioRenderer,\n} from '../components';\nimport { useCreateLayoutContext } from '../context';\nimport { usePinnedTracks, useTracks } from '../hooks';\nimport { Chat } from './Chat';\nimport { ControlBar } from './ControlBar';\nimport { useWarnAboutMissingStyles } from '../hooks/useWarnAboutMissingStyles';\n\n/**\n * @public\n */\nexport interface VideoConferenceProps extends React.HTMLAttributes<HTMLDivElement> {\n  chatMessageFormatter?: MessageFormatter;\n  chatMessageEncoder?: MessageEncoder;\n  chatMessageDecoder?: MessageDecoder;\n  /** @alpha */\n  SettingsComponent?: React.ComponentType;\n}\n\n/**\n * The `VideoConference` ready-made component is your drop-in solution for a classic video conferencing application.\n * It provides functionality such as focusing on one participant, grid view with pagination to handle large numbers\n * of participants, basic non-persistent chat, screen sharing, and more.\n *\n * @remarks\n * The component is implemented with other LiveKit components like `FocusContextProvider`,\n * `GridLayout`, `ControlBar`, `FocusLayoutContainer` and `FocusLayout`.\n * You can use these components as a starting point for your own custom video conferencing application.\n *\n * @example\n * ```tsx\n * <LiveKitRoom>\n *   <VideoConference />\n * <LiveKitRoom>\n * ```\n * @public\n */\nexport function VideoConference({\n  chatMessageFormatter,\n  chatMessageDecoder,\n  chatMessageEncoder,\n  SettingsComponent,\n  ...props\n}: VideoConferenceProps) {\n  const [widgetState, setWidgetState] = React.useState<WidgetState>({\n    showChat: false,\n    unreadMessages: 0,\n    showSettings: false,\n  });\n  const lastAutoFocusedScreenShareTrack = React.useRef<TrackReferenceOrPlaceholder | null>(null);\n\n  const tracks = useTracks(\n    [\n      { source: Track.Source.Camera, withPlaceholder: true },\n      { source: Track.Source.ScreenShare, withPlaceholder: false },\n    ],\n    { updateOnlyOn: [RoomEvent.ActiveSpeakersChanged], onlySubscribed: false },\n  );\n\n  const widgetUpdate = (state: WidgetState) => {\n    log.debug('updating widget state', state);\n    setWidgetState(state);\n  };\n\n  const layoutContext = useCreateLayoutContext();\n\n  const screenShareTracks = tracks\n    .filter(isTrackReference)\n    .filter((track) => track.publication.source === Track.Source.ScreenShare);\n\n  const focusTrack = usePinnedTracks(layoutContext)?.[0];\n  const carouselTracks = tracks.filter((track) => !isEqualTrackRef(track, focusTrack));\n\n  React.useEffect(() => {\n    // If screen share tracks are published, and no pin is set explicitly, auto set the screen share.\n    if (\n      screenShareTracks.some((track) => track.publication.isSubscribed) &&\n      lastAutoFocusedScreenShareTrack.current === null\n    ) {\n      log.debug('Auto set screen share focus:', { newScreenShareTrack: screenShareTracks[0] });\n      layoutContext.pin.dispatch?.({ msg: 'set_pin', trackReference: screenShareTracks[0] });\n      lastAutoFocusedScreenShareTrack.current = screenShareTracks[0];\n    } else if (\n      lastAutoFocusedScreenShareTrack.current &&\n      !screenShareTracks.some(\n        (track) =>\n          track.publication.trackSid ===\n          lastAutoFocusedScreenShareTrack.current?.publication?.trackSid,\n      )\n    ) {\n      log.debug('Auto clearing screen share focus.');\n      layoutContext.pin.dispatch?.({ msg: 'clear_pin' });\n      lastAutoFocusedScreenShareTrack.current = null;\n    }\n    if (focusTrack && !isTrackReference(focusTrack)) {\n      const updatedFocusTrack = tracks.find(\n        (tr) =>\n          tr.participant.identity === focusTrack.participant.identity &&\n          tr.source === focusTrack.source,\n      );\n      if (updatedFocusTrack !== focusTrack && isTrackReference(updatedFocusTrack)) {\n        layoutContext.pin.dispatch?.({ msg: 'set_pin', trackReference: updatedFocusTrack });\n      }\n    }\n  }, [\n    screenShareTracks\n      .map((ref) => `${ref.publication.trackSid}_${ref.publication.isSubscribed}`)\n      .join(),\n    focusTrack?.publication?.trackSid,\n    tracks,\n  ]);\n\n  useWarnAboutMissingStyles();\n\n  return (\n    <div className=\"lk-video-conference\" {...props}>\n      {isWeb() && (\n        <LayoutContextProvider\n          value={layoutContext}\n          // onPinChange={handleFocusStateChange}\n          onWidgetChange={widgetUpdate}\n        >\n          <div className=\"lk-video-conference-inner\">\n            {!focusTrack ? (\n              <div className=\"lk-grid-layout-wrapper\">\n                <GridLayout tracks={tracks}>\n                  <ParticipantTile />\n                </GridLayout>\n              </div>\n            ) : (\n              <div className=\"lk-focus-layout-wrapper\">\n                <FocusLayoutContainer>\n                  <CarouselLayout tracks={carouselTracks}>\n                    <ParticipantTile />\n                  </CarouselLayout>\n                  {focusTrack && <FocusLayout trackRef={focusTrack} />}\n                </FocusLayoutContainer>\n              </div>\n            )}\n            <ControlBar controls={{ chat: true, settings: !!SettingsComponent }} />\n          </div>\n          <Chat\n            style={{ display: widgetState.showChat ? 'grid' : 'none' }}\n            messageFormatter={chatMessageFormatter}\n            messageEncoder={chatMessageEncoder}\n            messageDecoder={chatMessageDecoder}\n          />\n          {SettingsComponent && (\n            <div\n              className=\"lk-settings-menu-modal\"\n              style={{ display: widgetState.showSettings ? 'block' : 'none' }}\n            >\n              <SettingsComponent />\n            </div>\n          )}\n        </LayoutContextProvider>\n      )}\n      <RoomAudioRenderer />\n      <ConnectionStateToast />\n    </div>\n  );\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport clsx from 'clsx';\n\n/**\n * Calls all functions in the order they were chained with the same arguments.\n * @internal\n */\nexport function chain(...callbacks: any[]): (...args: any[]) => void {\n  return (...args: any[]) => {\n    for (const callback of callbacks) {\n      if (typeof callback === 'function') {\n        try {\n          callback(...args);\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  };\n}\n\ninterface Props {\n  [key: string]: any;\n}\n\n// taken from: https://stackoverflow.com/questions/51603250/typescript-3-parameter-list-intersection-type/51604379#51604379\ntype TupleTypes<T> = { [P in keyof T]: T[P] } extends { [key: number]: infer V } ? V : never;\ntype UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void\n  ? I\n  : never;\n\n/**\n * Merges multiple props objects together. Event handlers are chained,\n * classNames are combined, and ids are deduplicated - different ids\n * will trigger a side-effect and re-render components hooked up with `useId`.\n * For all other props, the last prop object overrides all previous ones.\n * @param args - Multiple sets of props to merge together.\n * @internal\n */\nexport function mergeProps<T extends Props[]>(...args: T): UnionToIntersection<TupleTypes<T>> {\n  // Start with a base clone of the first argument. This is a lot faster than starting\n  // with an empty object and adding properties as we go.\n  const result: Props = { ...args[0] };\n  for (let i = 1; i < args.length; i++) {\n    const props = args[i];\n    for (const key in props) {\n      const a = result[key];\n      const b = props[key];\n\n      // Chain events\n      if (\n        typeof a === 'function' &&\n        typeof b === 'function' &&\n        // This is a lot faster than a regex.\n        key[0] === 'o' &&\n        key[1] === 'n' &&\n        key.charCodeAt(2) >= /* 'A' */ 65 &&\n        key.charCodeAt(2) <= /* 'Z' */ 90\n      ) {\n        result[key] = chain(a, b);\n\n        // Merge classnames, sometimes classNames are empty string which eval to false, so we just need to do a type check\n      } else if (\n        (key === 'className' || key === 'UNSAFE_className') &&\n        typeof a === 'string' &&\n        typeof b === 'string'\n      ) {\n        result[key] = clsx(a, b);\n      } else {\n        result[key] = b !== undefined ? b : a;\n      }\n    }\n  }\n\n  return result as UnionToIntersection<TupleTypes<T>>;\n}\n","import { log, setupLiveKitRoom } from '@livekit/components-core';\nimport { Room, MediaDeviceFailure, RoomEvent, ConnectionState } from 'livekit-client';\nimport * as React from 'react';\nimport type { HTMLAttributes } from 'react';\n\nimport type { LiveKitRoomProps } from '../components';\nimport { mergeProps } from '../mergeProps';\n\nconst defaultRoomProps: Partial<LiveKitRoomProps> = {\n  connect: true,\n  audio: false,\n  video: false,\n};\n\n/**\n * The `useLiveKitRoom` hook is used to implement the `LiveKitRoom` or your custom implementation of it.\n * It returns a `Room` instance and HTML props that should be applied to the root element of the component.\n *\n * @example\n * ```tsx\n * const { room, htmlProps } = useLiveKitRoom();\n * return <div {...htmlProps}>...</div>;\n * ```\n * @public\n */\nexport function useLiveKitRoom<T extends HTMLElement>(\n  props: LiveKitRoomProps,\n): {\n  room: Room | undefined;\n  htmlProps: HTMLAttributes<T>;\n} {\n  const {\n    token,\n    serverUrl,\n    options,\n    room: passedRoom,\n    connectOptions,\n    connect,\n    audio,\n    video,\n    screen,\n    onConnected,\n    onDisconnected,\n    onError,\n    onMediaDeviceFailure,\n    onEncryptionError,\n    simulateParticipants,\n    ...rest\n  } = { ...defaultRoomProps, ...props };\n  if (options && passedRoom) {\n    log.warn(\n      'when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.',\n    );\n  }\n\n  const [room, setRoom] = React.useState<Room | undefined>();\n\n  React.useEffect(() => {\n    setRoom(passedRoom ?? new Room(options));\n  }, [passedRoom]);\n\n  const htmlProps = React.useMemo(() => {\n    const { className } = setupLiveKitRoom();\n    return mergeProps(rest, { className }) as HTMLAttributes<T>;\n  }, [rest]);\n\n  React.useEffect(() => {\n    if (!room) return;\n    const onSignalConnected = () => {\n      const localP = room.localParticipant;\n\n      log.debug('trying to publish local tracks');\n      Promise.all([\n        localP.setMicrophoneEnabled(!!audio, typeof audio !== 'boolean' ? audio : undefined),\n        localP.setCameraEnabled(!!video, typeof video !== 'boolean' ? video : undefined),\n        localP.setScreenShareEnabled(!!screen, typeof screen !== 'boolean' ? screen : undefined),\n      ]).catch((e) => {\n        log.warn(e);\n        onError?.(e as Error);\n      });\n    };\n\n    const handleMediaDeviceError = (e: Error) => {\n      const mediaDeviceFailure = MediaDeviceFailure.getFailure(e);\n      onMediaDeviceFailure?.(mediaDeviceFailure);\n    };\n    const handleEncryptionError = (e: Error) => {\n      onEncryptionError?.(e);\n    };\n    room\n      .on(RoomEvent.SignalConnected, onSignalConnected)\n      .on(RoomEvent.MediaDevicesError, handleMediaDeviceError)\n      .on(RoomEvent.EncryptionError, handleEncryptionError);\n\n    return () => {\n      room\n        .off(RoomEvent.SignalConnected, onSignalConnected)\n        .off(RoomEvent.MediaDevicesError, handleMediaDeviceError)\n        .off(RoomEvent.EncryptionError, handleEncryptionError);\n    };\n  }, [room, audio, video, screen, onError, onEncryptionError, onMediaDeviceFailure]);\n\n  React.useEffect(() => {\n    if (!room) return;\n\n    if (simulateParticipants) {\n      room.simulateParticipants({\n        participants: {\n          count: simulateParticipants,\n        },\n        publish: {\n          audio: true,\n          useRealTracks: true,\n        },\n      });\n      return;\n    }\n    if (!token) {\n      log.debug('no token yet');\n      return;\n    }\n    if (!serverUrl) {\n      log.warn('no livekit url provided');\n      onError?.(Error('no livekit url provided'));\n      return;\n    }\n    if (connect) {\n      log.debug('connecting');\n      room.connect(serverUrl, token, connectOptions).catch((e) => {\n        log.warn(e);\n        onError?.(e as Error);\n      });\n    } else {\n      log.debug('disconnecting because connect is false');\n      room.disconnect();\n    }\n  }, [\n    connect,\n    token,\n    JSON.stringify(connectOptions),\n    room,\n    onError,\n    serverUrl,\n    simulateParticipants,\n  ]);\n\n  React.useEffect(() => {\n    if (!room) return;\n    const connectionStateChangeListener = (state: ConnectionState) => {\n      switch (state) {\n        case ConnectionState.Disconnected:\n          if (onDisconnected) onDisconnected();\n          break;\n        case ConnectionState.Connected:\n          if (onConnected) onConnected();\n          break;\n\n        default:\n          break;\n      }\n    };\n    room.on(RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    return () => {\n      room.off(RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\n    };\n  }, [token, onConnected, onDisconnected, room]);\n\n  React.useEffect(() => {\n    if (!room) return;\n    return () => {\n      log.info('disconnecting on onmount');\n      room.disconnect();\n    };\n  }, [room]);\n\n  return { room, htmlProps };\n}\n","import type {\n  AudioCaptureOptions,\n  RoomConnectOptions,\n  RoomOptions,\n  ScreenShareCaptureOptions,\n  VideoCaptureOptions,\n} from 'livekit-client';\nimport type { MediaDeviceFailure, Room } from 'livekit-client';\nimport * as React from 'react';\nimport { type FeatureFlags, LKFeatureContext, RoomContext } from '../context';\nimport { useLiveKitRoom } from '../hooks';\n\n/** @public */\nexport interface LiveKitRoomProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onError'> {\n  /**\n   * URL to the LiveKit server.\n   * For example: `wss://<domain>.livekit.cloud`\n   * To simplify the implementation, `undefined` is also accepted as an intermediate value, but only with a valid string url can the connection be established.\n   */\n  serverUrl: string | undefined;\n  /**\n   * A user specific access token for a client to authenticate to the room.\n   * This token is necessary to establish a connection to the room.\n   * To simplify the implementation, `undefined` is also accepted as an intermediate value, but only with a valid string token can the connection be established.\n   *\n   * @see https://docs.livekit.io/cloud/project-management/keys-and-tokens/#generating-access-tokens\n   */\n  token: string | undefined;\n  /**\n   * Publish audio immediately after connecting to your LiveKit room.\n   * @defaultValue `false`\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/AudioCaptureOptions.html\n   */\n  audio?: AudioCaptureOptions | boolean;\n  /**\n   * Publish video immediately after connecting to your LiveKit room.\n   * @defaultValue `false`\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/VideoCaptureOptions.html\n   */\n  video?: VideoCaptureOptions | boolean;\n  /**\n   * Publish screen share immediately after connecting to your LiveKit room.\n   * @defaultValue `false`\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/ScreenShareCaptureOptions.html\n   */\n  screen?: ScreenShareCaptureOptions | boolean;\n  /**\n   * If set to true a connection to LiveKit room is initiated.\n   * @defaultValue `true`\n   */\n  connect?: boolean;\n  /**\n   * Options for when creating a new room.\n   * When you pass your own room instance to this component, these options have no effect.\n   * Instead, set the options directly in the room instance.\n   *\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/RoomOptions.html\n   */\n  options?: RoomOptions;\n  /**\n   * Define options how to connect to the LiveKit server.\n   *\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/RoomConnectOptions.html\n   */\n  connectOptions?: RoomConnectOptions;\n  onConnected?: () => void;\n  onDisconnected?: () => void;\n  onError?: (error: Error) => void;\n  onMediaDeviceFailure?: (failure?: MediaDeviceFailure) => void;\n  onEncryptionError?: (error: Error) => void;\n  /**\n   * Optional room instance.\n   * By passing your own room instance you overwrite the `options` parameter,\n   * make sure to set the options directly on the room instance itself.\n   */\n  room?: Room;\n\n  simulateParticipants?: number | undefined;\n\n  /**\n   * @internal\n   */\n  featureFlags?: FeatureFlags;\n}\n\n/**\n * The `LiveKitRoom` component provides the room context to all its child components.\n * It is generally the starting point of your LiveKit app and the root of the LiveKit component tree.\n * It provides the room state as a React context to all child components, so you don't have to pass it yourself.\n *\n * @example\n * ```tsx\n * <LiveKitRoom\n *  token='<livekit-token>'\n *  serverUrl='<url-to-livekit-server>'\n *  connect={true}\n * >\n *     ...\n * </LiveKitRoom>\n * ```\n * @public\n */\nexport const LiveKitRoom: (\n  props: React.PropsWithChildren<LiveKitRoomProps> & React.RefAttributes<HTMLDivElement>,\n) => React.ReactNode = /* @__PURE__ */ React.forwardRef<\n  HTMLDivElement,\n  React.PropsWithChildren<LiveKitRoomProps>\n>(function LiveKitRoom(props: React.PropsWithChildren<LiveKitRoomProps>, ref) {\n  const { room, htmlProps } = useLiveKitRoom(props);\n  return (\n    <div ref={ref} {...htmlProps}>\n      {room && (\n        <RoomContext.Provider value={room}>\n          <LKFeatureContext.Provider value={props.featureFlags}>\n            {props.children}\n          </LKFeatureContext.Provider>\n        </RoomContext.Provider>\n      )}\n    </div>\n  );\n});\n"],"names":["ConsoleApiName","log","debug","info","warn","error","globalConsole","console","originalConsoleMethods","Object","keys","forEach","name","PREFIX","display","bind","DOCS_ORIGIN","DOCS_TROUBLESHOOTING","concat","MORE_DETAILS","catchUserErrors","fn","errorMsg","args","_i","arguments","length","apply","err","onMonitorErrorCollected","__spreadArray","to","from","pack","ar","i","l","Array","prototype","slice","call","debugMode","setDebugMode","newDebugMode","monitored","_","__","descriptor","originalMethod","value","monitor","this","callMonitored","context","e","displayIfDebugEnabled","candidate","search","indexOf","arrayFrom","arrayLike","array","Set","item","push","objectValues","object","map","key","startsWith","target","toAssign","source","hasOwnProperty","getGlobalObject","globalThis","defineProperty","get","configurable","globalObject","_dd_temp_","self","window","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","test","undefined","TextEncoder","encode","Blob","size","getZoneJsOriginalValue","original","browserWindow","Zone","__symbol__","callback","delay","timeoutId","throttle","wait","options","pendingExecutionWithParameters","pendingTimeoutId","needLeadingExecution","leading","needTrailingExecution","trailing","inWaitPeriod","throttled","parameters","cancel","jsonStringify","replacer","space","JSON","stringify","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","getPrototypeOf","restoreValueToJson","_a","objectToJson","toJSON","objectHasValue","some","isEmptyObject","CUSTOMER_DATA_BYTES_LIMIT","CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT","BYTES_COMPUTATION_THROTTLING_DELAY","createCustomerDataTrackerManager","compressionStatus","customerDataTrackers","Map","alreadyWarned","checkCustomerDataLimit","initialBytesCount","bytesCountLimit","bytesCount","tracker","getBytesCount","displayCustomerDataLimitReachedWarning","createDetachedTracker","createCustomerDataTracker","getOrCreateTracker","type","has","set","setCompressionStatus","newCompressionStatus","getCompressionStatus","stop","clear","bytesCountCache","computeBytesCountThrottled","cancelComputeBytesCount","resetBytesCount","updateCustomerData","resetCustomerData","getType","isArray","mergeInto","destination","circularReferenceChecker","WeakSet","set_1","hasAlreadyBeenSeen","add","createCircularReferenceChecker","Date","getTime","RegExp","flags","global","ignoreCase","multiline","sticky","unicode","join","merged_1","merged","deepClone","combine","sources","sources_1","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","WeakMap","sanitizedData","sanitizeProcessor","serializedSanitizedData","accumulatedCharacterCount","containerToProcess","shift","separatorLength","targetData","path","warnOverCharacterLimit","parentPath","queue","sourceToSanitize","tryToApplyToJSON","toString","description","sanitizePrimitivesAndFunctions","sanitizedSource","Event","isTrusted","match","sanitizeObjects","sourceAsObject","currentPath","changeType","Observable","onFirstSubscribe","observers","subscribe","f","_this","onLastUnsubscribe","unsubscribe","filter","other","notify","data","observer","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","createContextManager","customerDataTracker","changeObservable","contextManager","getContext","setContext","newContext","clearContext","setContextProperty","property","removeContextProperty","TrackingConsent","GRANTED","NOT_GRANTED","addEventListener","configuration","eventTarget","eventName","listener","addEventListeners","eventNames","_b","once","capture","passive","listenerWithMonitor","event","__ddIsTrusted","allowUntrustedEvents","remove","CONTEXT_STORE_KEY_PREFIX","storageListeners","storeContextManager","productKey","customerDataType","storageKey","buildStorageKey","getFromStorage","rawContext","localStorage","getItem","parse","setItem","UNKNOWN_FUNCTION","computeStackTrace","ex","stack","stackProperty","tryToGetString","exString","String","split","line","stackFrame","parts","CHROME_LINE_RE","exec","isNative","isEval","submatch","CHROME_EVAL_RE","column","func","url","parseChromeLine","CHROME_ANONYMOUS_FUNCTION_RE","parseChromeAnonymousLine","WINJS_LINE_RE","parseWinLine","GECKO_LINE_RE","GECKO_EVAL_RE","parseGeckoLine","message","fileUrl","filePosition","computeStackTraceFromOnErrorMessage","messageObj","ERROR_TYPES_RE","tryToParseMessage","createHandlingStack","formattedStack","Error","stackTrace","toStackTraceString","result","formatErrorMessage","frame","ExperimentalFeature","NO_ERROR_STACK_PRESENT_MESSAGE","computeRawError","originalError","handlingStack","startClocks","nonErrorPrefix","handling","isErrorInstance","computeMessage","hasUsableStack","causes","flattenErrorCauses","fingerprint","tryToGetFingerprint","dd_fingerprint","parentSource","currentError","cause","enabledExperimentalFeatures","initFeatureFlags","enableExperimentalFeatures","flag","getExperimentalFeatures","navigationStart","INTAKE_SITE_STAGING","INTAKE_SITE_FED_STAGING","INTAKE_SITE_US1","PCI_INTAKE_HOST_US1","ONE_SECOND","ONE_MINUTE","ONE_HOUR","dateNow","timeStampNow","relativeNow","performance","now","clocksNow","relative","timeStamp","addDuration","a","b","getRelativeTime","timestamp","getNavigationStart","timing","sendToExtension","payload","__ddBrowserSdkExtensionCallback","performDraw","threshold","Math","random","getConnectivity","navigator","status","onLine","interfaces","connection","effective_type","effectiveType","removeItem","index","splice","BUFFER_LIMIT","buffer","drain","arg","TelemetryType","usage","ALLOWED_FRAME_URLS","TELEMETRY_EXCLUDED_SITES","preStartTelemetryBuffer","onRawTelemetryEventCollected","startTelemetry","telemetryService","contextProvider","alreadySentEvents","telemetryEnabled","site","telemetrySampleRate","telemetryEnabledPerType","telemetryConfigurationSampleRate","telemetryUsageSampleRate","runtimeEnvInfo","is_local_file","location","protocol","is_worker","rawEvent","stringifiedEvent","maxTelemetryEventsPerPage","event_1","date","service","version","_dd","format_version","telemetry","runtime_env","connectivity","sdk_setup","experimental_features","toTelemetryEvent","addTelemetryError","setContextProvider","provider","enabled","addTelemetryDebug","kind","scrubCustomerFrames","formatError","allowedFrameUrl","sanitizeUser","newUser","user","displayAlreadyInitializedError","sdkName","initConfiguration","silentMultipleInit","ErrorSource","AGENT","CONSOLE","CUSTOM","LOGGER","NETWORK","SOURCE","REPORT","isAuthorized","handlerType","logger","loggerHandler","getHandler","sanitizedHandlerType","STATUS_PRIORITIES","getLevel","StatusType","ok","notice","critical","alert","emerg","createErrorFieldFromRawError","rawError","_c","includeMessage","__decorate","decorators","desc","d","c","r","getOwnPropertyDescriptor","Reflect","decorate","HandlerType","http","silent","STATUSES","Logger","handleLogStrategy","level","loggerContext","logImplementation","messageContext","sanitizedMessageContext","setHandler","handler","setLevel","createLoggerMethod","getEventBridge","eventBridgeGlobal","DatadogEventBridge","getCapabilities","getPrivacyLevel","getAllowedWebViewHosts","send","eventType","viewId","view","id","canUseEventBridge","currentHost","hostname","bridge","allowedHost","instrumentMethod","targetPrototype","method","onPreCall","computeHandlingStack","stopped","instrumentation","postCallCallback","onPostCall","normalizeUrl","buildUrl","href","base","supportedURL","isURLSupported","originalURL","getSupportedUrl","doc","document","anchorElement","createElement","baseElement","implementation","createHTMLDocument","head","appendChild","body","fetchObservable","URL","initFetchObservable","fetch","input","init","methodFromParams","Request","toUpperCase","state","responsePromise","startContext","reportFetch","partialContext","then","response","responseType","isAborted","signal","aborted","DOMException","code","ABORT_ERR","afterSend","beforeSend","generateUUID","placeholder","parseInt","replace","browserCache","initCookieParsed","getCurrentSiteCache","COMMA_SEPARATED_KEY_VALUE","safeTruncate","suffix","lastChar","charCodeAt","correctedLength","detectBrowserCached","userAgent","chrome","vendor","documentMode","detectBrowser","setCookie","expireDelay","setTime","expires","toUTCString","sameSite","crossSite","domain","secure","partitioned","cookie","getCookie","rawString","lastIndex","findCommaSeparatedValue","getInitCookie","findCommaSeparatedValues","deleteCookie","SESSION_STORE_KEY","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","EXPIRED","getExpiredSessionState","isExpired","isSessionInNotStartedState","session","isSessionStarted","isSessionInExpiredState","sessionState","created","Number","expire","expandSessionState","toSessionString","toSessionState","sessionString","isValidSessionString","entry","matches","OLD_SESSION_COOKIE_NAME","OLD_RUM_COOKIE_NAME","OLD_LOGS_COOKIE_NAME","RUM_SESSION_KEY","LOGS_SESSION_KEY","selectCookieStrategy","cookieOptions","useSecureSessionCookie","usePartitionedCrossSiteSessionCookie","useCrossSiteSessionCookie","trackSessionAcrossSubdomains","testCookieName","domainLevels","candidateDomain","pop","getCurrentSite","buildCookieOptions","testCookieValue","isCookieCorrectlySet","areCookiesAuthorized","initCookieStrategy","cookieStore","isLockEnabled","persistSession","retrieveSession","retrieveSessionCookie","expireSession","expireSessionCookie","cookieStoreStrategy","oldSessionId","oldRumType","oldLogsType","tryOldCookiesMigration","LOCAL_STORAGE_TEST_KEY","persistInLocalStorage","retrieveSessionFromLocalStorage","expireSessionFromLocalStorage","ongoingOperations","LOCK_RETRY_DELAY","LOCK_MAX_TRIES","bufferedOperations","processSessionStoreOperations","operations","sessionStoreStrategy","numberOfRetries","persistWithLock","lock","currentLock","retrieveStore","next","currentStore","retryLater","processedSession","process","after","sessionStore","currentNumberOfRetries","nextOperations","STORAGE_POLL_DELAY","selectSessionStoreStrategyType","sessionStoreStrategyType","allowFallbackToLocalStorage","testKey","retrievedId","selectLocalStorageStrategy","startSessionStore","computeSessionState","sessionCache","renewObservable","expireObservable","sessionStateUpdateObservable","watchSessionTimeoutId","synchronizeSession","startSession","synchronizedSession","trackingType","isTracked","expandOrRenewSessionState","hasSessionInCache","renewSessionInCache","throttledExpandOrRenewSession","cancelExpandOrRenewSession","isSessionInCacheOutdated","previousState","newState","expandOrRenewSession","expandSession","getSession","restartSession","updateSessionState","partialSessionState","createEndpointBuilder","trackType","configurationTags","buildUrlWithParameters","proxy","normalizedProxyUrl_1","encodeURIComponent","host","internalAnalyticsSubdomain","usePciIntake","domainParts","extension","buildEndpointHost","createEndpointUrlWithParametersBuilder","build","api","clientToken","retry","encoding","tags","count","lastFailureStatus","reverse","buildEndpointParameters","urlPrefix","TAG_SIZE_LIMIT","buildTag","rawValue","valueSizeLimit","supportUnicodePropertyEscapes","hasForbiddenCharacters","sanitizedValue","computeTransportConfiguration","env","datacenter","buildTags","endpointBuilders","logsEndpointBuilder","rumEndpointBuilder","sessionReplayEndpointBuilder","computeEndpointBuilders","intakeUrlPrefixes","builder","computeIntakeUrlPrefixes","replicaConfiguration","replica","replicaEndpointBuilders","applicationId","computeReplicaConfiguration","isIntakeUrl","intakeEndpoint","isString","tag","tagName","isSampleRate","sampleRate","validateAndBuildConfiguration","_d","_e","sessionSampleRate","trackingConsent","storeContextsAcrossPages","batchBytesLimit","eventRateLimiterThreshold","flushTimeout","batchMessagesLimit","messageBytesLimit","RawReportType","intervention","deprecation","cspViolation","initReportObservable","apis","blockedURI","effectiveDirective","buildRawReportError","csp","disposition","buildStack","originalPolicy","sourceFile","lineNumber","columnNumber","buildRawReportErrorFromCspViolation","createCspViolationReportObservable","reportTypes","ReportingObserver","handleReports","reports","report","buildRawReportErrorFromReport","types","buffered","observe","disconnect","createReportObservable","partial","DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT","validateAndBuildForwardOption","option","allowedValues","label","every","removeDuplicates","createPreStartStrategy","getCommonContext","trackingConsentState","doStartLogs","cachedInitConfiguration","cachedConfiguration","bufferApiCalls","trackingConsentStateSubscription","tryStartLogs","isGranted","startLogsResult","overrideInitConfigurationForBridge","baseConfiguration","forwardConsoleLogs","forwardReports","forwardErrorsToLogs","requestErrorResponseLengthLimit","sendLogsAfterSessionExpiration","validateAndBuildLogsConfiguration","tryToInit","getInternalContext","handleLog","statusType","LOGS_STORAGE_KEY","PageExitReason","HIDDEN","UNLOADING","PAGEHIDE","FROZEN","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","Boolean","_DATADOG_SYNTHETICS_INJECTS_RUM","getSyntheticsTestId","_DATADOG_SYNTHETICS_PUBLIC_ID","getSyntheticsResultId","_DATADOG_SYNTHETICS_RESULT_ID","END_OF_TIMES","Infinity","CLEAR_OLD_VALUES_INTERVAL","createValueHistory","maxEntries","entries","clearOldValuesInterval","oldTimeThreshold","endTime","clearOldValues","startTime","close","unshift","find","returnInactive","entries_1","closeActive","latestEntry","findAll","duration","reset","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","stopCallbacks","startSessionManager","sessionContextHistory","buildSessionContext","isReplayForced","forcedReplay","clocksOrigin","trackActivity","expandSessionWhenVisible","visibilityState","visibilityCheckInterval","trackVisibility","cb","trackResume","findSession","startLogsSessionManager","sessionManager","rawTrackingType","rawSessionType","hasValidLoggerSession","computeTrackingType","findTrackedSession","logsSentBeforeRumInjectionTelemetryAdded","getRUMInternalContext","getInternalContextFromRumGlobal","DD_RUM_SYNTHETICS","testId","resultId","DD_RUM","rumGlobal","startLogsAssembly","lifeCycle","reportError","statusWithCustom","logRateLimiters","limit","onLimitReached","eventCount","allowNextEvent","isLimitReached","createEventRateLimiter","rawLogsEvent","savedCommonContext","domainContext","commonContext","session_id","usr","origin","consoleObservablesByApi","initConsoleObservable","consoleObservables","originalConsoleApi","params","param","formatConsoleParameters","firstErrorParam","predicate","buildConsoleLog","createConsoleObservable","xhrObservable","LogStatusForApi","xhrContexts","initXhrObservable","stopInstrumentingStart","XMLHttpRequest","openXhr","stopInstrumentingSend","xhr","hasBeenReported","stopInstrumentingOnReadyStateChange","readyState","DONE","onEnd","unsubscribeLoadEndListener","start","completeContext","sendXhr","stopInstrumentingAbort","abortXhr","createXhrObservable","isServerError","startNetworkErrorCollection","xhrSubscription","handleResponse","fetchSubscription","request","onResponseDataAvailable","responseData","format","status_code","isRejected","truncateResponseText","computeXhrResponseData","clonedResponse","clone","tryToClone","TextDecoder","stream","bytesLimit","reader","getReader","chunks","readBytesCount","onDone","bytes","limitExceeded","catch","collectStreamBody","completeBuffer_1","Uint8Array","offset_1","chunk","readMore","read","done","readBytesFromStream","responseText","decode","truncateResponseStream","text","computeFetchResponseText","computeFetchErrorText","substring","trackRuntimeError","errorObservable","handleRuntimeError","stopInstrumentingOnError","errorObj","stopInstrumentingOnUnhandledRejection","reason","instrumentUnhandledRejection","LifeCycle","AbstractLifeCycle","callbacks","eventCallbacks","startLoggerCollection","logsMessage","savedDate","loggerToConsoleApiName","displayInConsole","rawLogEventData","createBatch","encoder","flushController","upsertBuffer","flushSubscription","flushObservable","upsertMessages","isPageExit","sendOnExit","isAsync","encoderResult","finishSync","outputBytesCount","formatPayloadFromEncoder","pendingMessages","pendingData","write","isEmpty","finish","flush","addOrUpdate","serializedMessage","estimatedMessageBytesCount","estimateEncodedBytesCount","hasMessageFor","removedMessage","messageBytesCount","notifyAfterRemoveMessage","notifyBeforeAddMessage","notifyAfterAddMessage","realMessageBytesCount","upsert","output","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","sendWithRetryStrategy","sendStrategy","transportStatus","queuedPayloads","bandwidthMonitor","canHandle","onSuccess","retryQueuedPayloads","onFailure","enqueue","scheduleRetry","first","dequeue","currentBackoffTime","min","shouldRetryRequest","ongoingRequestCount","isFull","queueFullReported","previousQueue","newPayloadQueue","createHttpRequest","endpointBuilder","retryState","ongoingByteCount","sendStrategyForRetry","onResponse","canUseKeepAlive","isKeepAliveSupported","fetchUrl","keepalive","mode","xhrUrl","sendXHR","fetchKeepAliveStrategy","canUseBeacon","sendBeacon","beaconUrl","hasReportedBeaconError","reportBeaconError","sendBeaconStrategy","open","setRequestHeader","createFlushController","durationLimitTimeoutId","messagesLimit","durationLimit","pageExitObservable","sessionExpireObservable","pageExitSubscription","sessionExpireSubscription","currentBytesCount","currentMessagesCount","flushReason","messagesCount","cancelDurationLimitTimeout","messageBytesCountDiff","startBatchWithReplica","primary","batchFactoryImp","primaryBatch","createBatchFromConfig","replicaBatch","endpoint","replicated","transformMessage","createIdentityEncoder","additionalEncodedBytesCount","rawBytesCount","startLogsTelemetry","_f","application","application_id","action","user_action","cleanupTasks","bridge_1","telemetrySubscription_1","telemetryBatch_1","telemetrySubscription_2","isTelemetryReplicationAllowed","addTelemetryConfiguration","baseSerializedInitConfiguration","session_sample_rate","telemetry_sample_rate","telemetry_configuration_sample_rate","telemetry_usage_sample_rate","use_before_send","use_cross_site_session_cookie","use_partitioned_cross_site_session_cookie","use_secure_session_cookie","use_proxy","silent_multiple_init","track_session_across_subdomains","allow_fallback_to_local_storage","store_contexts_across_pages","allow_untrusted_events","tracking_consent","forward_errors_to_logs","forward_console_logs","forward_reports","use_pci_intake","send_logs_after_session_expiration","serializeLogsConfiguration","task","datadogLogs","startLogsImpl","customerDataTrackerManager","globalContextManager","userContextManager","currentConsent","update","createTrackingConsentState","referrer","buildCommonContext","strategy","createPostStartStrategy","customLoggers","mainLogger","stub","publicApi","onReady","enumerable","makePublicApi","setTrackingConsent","feature","getGlobalContext","setGlobalContext","setGlobalContextProperty","removeGlobalContextProperty","clearGlobalContext","createLogger","conf","getLogger","getInitConfiguration","setUser","isValid","checkUser","getUser","setUserProperty","sanitizedProperty","removeUserProperty","clearUser","makeLogsPublicApi","startReportError","stopListeners","stopBeforeUnloadListener","createPageExitObservable","startLogsSessionManagerStub","stopLogsTelemetry","rawErrorObservable","stopRuntimeErrorTracking","rawErrorSubscription","startRuntimeErrorCollection","consoleSubscription","collectedData","startConsoleCollection","reportSubscription","getFileFromStackTraceString","startReportCollection","serverLogsEvent","startLogsBridge","stopLogsBatch_1","batch","startLogsBatch","trackedSession","existingGlobalVariable","q","defineGlobal","_global_process","_global_process1","module","exports","g","n","t","defaultSetTimout","defaultClearTimeout","runTimeout","setTimeout","clearTimeout","u","o","cleanUpNextTick","drainQueue","run","runClearTimeout","Item","fun","noop","nextTick","title","browser","argv","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","__nccwpck_require__","ab","__dirname","platform","getModifierState","includes","trim","timeout","KeyboardEvent","delete","removeEventListener","ChatToggle","React","props","ref","mergedProps","useChatToggle","children","DisconnectButton","buttonProps","useDisconnectButton","SvgCameraDisabledIcon","xmlns","width","height","fill","SvgCameraIcon","SvgChatCloseIcon","viewBox","SvgChatIcon","fillRule","clipRule","SvgChevron","SvgFocusToggleIcon","stroke","strokeLinecap","strokeLinejoin","strokeWidth","SvgGearIcon","SvgLeaveIcon","SvgLockLockedIcon","SvgMicDisabledIcon","SvgMicIcon","SvgQualityExcellentIcon","SvgQualityGoodIcon","opacity","SvgQualityPoorIcon","SvgQualityUnknownIcon","SvgScreenShareIcon","SvgScreenShareStopIcon","SvgSpinnerIcon","SvgUnfocusToggleIcon","FocusToggle","trackRef","trackRefFromContext","useMaybeTrackRefContext","inFocus","useFocusToggle","LayoutContext","Consumer","layoutContext","UnfocusToggleIcon","FocusToggleIcon","isProp","prop","mergeProps","mergePropsReactAria","cloneSingleChild","child","only","class","clsx","style","warnAboutMissingStyles","el","NODE_ENV","querySelector","getComputedStyle","getPropertyValue","MediaDeviceSelect","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError","room","useMaybeRoomContext","handleError","RoomEvent","MediaDevicesError","devices","activeDeviceId","setActiveMediaDevice","className","useMediaDeviceSelect","isActive","deviceId","device","role","onClick","async","exact","handleActiveDeviceChange","StartMediaButton","useRoomContext","audioProps","canPlayAudio","useStartAudio","canPlayVideo","useStartVideo","restProps","getSourceIcon","Track","Source","Microphone","MicIcon","MicDisabledIcon","Camera","CameraIcon","CameraDisabledIcon","ScreenShare","ScreenShareStopIcon","ScreenShareIcon","TrackToggle","showIcon","useTrackToggle","ConnectionQualityIndicator","quality","useConnectionQualityIndicator","elementProps","ConnectionQuality","Excellent","QualityExcellentIcon","Good","QualityGoodIcon","Poor","QualityPoorIcon","QualityUnknownIcon","getConnectionQualityIcon","ParticipantName","participant","p","useEnsureParticipant","infoObserver","setupParticipantName","identity","useObservableState","metadata","TrackMutedIndicator","show","isMuted","useTrackMutedIndicator","showIndicator","htmlProps","SvgParticipantPlaceholder","preserveAspectRatio","fillOpacity","useMediaTrackBySourceOrName","observerOptions","publication","setPublication","getTrackByIdentifier","setMuted","isSubscribed","setSubscribed","setTrack","orientation","setOrientation","previousElement","trackObserver","setupMediaTrack","sid","isTrackReference","trackSid","current","detach","element","isLocal","attach","dimensions","orientation_","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","freeSelf","root","Function","objectToString","nativeMax","max","nativeMin","isObject","toNumber","isObjectLike","isSymbol","valueOf","isBinary","lodash_debounce","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","TypeError","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","remainingWait","debounced","isInvoking","leadingEdge","useDebounceCallback","debouncedFunc","useRef","funcRef","useEffect","useUnmount","useMemo","debouncedFuncInstance","debounce","wrappedFunc","isPending","VideoTrack","onTrackClick","onSubscriptionStatusChanged","manageSubscription","trackReference","useEnsureTrackRef","mediaEl","intersectionEntry","rootMargin","freezeOnceVisible","initialIsIntersecting","onChange","setRef","useState","setState","isIntersecting","callbackRef","frozen","unobserve","IntersectionObserver","thresholds","threshold2","intersectionRatio","prevRef","_a2","useHooks.useIntersectionObserver","debouncedIntersectionEntry","initialValue","unwrappedInitialValue","debouncedValue","setDebouncedValue","previousValueRef","updateDebouncedValue","useHooks.useDebounceValue","RemoteTrackPublication","pub","muted","evt","AudioTrack","volume","RemoteAudioTrack","setVolume","setEnabled","ParticipantContextIfNeeded","hasContext","useMaybeParticipantContext","ParticipantContext","Provider","TrackRefContextIfNeeded","TrackRefContext","ParticipantTile","onParticipantClick","disableSpeakingIndicator","useParticipantTile","isEncrypted","useIsEncrypted","useMaybeLayoutContext","autoManageSubscription","useFeatureContext","autoSubscription","handleSubscribe","subscribed","pin","dispatch","isTrackReferencePinned","msg","position","ParticipantPlaceholder","LockLockedIcon","marginRight","FocusLayoutContainer","FocusLayout","TrackLoop","tracks","getTrackReferenceId","PaginationControl","totalPageCount","nextPage","prevPage","currentPage","pagesContainer","connectedElement","interactive","setInteractive","createInteractingObservable","PaginationIndicator","bubbles","GridLayout","gridEl","layout","useGridLayout","pagination","usePagination","maxTiles","useSwipe","onLeftSwipe","onRightSwipe","MIN_HEIGHT","MIN_WIDTH","MIN_VISIBLE_TILES","ASPECT_RATIO","ASPECT_RATIO_INVERT","CarouselLayout","asideEl","prevTiles","setPrevTiles","useSize","carouselOrientation","tileSpan","scrollBarWidth","getScrollBarWidth","tilesThatFit","maxVisibleTiles","round","abs","sortedTiles","useVisualStableUpdate","dataset","lkOrientation","setProperty","LayoutContextProvider","onPinChange","onWidgetChange","layoutContextValue","useEnsureCreateLayoutContext","widgetState","widget","RoomAudioRenderer","useTracks","ScreenShareAudio","Unknown","updateOnlyOn","onlySubscribed","Kind","Audio","Toast","ConnectionStateToast","notification","setNotification","useConnectionState","ConnectionState","Reconnecting","SpinnerIcon","Connecting","Disconnected","ChatEntry","hideName","hideTimestamp","messageFormatter","formattedMessage","hasBeenEdited","editTimestamp","locale","language","toLocaleTimeString","timeStyle","formatChatMessageLinks","tokenize","createDefaultGrammar","tok","content","rel","createCoords","v","x","y","oppositeSideMap","left","right","bottom","top","oppositeAlignmentMap","end","clamp","evaluate","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","getSideAxis","getAlignmentAxis","getOppositeAlignmentPlacement","alignment","getOppositePlacement","side","rectToClientRect","rect","computeCoordsFromPlacement","_ref","rtl","reference","floating","sideAxis","alignmentAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","detectOverflow","_await$platform$isEle","rects","elements","boundary","rootBoundary","elementContext","altBoundary","padding","paddingObject","expandPaddingObject","getPaddingObject","clippingClientRect","getClippingRect","isElement","contextElement","getDocumentElement","offsetParent","getOffsetParent","offsetScale","getScale","elementClientRect","convertOffsetParentRelativeRectToViewportRelativeRect","hasWindow","getNodeName","node","isNode","nodeName","toLowerCase","getWindow","_node$ownerDocument","ownerDocument","defaultView","documentElement","Node","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","isOverflowElement","overflow","overflowX","overflowY","isTableElement","isTopLayer","selector","isContainingBlock","elementOrCss","webkit","isWebKit","css","transform","perspective","containerType","backdropFilter","willChange","contain","CSS","supports","isLastTraversableNode","getNodeScroll","scrollLeft","scrollTop","scrollX","scrollY","getParentNode","assignedSlot","parentNode","getNearestOverflowAncestor","getOverflowAncestors","list","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","visualViewport","parent","getCssDimensions","parseFloat","hasOffset","offsetWidth","offsetHeight","shouldFallback","$","unwrapElement","domElement","getBoundingClientRect","isFinite","noOffsets","getVisualOffsets","offsetLeft","offsetTop","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","isFixed","floatingOffsetParent","shouldAddVisualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","clientLeft","paddingLeft","clientTop","paddingTop","getWindowScrollBarX","leftScroll","getClientRectFromClippingAncestor","clippingAncestor","html","clientWidth","clientHeight","visualViewportBased","getViewportRect","scroll","scrollWidth","scrollHeight","direction","getDocumentRect","getInnerBoundingClientRect","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","currentNode","computedStyle","currentNodeIsContaining","ancestor","getRectRelativeToOffsetParent","isOffsetParentAnElement","offsets","offsetRect","htmlX","htmlY","htmlRect","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","svgOffsetParent","getContainingBlock","topLayer","clippingAncestors","firstClippingAncestor","clippingRect","reduce","accRect","getElementRects","getOffsetParentFn","getDimensionsFn","getDimensions","floatingDimensions","getClientRects","isRTL","offset","_middlewareData$offse","_middlewareData$arrow","middlewareData","diffCoords","mainAxisMulti","crossAxisMulti","mainAxis","crossAxis","convertValueToCoords","arrow","alignmentOffset","checkMainAxis","checkCrossAxis","limiter","detectOverflowOptions","mainAxisCoord","crossAxisCoord","maxSide","limitedCoords","flip","_middlewareData$flip","initialPlacement","fallbackPlacements","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment","isBasePlacement","oppositePlacement","getExpandedPlacements","isStart","lr","rl","tb","bt","getSideList","getOppositeAxisPlacements","placements","overflows","overflowsData","sides","mainAlignmentSide","getAlignmentSides","_middlewareData$flip2","_overflowsData$filter","nextIndex","nextPlacement","resetPlacement","sort","_overflowsData$map$so","acc","computePosition","mergedOptions","platformWithCache","config","middleware","validMiddleware","statefulPlacement","resetCount","nextX","nextY","computePosition$1","definition","undefinedType","isIE","logMethods","_loggersByName","defaultLogger","bindMethod","obj","methodName","traceForIE","trace","replaceLoggingMethods","methodFactory","levels","SILENT","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","realMethod","factory","inheritedLevel","defaultLevel","userLevel","getPersistedLevel","storedLevel","cookieName","normalizeLevel","persist","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","resetLevel","clearPersistedLevel","enableAll","TRACE","disableAll","rebuild","childName","initialLevel","_log","noConflict","getLoggers","extendStatics","setPrototypeOf","__proto__","__extends","constructor","create","__awaiter","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","adopt","__generator","sent","trys","ops","Iterator","verb","Symbol","iterator","op","__values","s","m","__read","__await","__asyncGenerator","asyncIterator","AsyncIterator","resume","fulfill","settle","__asyncValues","isFunction","createErrorClass","createImpl","ctorFunc","instance","UnsubscriptionError","_super","errors","arrRemove","arr","Subscription","initialTeardown","closed","_parentage","_finalizers","e_1","e_2","_parentage_1","_parentage_1_1","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","empty","EMPTY_SUBSCRIPTION","isSubscription","timeoutProvider","handle","delegate","reportUnhandledError","errorContext","Subscriber","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","_next","_error","_complete","_bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","_subscribe","lift","operator","subscriber","isObserver","isSubscriber","_trySubscribe","sink","promiseCtor","getPromiseCtor","Symbol_observable","pipe","fns","prev","pipeFromArray","toPromise","operate","hasLift","liftedSource","createOperatorSubscriber","onNext","onComplete","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","ObjectUnsubscribedError","Subject","currentObservers","hasError","thrownError","subject","AnonymousSubject","_throwIfClosed","_checkFinalizedStatuses","_innerSubscribe","asObservable","BehaviorSubject","_value","getValue","dateTimestampProvider","Action","scheduler","work","schedule","intervalProvider","setInterval","clearInterval","AsyncAction","pending","recycleAsyncId","requestAsyncId","_id","_scheduler","execute","_execute","_delay","errorValue","errored","actions","Scheduler","schedulerActionCtor","asyncScheduler","AsyncScheduler","SchedulerAction","_active","last","popScheduler","isScheduler","isArrayLike","isPromise","isInteropObservable","isAsyncIterable","createInvalidObservableTypeError","isIterable","Symbol_iterator","readableStreamLikeToAsyncGenerator","readableStream","releaseLock","isReadableStreamLike","innerFrom","obs","fromInteropObservable","fromArrayLike","promise","fromPromise","fromAsyncIterable","iterable","iterable_1","iterable_1_1","fromIterable","fromReadableStreamLike","asyncIterable","asyncIterable_1","asyncIterable_1_1","executeSchedule","parentSubscription","repeat","scheduleSubscription","observeOn","subscribeOn","scheduleAsyncIterable","scheduled","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","of","TimeoutError","schedulerArg","isNaN","isValidDate","each","with","_with","timeoutErrorFactory","meta","originalSourceSubscription","timerSubscription","lastValue","seen","startTimer","project","mapOneOrManyArgs","callOrApply","mergeMap","resultSelector","concurrent","ii","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","active","isComplete","checkComplete","doInnerSub","innerComplete","innerValue","_loop_1","bufferedValue","mergeInternals","mergeAll","concatAll","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","isEventTarget","isNodeStyleEventEmitter","toCommonHandlerRegistry","isJQueryStyleEventEmitter","subTarget","merge","defaultValue","popNumber","defaultCompare","scan","accumulator","seed","hasSeed","emitOnNext","emitBeforeComplete","hasState","scanInternals","startWith","values","takeUntil","notifier","__defProp","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","writable","__spreadValues","__spreadProps","__async","__this","__arguments","throw","cssPrefix","isTrackReferenceSubscribed","isTrackReferencePublished","isTrackReferencePlaceholder","isEqualTrackRef","pinState","pinnedTrackReference","LocalParticipant","inner","outer","visibility","w1","w2","removeChild","isWeb","createUrlRegExp","regex2","regex","createEmailRegExp","computeMenuPosition","button","menu","wasClickOutside","insideElement","contains","email","grammar","rx","weight","matchAll","flat","tokens","pos","allParticipantRoomEvents","ConnectionStateChanged","RoomMetadataChanged","ActiveSpeakersChanged","ConnectionQualityChanged","ParticipantConnected","ParticipantDisconnected","ParticipantPermissionsChanged","ParticipantMetadataChanged","ParticipantNameChanged","ParticipantAttributesChanged","TrackMuted","TrackUnmuted","TrackPublished","TrackUnpublished","TrackStreamStateChanged","TrackSubscriptionFailed","TrackSubscriptionPermissionChanged","TrackSubscriptionStatusChanged","LocalTrackPublished","LocalTrackUnpublished","ParticipantEvent","TrackSubscribed","TrackUnsubscribed","IsSpeakingChanged","loglevel","GRID_LAYOUTS","columns","rows","minWidth","selectGridLayout","layoutDefinitions","participantCount","layouts","minHeight","expandAndSortLayoutDefinitions","currentLayoutIndex","containerOrientation","layout_","allLayouts","isBiggerLayoutAvailable","findIndex","fitsOrientation","layoutIsBiggerThanCurrent","layoutFitsSameAmountOfParticipants","smallerLayout","supportsScreenSharing","mediaDevices","getDisplayMedia","PIN_DEFAULT_STATE","WIDGET_DEFAULT_STATE","showChat","unreadMessages","showSettings","isSourceWitOptions","isSourcesWithOptions","sortParticipantsByAudioLevel","audioLevel","sortParticipantsByIsSpeaking","isSpeaking","sortParticipantsByLastSpokenAT","lastSpokeAt","sortParticipantsByJoinedAt","joinedAt","sortTrackReferences","localTracks","screenShareTracks","cameraTracks","undefinedTracks","Track2","sortedScreenShareTracks","localScreenShares","remoteScreenShares","sortScreenShareTracks","sortedCameraTracks","cameraTrackReferences","localCameraTracks","remoteCameraTracks","sortTrackReferencesByType","isCameraEnabled","aVideo","sortTrackRefsByIsCameraEnabled","sortCameraTracks","zip","a1","a2","resultLength","_val","idx","differenceBy","by","flatTrackReferenceArray","trackReferences","indexToReplace","trackReference_","divideIntoPages","maxElementsOnPage","updatePages","currentList","nextList","maxItemsOnPage","updatedList","currentItem","updateForCurrentItem","newItem_","currentTrackRef","nextTrackRef","isPlaceholderReplacement","refreshList","addedItems","pageIndex","changes","dropped","added","visualPageChange","listNeedsUpdating","moveForward","moveBack","indexReplaceWith","swapItems","itemToDrop","indexOfElementToDrop","dropItem","itemToAdd","addItem","missingItems","prefixClass","unprefixedClassName","trackIdentifier","initialPub","observeParticipantMedia","Track4","getTrackPublications","trackName","getTrackPublicationByName","getTrackPublication","observeRoomEvents","events","onRoomUpdate","startWith2","roomEventSelector","connectionStateObserver","RoomEvent2","map2","connectionState","createMediaDeviceObserver","onDeviceChange","newDevices","Room","getLocalDevices","deviceSubject","finalize","isSecureContext","createChatObserver","ChatMessage","roomAudioPlaybackAllowedObservable","AudioPlaybackStatusChanged","room2","canPlaybackAudio","roomVideoPlaybackAllowedObservable","VideoPlaybackStatusChanged","canPlaybackVideo","encryptionStatusObservable","ParticipantEncryptionStatusChanged","localParticipant","encrypted","LocalParticipant3","isE2EEEnabled","recordingStatusObservable","RecordingStatusChanged","recording","isRecording","observeParticipantEvents","Observable2","onParticipantUpdate","startWith3","ParticipantEvent2","map3","isMicrophoneEnabled","isScreenShareEnabled","microphoneTrack","Track6","cameraTrack","participantInfoObserver","participantEventSelector","mutedObserver","_b2","createIsSpeakingObserver","participantPermissionObserver","permissions","setupMediaToggle","publishOptions","getSourceEnabled","source2","localParticipant2","isEnabled","Track7","enabledObserver","map4","media","startWith4","pendingSubject","Subject2","toggle","forceState","captureOptions","setCameraEnabled","setMicrophoneEnabled","setScreenShareEnabled","pendingObserver","setupManualToggle","enabledSubject","setupDeviceSelector","localTrack","activeDeviceSubject","activeDeviceObservable","ActiveDeviceChanged","kindOfDevice","kind2","getActiveDevice","createActiveDeviceObservable","_0","_1","switchActiveDevice","actualDeviceId","targetTrack","Track8","useDefault","mediaStreamTrack","setDeviceId","actualId","getDeviceId","setupDisconnectButton","stopTracks","setupConnectionQualityIndicator","connectionQualityObserver","connectionQuality","createConnectionQualityObserver","setupTrackMutedIndicator","classForSource","Track9","mediaMutedObserver","setupParticipantTile","DataTopic","CHAT","CHAT_UPDATE","sendMessage","reliable","destinationIdentities","topic","publishData","setupDataMessageHandler","onMessage","topics","messageObservable","DataReceived","createDataObserver","filter2","messageTopic","map5","isSendingSubscriber","isSendingObservable","Observable3","decoder","topicSubjectMap","setupChat","onDestroyObservable","Subject3","messageDecoder","messageEncoder","channelTopic","updateChannelTopic","updateTopic","needsSetup","topicMap","messageSubject","chatObservable","sendChatMessage","edit","originalMsg","editChatMessage","setupChatMessageHandler","finalMessageDecoder","messagesObservable","map6","parsedMessage","newMessage","ignore","isIgnorableChatMessage","_a3","replaceIndex","isSending$","BehaviorSubject2","finalMessageEncoder","RoomEvent4","chatMessage","encodedLegacyMsg","originalMessageOrId","originalMessage","editedMessage","encodedLegacyMessage","setupStartAudio","handleStartAudioPlayback","startAudio","setupStartVideo","handleStartVideoPlayback","startVideo","setupChatToggle","setupFocusToggle","setupLiveKitRoom","getTrackReferences","onlySubscribedTracks","allParticipants","remoteParticipants","sourceReferences","trackPublications","participants","trackReferencesObservable","additionalRoomEvents","RoomEvent5","map7","startWith5","htmlElement","inactiveAfter","move$","map8","moveAndStop$","concat2","taking","skipSubscriber","skipUntil","comparator","keySelector","previousKey","currentKey","distinctUntilChanged","USER_CHOICES_KEY","defaultUserChoices","videoEnabled","audioEnabled","videoDeviceId","audioDeviceId","username","load","save","loadFromLocalStorage","nonEmptySettings","fromEntries","value2","saveToLocalStorage","createLocalStorageInterface","saveUserChoices","userChoices","preventSave","loadUserChoices","defaults","preventLoad","fallback","maybeLoadedObject","chatReducer","pinReducer","useLayoutContext","useEnsureLayoutContext","useCreateLayoutContext","pinDispatch","widgetDispatch","trackContext","RoomContext","ctx","useEnsureRoom","LKFeatureContext","require","useResizeObserver","resizeObserver","getResizeObserver","storedCallback","storedValue","useLatest","didUnsubscribe","targetEl","_resizeObserver","ticking","allEntries","ResizeObserver","requestAnimationFrame","triggered","cbs","cbIndex","createResizeObserver","setSize","resizeCallback","contentRect","resetWhenObservableChanges","useMediaQuery","query","getMatches","matchMedia","setMatches","handleChange","disabled","gridElement","trackCount","gridLayouts","containerWidth","containerHeight","useIsMuted","sourceOrTrackRef","passedParticipant","setIsMuted","useLocalParticipant","setLocalParticipant","setIsMicrophoneEnabled","setIsCameraEnabled","lastMicrophoneError","setLastMicrophoneError","lastCameraError","setLastCameraError","setIsScreenShareEnabled","setMicrophoneTrack","setCameraTrack","handleUpdate","useLocalParticipantPermissions","roomContext","currentDeviceId","setCurrentDeviceId","lastTrackRefs","lastMaxItemsOnPage","layoutChanged","sortedTrackRefs","customSortFunction","updatedTrackRefs","itemPerPage","setCurrentPage","ceil","lastItemIndex","firstItemIndex","changePage","tracksOnPage","setPage","num","micTrack","micRef","isVideoMuted","isAudioMuted","useIsSpeaking","facingMode","LocalTrackPublication","facingModeFromLocalTrack","useFacingMode","usePinnedTracks","roomEnsured","touchStart","touchEnd","minSwipeDistance","onTouchStart","targetTouches","clientX","onTouchMove","onTouchEnd","distance","isRightSwipe","elementCopy","toFixed","initialState","onDeviceError","rest","userInteractionRef","newProps","clickHandler","setTrackReferences","setParticipants","sources_","requirePlaceholder","placeholderMap","sourcesThatNeedPlaceholder","sourceWithOption","withPlaceholder","sourcesOfSubscribedTracks","trackSource","placeholderNeededForThisParticipant","setA","setB","_difference","elem","difference","requiredPlaceholders","trackReferencesWithPlaceholders","placeholderSource","useChat","isDisconnected","setup","isSending","chatMessages","usePersistentUserChoices","setSettings","saveAudioInputEnabled","saveVideoInputEnabled","saveAudioInputDeviceId","saveVideoInputDeviceId","saveUsername","useIsRecording","useKrispNoiseFilter","shouldEnable","setShouldEnable","isNoiseFilterPending","setIsNoiseFilterPending","isNoiseFilterEnabled","setIsNoiseFilterEnabled","micPublication","krispProcessor","setKrispProcessor","setNoiseFilterEnabled","enable","KrispNoiseFilter","isKrispNoiseFilterSupported","filterOptions","LocalAudioTrack","currentProcessor","getProcessor","finally","setProcessor","processor","Chat","inputRef","ulRef","chatOptions","lastReadMsgAt","scrollTo","unreadMessageCount","ChatCloseIcon","allMsg","onSubmit","preventDefault","focus","onInput","ev","stopPropagation","onKeyDown","onKeyUp","MediaDeviceMenu","isOpen","setIsOpen","setDevices","updateRequired","setUpdateRequired","needPermissions","setNeedPermissions","tooltip","assign","handleClickOutside","audioinput","videoinput","useWarnAboutMissingStyles","PreJoin","onValidate","joinLabel","micLabel","camLabel","userLabel","persistUserChoices","setUserChoices","partialDefaults","initialUserChoices","setAudioEnabled","setVideoEnabled","setAudioDeviceId","setVideoDeviceId","setUsername","setTracks","trackLock","Mutex","needsCleanup","unlock","audio","video","createLocalTracks","tr","usePreviewTracks","videoEl","videoTrack","Video","audioTrack","unmute","setIsValid","handleValidation","newUserChoices","inputEl","autoComplete","maxWidth","SettingsMenuToggle","useSettingsToggle","ControlBar","variation","controls","isChatOpen","setIsChatOpen","defaultVariation","visibleControls","leave","localPermissions","camera","canPublish","microphone","screenShare","chat","canPublishData","showText","browserSupportsScreenSharing","onScreenShareChange","microphoneOnChange","isUserInitiated","cameraOnChange","_kind","selfBrowserSurface","ChatIcon","settings","GearIcon","LeaveIcon","VideoConference","chatMessageFormatter","chatMessageDecoder","chatMessageEncoder","SettingsComponent","setWidgetState","lastAutoFocusedScreenShareTrack","focusTrack","carouselTracks","newScreenShareTrack","updatedFocusTrack","chain","defaultRoomProps","connect","LiveKitRoom","token","serverUrl","passedRoom","connectOptions","screen","onConnected","onDisconnected","onMediaDeviceFailure","onEncryptionError","simulateParticipants","setRoom","onSignalConnected","localP","all","handleMediaDeviceError","mediaDeviceFailure","MediaDeviceFailure","getFailure","handleEncryptionError","SignalConnected","EncryptionError","publish","useRealTracks","connectionStateChangeListener","Connected","useLiveKitRoom","featureFlags"],"sourceRoot":""}